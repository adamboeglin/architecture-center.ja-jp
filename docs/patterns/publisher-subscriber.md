---
title: パブリッシャーとサブスクライバーのパターン
description: アプリケーションから複数の対象コンシューマーに対して非同期的にイベントを通知できるようにします。
keywords: 設計パターン
author: alexbuckgit
ms.date: 12/07/2018
ms.topic: design-pattern
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.openlocfilehash: 9b931337f7f0e5dc58f83701271c7d3491af5bfd
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/20/2019
ms.locfileid: "58248747"
---
# <a name="publisher-subscriber-pattern"></a><span data-ttu-id="f9761-104">パブリッシャーとサブスクライバーのパターン</span><span class="sxs-lookup"><span data-stu-id="f9761-104">Publisher-Subscriber pattern</span></span>

<span data-ttu-id="f9761-105">送信側と受信側を結合せずに、アプリケーションから複数の対象コンシューマーに対して非同期的にイベントを通知できるようにします。</span><span class="sxs-lookup"><span data-stu-id="f9761-105">Enable an application to announce events to multiple interested consumers aynchronously, without coupling the senders to the receivers.</span></span>

<span data-ttu-id="f9761-106">**別名**:パブリッシュ/サブスクライブ メッセージング</span><span class="sxs-lookup"><span data-stu-id="f9761-106">**Also called**: Pub/sub messaging</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="f9761-107">コンテキストと問題</span><span class="sxs-lookup"><span data-stu-id="f9761-107">Context and problem</span></span>

<span data-ttu-id="f9761-108">クラウド ベースの分散アプリケーションでは、システムのコンポーネントは、多くの場合、イベントが発生したときに他のコンポーネントに情報を提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f9761-108">In cloud-based and distributed applications, components of the system often need to provide information to other components as events happen.</span></span>

<span data-ttu-id="f9761-109">非同期メッセージングは、送信者をコンシューマーから切り離し、送信者が応答を待機するのをブロックしないようにする有効な方法です。</span><span class="sxs-lookup"><span data-stu-id="f9761-109">Asynchronous messaging is an effective way to decouple senders from consumers, and avoid blocking the sender to wait for a response.</span></span> <span data-ttu-id="f9761-110">ただし、各コンシューマーのために専用のメッセージ キューを使用しても、多数のコンシューマーに対して効果的にスケーリングすることにはなりません。</span><span class="sxs-lookup"><span data-stu-id="f9761-110">However, using a dedicated message queue for each consumer does not effectively scale to many consumers.</span></span> <span data-ttu-id="f9761-111">また、一部のコンシューマーは、情報のサブセットにのみ興味を持っている場合があります。</span><span class="sxs-lookup"><span data-stu-id="f9761-111">Also, some of the consumers might be interested in only a subset of the information.</span></span> <span data-ttu-id="f9761-112">送信者はどのようにすれば、ID を知らずに、対象のコンシューマー全員にイベントを通知できるでしょうか。</span><span class="sxs-lookup"><span data-stu-id="f9761-112">How can the sender announce events to all interested consumers without knowing their identities?</span></span>

## <a name="solution"></a><span data-ttu-id="f9761-113">解決策</span><span class="sxs-lookup"><span data-stu-id="f9761-113">Solution</span></span>

<span data-ttu-id="f9761-114">以下を含む非同期メッセージング サブシステムを導入します。</span><span class="sxs-lookup"><span data-stu-id="f9761-114">Introduce an asynchronous messaging subsystem that includes the following:</span></span>

- <span data-ttu-id="f9761-115">送信者によって使用される入力メッセージング チャネル。</span><span class="sxs-lookup"><span data-stu-id="f9761-115">An input messaging channel used by the sender.</span></span> <span data-ttu-id="f9761-116">送信者は、既知のメッセージ形式を使用して、メッセージ内にイベントをパッケージ化し、入力チャネルを介してこれらのメッセージを送信します。</span><span class="sxs-lookup"><span data-stu-id="f9761-116">The sender packages events into messages, using a known message format, and sends these messages via the input channel.</span></span> <span data-ttu-id="f9761-117">このパターンの送信者は、*パブリッシャー*とも呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="f9761-117">The sender in this pattern is also called the *publisher*.</span></span>

  > [!NOTE]
  > <span data-ttu-id="f9761-118">*メッセージ*はデータのパケットです。</span><span class="sxs-lookup"><span data-stu-id="f9761-118">A *message* is a packet of data.</span></span> <span data-ttu-id="f9761-119">*イベント*は、発生した変更またはアクションについて、その他のコンポーネントに通知するメッセージです。</span><span class="sxs-lookup"><span data-stu-id="f9761-119">An *event* is a message that notifies other components about a change or an action that has taken place.</span></span>

- <span data-ttu-id="f9761-120">コンシューマーごとに 1 つの出力メッセージング チャネル。</span><span class="sxs-lookup"><span data-stu-id="f9761-120">One output messaging channel per consumer.</span></span> <span data-ttu-id="f9761-121">コンシューマーは*サブスクライバー*とも呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="f9761-121">The consumers are known as *subscribers*.</span></span>

- <span data-ttu-id="f9761-122">そのメッセージに関心があるすべてのサブスクライバーのために、入力チャネルから出力チャネルに各メッセージをコピーするためのメカニズム。</span><span class="sxs-lookup"><span data-stu-id="f9761-122">A mechanism for copying each message from the input channel to the output channels for all subscribers interested in that message.</span></span> <span data-ttu-id="f9761-123">この操作は通常、メッセージ ブローカーやイベント バスなどの仲介機能によって処理されます。</span><span class="sxs-lookup"><span data-stu-id="f9761-123">This operation is typically handled by a intermediary such as a message broker or event bus.</span></span>

<span data-ttu-id="f9761-124">次の図は、このパターンの論理コンポーネントを示しています。</span><span class="sxs-lookup"><span data-stu-id="f9761-124">The following diagram shows the logical components of this pattern:</span></span>

![メッセージ ブローカーを使用するパブリッシュ-サブスクライブのパターン](./_images/publish-subscribe.png)
 
<span data-ttu-id="f9761-126">パブリッシュ/サブスクライブ メッセージングには以下の利点があります。</span><span class="sxs-lookup"><span data-stu-id="f9761-126">Pub/sub messaging has the following benefits:</span></span>

- <span data-ttu-id="f9761-127">これにより、まだ通信する必要があるサブシステムが切り離されます。</span><span class="sxs-lookup"><span data-stu-id="f9761-127">It decouples subsystems that still need to communicate.</span></span> <span data-ttu-id="f9761-128">サブシステムは別個に管理可能で、1 つまたは複数の受信者がオフラインになっている場合でも、メッセージを正しく管理できます。</span><span class="sxs-lookup"><span data-stu-id="f9761-128">Subsystems can be managed independently, and messages can be properly managed even if one or more receivers are offline.</span></span>

- <span data-ttu-id="f9761-129">スケーラビリティが向上し、送信者の応答性が向上します。</span><span class="sxs-lookup"><span data-stu-id="f9761-129">It increases scalability and improves responsiveness of the sender.</span></span> <span data-ttu-id="f9761-130">送信者は入力チャネルにすばやく単一のメッセージを送信し、担っているコアの処理に戻ることができます。</span><span class="sxs-lookup"><span data-stu-id="f9761-130">The sender can quickly send a single message to the input channel, then return to its core processing responsibilities.</span></span> <span data-ttu-id="f9761-131">興味を持っているサブスクライバーに確実にメッセージが配信されるようにすることは、メッセージング インフラストラクチャが行います。</span><span class="sxs-lookup"><span data-stu-id="f9761-131">The messaging infrastructure is responsible for ensuring messages are delivered to interested subscribers.</span></span>

- <span data-ttu-id="f9761-132">そのため、信頼性が向上します。</span><span class="sxs-lookup"><span data-stu-id="f9761-132">It improves reliability.</span></span> <span data-ttu-id="f9761-133">非同期メッセージングは、増加した負荷のもとでアプリケーションがスムーズに実行され続けるようにして、断続的なエラーをより効果的に処理する助けとなります。</span><span class="sxs-lookup"><span data-stu-id="f9761-133">Asynchronous messaging helps applications continue to run smoothly under increased loads and handle intermittent failures more effectively.</span></span>

- <span data-ttu-id="f9761-134">遅延処理やスケジュールされた処理が可能です。</span><span class="sxs-lookup"><span data-stu-id="f9761-134">It allows for deferred or scheduled processing.</span></span> <span data-ttu-id="f9761-135">サブスクライバーがオフピークの時間までメッセージの取得を待機することも、特定のスケジュールに従って、メッセージのルーティングまたは処理を行うこともできます。</span><span class="sxs-lookup"><span data-stu-id="f9761-135">Subscribers can wait to pick up messages until off-peak hours, or messages can be routed or processed according to a specific schedule.</span></span>

- <span data-ttu-id="f9761-136">異なるプラットフォーム、プログラミング言語、または通信プロトコルを使用するシステム間だけでなく、オンプレミス システムとクラウドで実行されるアプリケーション間の統合をより簡単にすることができます。</span><span class="sxs-lookup"><span data-stu-id="f9761-136">It enables simpler integration between systems using different platforms, programming languages, or communication protocols, as well as between on-premises systems and applications running in the cloud.</span></span>

- <span data-ttu-id="f9761-137">企業全体にわたる非同期ワークフローが容易になります。</span><span class="sxs-lookup"><span data-stu-id="f9761-137">It facilitates asynchronous workflows across an enterprise.</span></span>

- <span data-ttu-id="f9761-138">テストの容易性が向上します。</span><span class="sxs-lookup"><span data-stu-id="f9761-138">It improves testability.</span></span> <span data-ttu-id="f9761-139">チャネルを監視することができ、全体の統合テスト戦略の一部として、メッセージの検査やログへの記録が可能です。</span><span class="sxs-lookup"><span data-stu-id="f9761-139">Channels can be monitored and messages can be inspected or logged as part of an overall integration test strategy.</span></span>

- <span data-ttu-id="f9761-140">アプリケーションの懸念事項の分離が提供されます。</span><span class="sxs-lookup"><span data-stu-id="f9761-140">It provides separation of concerns for your applications.</span></span> <span data-ttu-id="f9761-141">メッセージング インフラストラクチャがメッセージを複数のコンシューマーに確実にルーティングするために必要なすべてを処理している間、各アプリケーションはコア機能に集中できます。</span><span class="sxs-lookup"><span data-stu-id="f9761-141">Each application can focus on its core capabilities, while the messaging infrastructure handles everything required to reliably route messages to multiple consumers.</span></span> 

## <a name="issues-and-considerations"></a><span data-ttu-id="f9761-142">問題と注意事項</span><span class="sxs-lookup"><span data-stu-id="f9761-142">Issues and considerations</span></span>

<span data-ttu-id="f9761-143">このパターンの実装方法を決めるときには、以下の点に注意してください。</span><span class="sxs-lookup"><span data-stu-id="f9761-143">Consider the following points when deciding how to implement this pattern:</span></span>

- <span data-ttu-id="f9761-144">**既存のテクノロジ。**</span><span class="sxs-lookup"><span data-stu-id="f9761-144">**Existing technologies.**</span></span> <span data-ttu-id="f9761-145">独自に構築するのではなく、パブリッシュ-サブスクライブ モデルをサポートしている、入手できるメッセージング製品とサービスを使用することを強くお勧めします。</span><span class="sxs-lookup"><span data-stu-id="f9761-145">It is strongly recommended to use available messaging products and services that support a publish-subscribe model, rather than building your own.</span></span> <span data-ttu-id="f9761-146">Azure では、[Service Bus](/azure/service-bus-messaging/) または [Event Grid](/azure/event-grid/) の使用を検討してください。</span><span class="sxs-lookup"><span data-stu-id="f9761-146">In Azure, consider using [Service Bus](/azure/service-bus-messaging/) or [Event Grid](/azure/event-grid/).</span></span> <span data-ttu-id="f9761-147">パブリッシュ/サブスクライブ メッセージング用に使用できるその他のテクノロジには、Redis、RabbitMQ、Apache Kafka が含まれます。</span><span class="sxs-lookup"><span data-stu-id="f9761-147">Other technologies that can be used for pub/sub messaging include Redis, RabbitMQ, and Apache Kafka.</span></span>

- <span data-ttu-id="f9761-148">**サブスクリプションの処理。**</span><span class="sxs-lookup"><span data-stu-id="f9761-148">**Subscription handling.**</span></span> <span data-ttu-id="f9761-149">メッセージング インフラストラクチャでは、コンシューマーがチャネルのサブスクライブまたはサブスクライブ解除に使用できるメカニズムを提供する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f9761-149">The messaging infrastructure must provide mechanisms that consumers can use to subscribe to or unsubscribe from available channels.</span></span>

- <span data-ttu-id="f9761-150">**セキュリティ。**</span><span class="sxs-lookup"><span data-stu-id="f9761-150">**Security.**</span></span> <span data-ttu-id="f9761-151">承認されていないユーザーやアプリケーションによる盗聴を防ぐため、どのメッセージ チャネルへの接続も、セキュリティ ポリシーによって制限する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f9761-151">Connecting to any message channel must be restricted by security policy to prevent eavesdropping by unauthorized users or applications.</span></span>

- <span data-ttu-id="f9761-152">**メッセージのサブセット。**</span><span class="sxs-lookup"><span data-stu-id="f9761-152">**Subsets of messages.**</span></span> <span data-ttu-id="f9761-153">サブスクライバーは、通常、パブリッシャーによって配布されるメッセージのサブセットにのみ興味を持っています。</span><span class="sxs-lookup"><span data-stu-id="f9761-153">Subscribers are usually only interested in subset of the messages distributed by a publisher.</span></span> <span data-ttu-id="f9761-154">メッセージング サービスでは、多くの場合、受信したメッセージのセットをサブスクライバーが絞り込むことができます。</span><span class="sxs-lookup"><span data-stu-id="f9761-154">Messaging services often allow subscribers to narrow the set of messages received by:</span></span>

  - <span data-ttu-id="f9761-155">**トピック。**</span><span class="sxs-lookup"><span data-stu-id="f9761-155">**Topics.**</span></span> <span data-ttu-id="f9761-156">各トピックには専用の出力チャネルがあり、各コンシューマーは、すべての関連トピックをサブスクライブできます。</span><span class="sxs-lookup"><span data-stu-id="f9761-156">Each topic has a dedicated output channel, and each consumer can subscribe to all relevant topics.</span></span>
  - <span data-ttu-id="f9761-157">**コンテンツのフィルター処理。**</span><span class="sxs-lookup"><span data-stu-id="f9761-157">**Content filtering.**</span></span> <span data-ttu-id="f9761-158">各メッセージのコンテンツに基づいてメッセージの検査と配布が行われます。</span><span class="sxs-lookup"><span data-stu-id="f9761-158">Messages are inspected and distributed based on the content of each message.</span></span> <span data-ttu-id="f9761-159">各サブスクライバーは、興味のあるコンテンツを指定できます。</span><span class="sxs-lookup"><span data-stu-id="f9761-159">Each subscriber can specify the content it is interested in.</span></span>

- <span data-ttu-id="f9761-160">**ワイルドカード サブスクライバー。**</span><span class="sxs-lookup"><span data-stu-id="f9761-160">**Wildcard subscribers.**</span></span> <span data-ttu-id="f9761-161">サブスクライバーによる、ワイルドカードを使用した複数トピックのサブスクライブを許可することを検討してください。</span><span class="sxs-lookup"><span data-stu-id="f9761-161">Consider allowing subscribers to subscribe to multiple topics via wildcards.</span></span>

- <span data-ttu-id="f9761-162">**双方向通信。**</span><span class="sxs-lookup"><span data-stu-id="f9761-162">**Bi-directional communication.**</span></span> <span data-ttu-id="f9761-163">パブリッシュ-サブスクライブ システムのチャネルは、一方向として扱われます。</span><span class="sxs-lookup"><span data-stu-id="f9761-163">The channels in a publish-subscribe system are treated as unidirectional.</span></span> <span data-ttu-id="f9761-164">特定のサブスクライバーが受信確認の送信や、パブリッシャーに状態を返す通信を行う必要がある場合は、[要求/応答パターン](http://www.enterpriseintegrationpatterns.com/patterns/messaging/RequestReply.html)の使用を検討します。</span><span class="sxs-lookup"><span data-stu-id="f9761-164">If a specific subscriber needs to send acknowledgement or communicate status back to the publisher, consider using the [Request/Reply Pattern](http://www.enterpriseintegrationpatterns.com/patterns/messaging/RequestReply.html).</span></span> <span data-ttu-id="f9761-165">このパターンでは、1 つのチャネルを使用してサブスクライバーにメッセージが送信され、パブリッシャーに返す通信には別個の応答チャネルが使用されます。</span><span class="sxs-lookup"><span data-stu-id="f9761-165">This pattern uses one channel to send a message to the subscriber, and a separate reply channel for communicating back to the publisher.</span></span>

- <span data-ttu-id="f9761-166">**メッセージの順序付け。**</span><span class="sxs-lookup"><span data-stu-id="f9761-166">**Message ordering.**</span></span> <span data-ttu-id="f9761-167">コンシューマー インスタンスでは、メッセージを受け取る順序は保証されません。また、受け取る順序に、メッセージが作成された順序が反映されるとは限りません。</span><span class="sxs-lookup"><span data-stu-id="f9761-167">The order in which consumer instances receive messages isn't guaranteed, and doesn't necessarily reflect the order in which the messages were created.</span></span> <span data-ttu-id="f9761-168">メッセージ処理の順序への依存をなくす助けになるように、メッセージ処理がべき等になるようにシステムを設計します。</span><span class="sxs-lookup"><span data-stu-id="f9761-168">Design the system to ensure that message processing is idempotent to help eliminate any dependency on the order of message handling.</span></span>

- <span data-ttu-id="f9761-169">**メッセージの優先度。**</span><span class="sxs-lookup"><span data-stu-id="f9761-169">**Message priority.**</span></span> <span data-ttu-id="f9761-170">一部のソリューションでは、特定の順序でメッセージが処理される必要があります。</span><span class="sxs-lookup"><span data-stu-id="f9761-170">Some solutions may require that messages are processed in a specific order.</span></span> <span data-ttu-id="f9761-171">[Priority Queue パターン](priority-queue.md)は、特定のメッセージが確実に、他のメッセージより前に配信されるようにするメカニズムを提供します。</span><span class="sxs-lookup"><span data-stu-id="f9761-171">The [Priority Queue pattern](priority-queue.md) provides a mechanism for ensuring specific messages are delivered before others.</span></span>

- <span data-ttu-id="f9761-172">**有害メッセージ。**</span><span class="sxs-lookup"><span data-stu-id="f9761-172">**Poison messages.**</span></span> <span data-ttu-id="f9761-173">不適切な形式のメッセージ、または使用できないリソースにアクセスする必要があるタスクによって、サービス インスタンスが失敗する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f9761-173">A malformed message, or a task that requires access to resources that aren't available, can cause a service instance to fail.</span></span> <span data-ttu-id="f9761-174">システムでは、そのようなメッセージがキューに返されないようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="f9761-174">The system should prevent such messages being returned to the queue.</span></span> <span data-ttu-id="f9761-175">代わりに、必要な場合は分析できるように、これらのメッセージの詳細を他の場所でキャプチャして保存します。</span><span class="sxs-lookup"><span data-stu-id="f9761-175">Instead, capture and store the details of these messages elsewhere so that they can be analyzed if necessary.</span></span>

- <span data-ttu-id="f9761-176">**メッセージの繰り返し。**</span><span class="sxs-lookup"><span data-stu-id="f9761-176">**Repeated messages.**</span></span> <span data-ttu-id="f9761-177">同じメッセージが複数回送信されることがあります。</span><span class="sxs-lookup"><span data-stu-id="f9761-177">The same message might be sent more than once.</span></span> <span data-ttu-id="f9761-178">たとえば、送信者がメッセージ投稿後に失敗することがあります。</span><span class="sxs-lookup"><span data-stu-id="f9761-178">For example, the sender might fail after posting a message.</span></span> <span data-ttu-id="f9761-179">その後、送信者の新しいインスタンスが起動されて、メッセージを繰り返します。</span><span class="sxs-lookup"><span data-stu-id="f9761-179">Then a new instance of the sender might start up and repeat the message.</span></span> <span data-ttu-id="f9761-180">多くて 1 回のメッセージ配信を提供するために、メッセージング インフラストラクチャには、メッセージ ID に基づく重複メッセージの検出と削除 (重複除外とも呼ばれます) を実装する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f9761-180">The messaging infrastructure should implement duplicate message detection and removal (also known as de-duping) based on message IDs in order to provide at-most-once delivery of messages.</span></span>

- <span data-ttu-id="f9761-181">**メッセージの有効期限。**</span><span class="sxs-lookup"><span data-stu-id="f9761-181">**Message expiration.**</span></span> <span data-ttu-id="f9761-182">メッセージの有効期間は制限されていることがあります。</span><span class="sxs-lookup"><span data-stu-id="f9761-182">A message might have a limited lifetime.</span></span> <span data-ttu-id="f9761-183">この期間内に処理されない場合、もう関連がなくなった可能性があり、破棄する必要があります。</span><span class="sxs-lookup"><span data-stu-id="f9761-183">If it isn't processed within this period, it might no longer be relevant and should be discarded.</span></span> <span data-ttu-id="f9761-184">送信者は、メッセージ内のデータの一部として、有効期限の時間を指定できます。</span><span class="sxs-lookup"><span data-stu-id="f9761-184">A sender can specify an experiation time as part of the data in the message.</span></span> <span data-ttu-id="f9761-185">受信者は、メッセージに関連付けられているビジネス ロジックを実行するかどうかを決める前に、この情報を調べることができます。</span><span class="sxs-lookup"><span data-stu-id="f9761-185">A receiver can examine this information before deciding whether to perform the business logic associated with the message.</span></span>

- <span data-ttu-id="f9761-186">**メッセージのスケジュール設定。**</span><span class="sxs-lookup"><span data-stu-id="f9761-186">**Message scheduling.**</span></span> <span data-ttu-id="f9761-187">メッセージは、一時的に停止される可能性があり、特定の日付と時刻まで処理してはいけません。</span><span class="sxs-lookup"><span data-stu-id="f9761-187">A message might be temporarily embargoed and should not be processed until a specific date and time.</span></span> <span data-ttu-id="f9761-188">この時点まで、受信者がメッセージを使用できてはいけません。</span><span class="sxs-lookup"><span data-stu-id="f9761-188">The message should not be available to a receiver until this time.</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="f9761-189">このパターンを使用する状況</span><span class="sxs-lookup"><span data-stu-id="f9761-189">When to use this pattern</span></span>

<span data-ttu-id="f9761-190">このパターンは次の状況で使用します。</span><span class="sxs-lookup"><span data-stu-id="f9761-190">Use this pattern when:</span></span>

- <span data-ttu-id="f9761-191">アプリケーションは、非常に多くのコンシューマーに情報をブロードキャストする必要があります。</span><span class="sxs-lookup"><span data-stu-id="f9761-191">An application needs to broadcast information to a significant number of consumers.</span></span>

- <span data-ttu-id="f9761-192">アプリケーションは、独立して開発された 1 つまたは複数のアプリケーションまたはサービスと通信する必要があります。これらは、異なるプラットフォーム、プログラミング言語、および通信プロトコルを使用している可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f9761-192">An application needs to communicate with one or more independently-developed applications or services, which may use different platforms, programming languages, and communication protocols.</span></span>

- <span data-ttu-id="f9761-193">アプリケーションは、コンシューマーからのリアルタイムの応答を必要とせずに、コンシューマーに情報を送信できます。</span><span class="sxs-lookup"><span data-stu-id="f9761-193">An application can send information to consumers without requiring real-time responses from the consumers.</span></span>

- <span data-ttu-id="f9761-194">統合されようとしているシステムは、データの最終的整合性モデルをサポートするように設計されています。</span><span class="sxs-lookup"><span data-stu-id="f9761-194">The systems being integrated are designed to support an eventual consistency model for their data.</span></span>

- <span data-ttu-id="f9761-195">アプリケーションは、複数のコンシューマーに情報を通信する必要がありますが、これらには、送信者とは異なる可用性要件や稼働スケジュールがある場合もあります。</span><span class="sxs-lookup"><span data-stu-id="f9761-195">An application needs to communicate information to multiple consumers, which may have different availability requirements or uptime schedules than the sender.</span></span>

<span data-ttu-id="f9761-196">このパターンが適さない状況</span><span class="sxs-lookup"><span data-stu-id="f9761-196">This pattern might not be useful when:</span></span>

- <span data-ttu-id="f9761-197">作成側アプリケーションの大きく異なる情報を必要とするコンシューマーが、数人だけしかいない場合。</span><span class="sxs-lookup"><span data-stu-id="f9761-197">An application has only a few consumers who need significantly different information from the producing application.</span></span>

- <span data-ttu-id="f9761-198">アプリケーションが、ほぼリアルタイムの、コンシューマーとの対話を必要とする場合。</span><span class="sxs-lookup"><span data-stu-id="f9761-198">An application requires near real-time interaction with consumers.</span></span>

## <a name="example"></a><span data-ttu-id="f9761-199">例</span><span class="sxs-lookup"><span data-stu-id="f9761-199">Example</span></span>

<span data-ttu-id="f9761-200">次の図は、Service Bus を使用してワークフローを調整するエンタープライズ統合アーキテクチャと、Event Grid の、発生するイベントの通知サブシステムを示しています。</span><span class="sxs-lookup"><span data-stu-id="f9761-200">The following diagram shows an enterprise integration architecture that uses Service Bus to coordinate workflows, and Event Grid notify subsystems of events that occur.</span></span> <span data-ttu-id="f9761-201">詳細については、「[メッセージ キューとイベントを使用した Azure でのエンタープライズ統合](../reference-architectures/enterprise-integration/queues-events.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="f9761-201">For more information, see [Enterprise integration on Azure using message queues and events](../reference-architectures/enterprise-integration/queues-events.md).</span></span>

![エンタープライズ統合アーキテクチャ](../reference-architectures/enterprise-integration/_images/enterprise-integration-queues-events.png)

## <a name="related-patterns-and-guidance"></a><span data-ttu-id="f9761-203">関連のあるパターンとガイダンス</span><span class="sxs-lookup"><span data-stu-id="f9761-203">Related patterns and guidance</span></span>

<span data-ttu-id="f9761-204">このパターンを実装する場合は、次のパターンとガイダンスが関連している可能性があります。</span><span class="sxs-lookup"><span data-stu-id="f9761-204">The following patterns and guidance might be relevant when implementing this pattern:</span></span>

- <span data-ttu-id="f9761-205">[メッセージを配信する Azure サービスの選択](/azure/event-grid/compare-messaging-services)。</span><span class="sxs-lookup"><span data-stu-id="f9761-205">[Choose between Azure services that deliver messages](/azure/event-grid/compare-messaging-services).</span></span>

- <span data-ttu-id="f9761-206">[イベント ドリブン アーキテクチャ スタイル](../guide/architecture-styles/event-driven.md)は、パブリッシュ/サブスクライブ メッセージングを使用するアーキテクチャ スタイルです。</span><span class="sxs-lookup"><span data-stu-id="f9761-206">The [Event-driven architecture style](../guide/architecture-styles/event-driven.md) is an architecture style that uses pub/sub messaging.</span></span>

- <span data-ttu-id="f9761-207">[非同期メッセージングの基本](https://msdn.microsoft.com/library/dn589781.aspx)。</span><span class="sxs-lookup"><span data-stu-id="f9761-207">[Asynchronous Messaging Primer](https://msdn.microsoft.com/library/dn589781.aspx).</span></span> <span data-ttu-id="f9761-208">メッセージ キューは、非同期通信メカニズムです。</span><span class="sxs-lookup"><span data-stu-id="f9761-208">Message queues are an asynchronous communications mechanism.</span></span> <span data-ttu-id="f9761-209">コンシューマー サービスがアプリケーションに返信を送信する必要がある場合、状況に応じて何らかの形式の応答メッセージングを実装します。</span><span class="sxs-lookup"><span data-stu-id="f9761-209">If a consumer service needs to send a reply to an application, it might be necessary to implement some form of response messaging.</span></span> <span data-ttu-id="f9761-210">「Asynchronous Messaging Primer」(非同期メッセージングの基本) では、メッセージ キューを使用して要求/返信メッセージングを実装する方法が説明されています。</span><span class="sxs-lookup"><span data-stu-id="f9761-210">The Asynchronous Messaging Primer provides information on how to implement request/reply messaging using message queues.</span></span>

- <span data-ttu-id="f9761-211">[オブザーバー パターン。](https://en.wikipedia.org/wiki/Observer_pattern)</span><span class="sxs-lookup"><span data-stu-id="f9761-211">[Observer Pattern](https://en.wikipedia.org/wiki/Observer_pattern).</span></span> <span data-ttu-id="f9761-212">パブリッシュ-サブスクライブ パターンは、非同期メッセージングによってオブザーバーからサブジェクトを切り離すことで、オブザーバー パターンを基盤として作成されています。</span><span class="sxs-lookup"><span data-stu-id="f9761-212">The Publish-Subscribe pattern builds on the Observer pattern by decoupling subjects from observers via asynchronous messaging.</span></span>

- <span data-ttu-id="f9761-213">[メッセージ ブローカー パターン](https://en.wikipedia.org/wiki/Message_broker)。</span><span class="sxs-lookup"><span data-stu-id="f9761-213">[Message Broker Pattern](https://en.wikipedia.org/wiki/Message_broker).</span></span> <span data-ttu-id="f9761-214">パブリッシュ-サブスクライブ モデルをサポートする多くのメッセージング サブシステムは、メッセージ ブローカーによって実装されています。</span><span class="sxs-lookup"><span data-stu-id="f9761-214">Many messaging subsystems that support a publish-subscribe modek are implemented via a message broker.</span></span>
