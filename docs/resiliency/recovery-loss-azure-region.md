---
title: Azure リージョンの損失からの復旧
description: 回復力のある高可用性のフォールト トレラント アプリケーションとその設計、およびディザスター リカバリーの計画について説明します。
author: adamglick
ms.date: 08/18/2016
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.custom: resiliency
ms.openlocfilehash: 7f207bbc0bb0128126f9b828dc100d43553cb100
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/20/2019
ms.locfileid: "58242713"
---
[!INCLUDE [header](../_includes/header.md)]

# <a name="azure-resiliency-technical-guidance-recovery-from-a-region-wide-service-disruption"></a><span data-ttu-id="44d29-103">Azure の回復性に関する技術ガイダンス: リージョン全体のサービス中断からの復旧</span><span class="sxs-lookup"><span data-stu-id="44d29-103">Azure resiliency technical guidance: recovery from a region-wide service disruption</span></span>

<span data-ttu-id="44d29-104">Azure はリージョンと呼ばれる物理的および論理的な単位に分割されます。</span><span class="sxs-lookup"><span data-stu-id="44d29-104">Azure is divided physically and logically into units called regions.</span></span> <span data-ttu-id="44d29-105">リージョンは、ごく近くにある 1 つ以上のデータセンターで構成されます。</span><span class="sxs-lookup"><span data-stu-id="44d29-105">A region consists of one or more datacenters in close proximity.</span></span>

<span data-ttu-id="44d29-106">まれに、1 つのリージョン全体の施設がネットワーク障害などでアクセスできなくなることがあります。</span><span class="sxs-lookup"><span data-stu-id="44d29-106">Under rare circumstances, it is possible that facilities in an entire region can become inaccessible, for example due to network failures.</span></span> <span data-ttu-id="44d29-107">また、自然災害などにより、施設が完全に失われることもあります。</span><span class="sxs-lookup"><span data-stu-id="44d29-107">Or facilities can be lost entirely, for example due to a natural disaster.</span></span> <span data-ttu-id="44d29-108">ここでは、複数のリージョンに分散するアプリケーションを作成するための Azure の機能について説明します。</span><span class="sxs-lookup"><span data-stu-id="44d29-108">This section explains the capabilities of Azure for creating applications that are distributed across regions.</span></span> <span data-ttu-id="44d29-109">そのように分散することで、1 つのリージョンの障害が他のリージョンに影響を与える可能性を最小限に抑えることができます。</span><span class="sxs-lookup"><span data-stu-id="44d29-109">Such distribution helps to minimize the possibility that a failure in one region could affect other regions.</span></span>

## <a name="cloud-services"></a><span data-ttu-id="44d29-110">クラウド サービス</span><span class="sxs-lookup"><span data-stu-id="44d29-110">Cloud services</span></span>

### <a name="resource-management"></a><span data-ttu-id="44d29-111">リソース管理</span><span class="sxs-lookup"><span data-stu-id="44d29-111">Resource management</span></span>

<span data-ttu-id="44d29-112">リージョン間でコンピューティング インスタンスを分散するには、各対象リージョンに個別のクラウド サービスを作成し、各クラウド サービスにデプロイ パッケージを発行します。</span><span class="sxs-lookup"><span data-stu-id="44d29-112">You can distribute compute instances across regions by creating a separate cloud service in each target region, and then publishing the deployment package to each cloud service.</span></span> <span data-ttu-id="44d29-113">ただし、さまざまなリージョンのクラウド サービス間でのトラフィックの分散は、アプリケーション開発者またはトラフィック管理サービスによって行われる必要があることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="44d29-113">However, note that distributing traffic across cloud services in different regions must be implemented by the application developer or with a traffic management service.</span></span>

<span data-ttu-id="44d29-114">ディザスター リカバリーのために事前にデプロイする予備のロール インスタンスの数を決定することは、容量計画の重要な要素です。</span><span class="sxs-lookup"><span data-stu-id="44d29-114">Determining the number of spare role instances to deploy in advance for disaster recovery is an important aspect of capacity planning.</span></span> <span data-ttu-id="44d29-115">フルスケールのセカンダリ デプロイを備えると、必要になったときに容量がすぐに使用できるようになりますが、実質的にコストが倍になります。</span><span class="sxs-lookup"><span data-stu-id="44d29-115">Having a full-scale secondary deployment ensures that capacity is already available when needed; however, this effectively doubles the cost.</span></span> <span data-ttu-id="44d29-116">一般的なパターンは、重要なサービスを実行するのに十分な規模の小さなセカンダリ デプロイだけを持つ方法です。</span><span class="sxs-lookup"><span data-stu-id="44d29-116">A common pattern is to have a small, secondary deployment, just large enough to run critical services.</span></span> <span data-ttu-id="44d29-117">容量を確保するためにも、セカンダリ環境の構成をテストするためにも、小規模のセカンダリ デプロイを作成することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="44d29-117">This small secondary deployment is a good idea, both to reserve capacity, and for testing the configuration of the secondary environment.</span></span>

> [!NOTE]
> <span data-ttu-id="44d29-118">サブスクリプションのクォータは、容量が保証されているわけではありません。</span><span class="sxs-lookup"><span data-stu-id="44d29-118">The subscription quota is not a capacity guarantee.</span></span> <span data-ttu-id="44d29-119">クォータは単なる与信限度額です。</span><span class="sxs-lookup"><span data-stu-id="44d29-119">The quota is simply a credit limit.</span></span> <span data-ttu-id="44d29-120">容量を保証するには、必要な数のロールをサービス モデルで定義し、ロールをデプロイする必要があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-120">To guarantee capacity, the required number of roles must be defined in the service model, and the roles must be deployed.</span></span>

### <a name="load-balancing"></a><span data-ttu-id="44d29-121">負荷分散</span><span class="sxs-lookup"><span data-stu-id="44d29-121">Load Balancing</span></span>

<span data-ttu-id="44d29-122">リージョン間でトラフィックの負荷分散を行うためには、トラフィック管理ソリューションが必要です。</span><span class="sxs-lookup"><span data-stu-id="44d29-122">To load balance traffic across regions requires a traffic management solution.</span></span> <span data-ttu-id="44d29-123">Azure には [Azure Traffic Manager](https://azure.microsoft.com/services/traffic-manager/)が用意されています。</span><span class="sxs-lookup"><span data-stu-id="44d29-123">Azure provides [Azure Traffic Manager](https://azure.microsoft.com/services/traffic-manager/).</span></span> <span data-ttu-id="44d29-124">また、同様のトラフィック管理機能を提供しているサードパーティのサービスを活用することもできます。</span><span class="sxs-lookup"><span data-stu-id="44d29-124">You can also take advantage of third-party services that provide similar traffic management capabilities.</span></span>

### <a name="strategies"></a><span data-ttu-id="44d29-125">方法</span><span class="sxs-lookup"><span data-stu-id="44d29-125">Strategies</span></span>

<span data-ttu-id="44d29-126">リージョン間での分散コンピューティングを実装するには、多くの代替方法を利用できます。</span><span class="sxs-lookup"><span data-stu-id="44d29-126">Many alternative strategies are available for implementing distributed compute across regions.</span></span> <span data-ttu-id="44d29-127">これらは、特定のビジネス要件とアプリケーション環境に合わせる必要があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-127">These must be tailored to the specific business requirements and circumstances of the application.</span></span> <span data-ttu-id="44d29-128">大まかに言えば、方法は以下のカテゴリに分類できます。</span><span class="sxs-lookup"><span data-stu-id="44d29-128">At a high level, the approaches can be divided into the following categories:</span></span>

- <span data-ttu-id="44d29-129">**災害発生時の再デプロイ**:この方法では、アプリケーションは災害時に一から再デプロイされます。</span><span class="sxs-lookup"><span data-stu-id="44d29-129">**Redeploy on disaster**: In this approach the application is redeployed from scratch at the time of disaster.</span></span> <span data-ttu-id="44d29-130">これは、復旧時間が保証されている必要のない、重要性の低いアプリケーションに適しています。</span><span class="sxs-lookup"><span data-stu-id="44d29-130">This is appropriate for non-critical applications that don’t require a guaranteed recovery time.</span></span>

- <span data-ttu-id="44d29-131">**ウォーム スペア (アクティブ/パッシブ)**:2 番目のホストされるサービスは別のリージョンに作成され、ロールは最小容量を保証するようにデプロイされます。しかし、このロールでは運用環境のトラフィックを受信しません。</span><span class="sxs-lookup"><span data-stu-id="44d29-131">**Warm Spare (Active/Passive)**: A secondary hosted service is created in an alternate region, and roles are deployed to guarantee minimal capacity; however, the roles don’t receive production traffic.</span></span> <span data-ttu-id="44d29-132">この方法は、リージョン間にトラフィックを分散するように設計されていないアプリケーションに有用です。</span><span class="sxs-lookup"><span data-stu-id="44d29-132">This approach is useful for applications that have not been designed to distribute traffic across regions.</span></span>

- <span data-ttu-id="44d29-133">**ホット スペア (アクティブ/アクティブ)**:アプリケーションは複数のリージョンで運用負荷を受信するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="44d29-133">**Hot Spare (Active/Active)**: The application is designed to receive production load in multiple regions.</span></span> <span data-ttu-id="44d29-134">各リージョンのクラウド サービスは、ディザスター リカバリーのために必要な容量よりも大きい容量で構成されている場合があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-134">The cloud services in each region might be configured for higher capacity than required for disaster recovery purposes.</span></span> <span data-ttu-id="44d29-135">また、クラウド サービスは災害およびフェールオーバー時に必要に応じてスケールアウトする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-135">Alternatively, the cloud services might scale out as necessary at the time of a disaster and failover.</span></span> <span data-ttu-id="44d29-136">この方法は、アプリケーション設計にかなりの投資を必要としますが、大きな利点があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-136">This approach requires substantial investment in application design, but it has significant benefits.</span></span> <span data-ttu-id="44d29-137">たとえば、復旧時間が短いことが保証されていること、すべての復旧場所で連続してテストを実行できること、容量を有効に使用できることなどです。</span><span class="sxs-lookup"><span data-stu-id="44d29-137">These include low and guaranteed recovery time, continuous testing of all recovery locations, and efficient usage of capacity.</span></span>

<span data-ttu-id="44d29-138">分散設計の詳細については、このドキュメントでは説明しません。</span><span class="sxs-lookup"><span data-stu-id="44d29-138">A complete discussion of distributed design is outside the scope of this document.</span></span> <span data-ttu-id="44d29-139">詳細については、 [Azure アプリケーションの障害復旧と高可用性](https://aka.ms/drtechguide)に関するページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="44d29-139">For further information, see [Disaster Recovery and High Availability for Azure Applications](https://aka.ms/drtechguide).</span></span>

## <a name="virtual-machines"></a><span data-ttu-id="44d29-140">仮想マシン</span><span class="sxs-lookup"><span data-stu-id="44d29-140">Virtual machines</span></span>

<span data-ttu-id="44d29-141">サービスとしてのインフラストラクチャ (IaaS) 仮想マシン (VM) の復旧は、多くの点でサービスとしてのプラットフォーム (PaaS) コンピューティングの復旧と似ています。</span><span class="sxs-lookup"><span data-stu-id="44d29-141">Recovery of infrastructure as a service (IaaS) virtual machines (VMs) is similar to platform as a service (PaaS) compute recovery in many respects.</span></span> <span data-ttu-id="44d29-142">ただし、IaaS VM は VM と VM ディスクの両方で構成されているという事実が重要な違いです。</span><span class="sxs-lookup"><span data-stu-id="44d29-142">There are important differences, however, due to the fact that an IaaS VM consists of both the VM and the VM disk.</span></span>

- <span data-ttu-id="44d29-143">**Azure Backup を使用して、アプリケーション整合性のある、複数のリージョンにまたがるバックアップを作成する**。</span><span class="sxs-lookup"><span data-stu-id="44d29-143">**Use Azure Backup to create cross region backups that are application consistent**.</span></span>
  <span data-ttu-id="44d29-144">[Azure Backup](https://azure.microsoft.com/services/backup/) を使用すると、お客様は複数の VM ディスクに一貫性のあるアプリケーション バックアップを作成し、リージョン間でのバックアップのレプリケーションをサポートできます。</span><span class="sxs-lookup"><span data-stu-id="44d29-144">[Azure Backup](https://azure.microsoft.com/services/backup/) enables customers to create application consistent backups across multiple VM disks, and support replication of backups across regions.</span></span> <span data-ttu-id="44d29-145">そのためには、バックアップ コンテナーの作成時に、バックアップ コンテナーを geo レプリケートするように選択します。</span><span class="sxs-lookup"><span data-stu-id="44d29-145">You can do this by choosing to geo-replicate the backup vault at the time of creation.</span></span> <span data-ttu-id="44d29-146">バックアップ コンテナーのレプリケーションは作成時に構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-146">Note that replication of the backup vault must be configured at the time of creation.</span></span> <span data-ttu-id="44d29-147">後で設定することはできません。</span><span class="sxs-lookup"><span data-stu-id="44d29-147">It can't be set later.</span></span> <span data-ttu-id="44d29-148">リージョンが失われた場合、Microsoft はお客様が使用可能なバックアップを作成します。</span><span class="sxs-lookup"><span data-stu-id="44d29-148">If a region is lost, Microsoft will make the backups available to customers.</span></span> <span data-ttu-id="44d29-149">お客様は構成した復元ポイントのいずれかにも復元を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="44d29-149">Customers will be able to restore to any of their configured restore points.</span></span>

- <span data-ttu-id="44d29-150">**オペレーティング システム ディスクからデータ ディスクを分離する**。</span><span class="sxs-lookup"><span data-stu-id="44d29-150">**Separate the data disk from the operating system disk**.</span></span> <span data-ttu-id="44d29-151">IaaS VM に関する重要な考慮事項は、オペレーティング システム ディスクを変更するには VM を作成し直す必要があるということです。</span><span class="sxs-lookup"><span data-stu-id="44d29-151">An important consideration for IaaS VMs is that you cannot change the operating system disk without re-creating the VM.</span></span> <span data-ttu-id="44d29-152">これは、復旧計画が災害後に再デプロイすることになっている場合には問題ではありません。</span><span class="sxs-lookup"><span data-stu-id="44d29-152">This is not a problem if your recovery strategy is to redeploy after disaster.</span></span> <span data-ttu-id="44d29-153">ただし、容量を確保するためにウォーム スペア アプローチを使用する場合には問題となる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-153">However, it might be a problem if you are using the Warm Spare approach to reserve capacity.</span></span> <span data-ttu-id="44d29-154">これを適切に実行するには、プライマリの場所とセカンダリの場所の両方に正しいオペレーティング システム ディスクをデプロイし、アプリケーション データは別のドライブに保存する必要があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-154">To implement this properly, you must have the correct operating system disk deployed to both the primary and secondary locations, and the application data must be stored on a separate drive.</span></span> <span data-ttu-id="44d29-155">可能であれば、両方の場所に提供できる標準のオペレーティング システム構成を使用します。</span><span class="sxs-lookup"><span data-stu-id="44d29-155">If possible, use a standard operating system configuration that can be provided on both locations.</span></span> <span data-ttu-id="44d29-156">フェールオーバー後、データ ドライブをセカンダリ DC にある既存の IaaS VM にアタッチする必要があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-156">After a failover, you must then attach the data drive to your existing IaaS VMs in the secondary DC.</span></span> <span data-ttu-id="44d29-157">AzCopy を使用して、データ ディスクのスナップショットをリモート サイトにコピーします。</span><span class="sxs-lookup"><span data-stu-id="44d29-157">Use AzCopy to copy snapshots of the data disk(s) to a remote site.</span></span>

- <span data-ttu-id="44d29-158">**複数の VM ディスクの geo フェールオーバー後の潜在的な一貫性の問題に注意する**。</span><span class="sxs-lookup"><span data-stu-id="44d29-158">**Be aware of potential consistency issues after a geo-failover of multiple VM Disks**.</span></span> <span data-ttu-id="44d29-159">VM ディスクは、Azure Storage BLOB として実装され、同じ geo レプリケーションの特性を備えています。</span><span class="sxs-lookup"><span data-stu-id="44d29-159">VM Disks are implemented as Azure Storage blobs, and have the same geo-replication characteristic.</span></span> <span data-ttu-id="44d29-160">[Azure Backup](https://azure.microsoft.com/services/backup/) を使用しない場合、geo レプリケーションは非同期で個別にレプリケートするため、ディスク間の一貫性については保証されません。</span><span class="sxs-lookup"><span data-stu-id="44d29-160">Unless [Azure Backup](https://azure.microsoft.com/services/backup/) is used, there are no guarantees of consistency across disks, because geo-replication is asynchronous and replicates independently.</span></span> <span data-ttu-id="44d29-161">個々の VM ディスクは geo フェールオーバー後にクラッシュ整合性状態になることが保証されています。ただし、ディスク間の一貫性についての保証はありません。</span><span class="sxs-lookup"><span data-stu-id="44d29-161">Individual VM disks are guaranteed to be in a crash consistent state after a geo-failover, but not consistent across disks.</span></span> <span data-ttu-id="44d29-162">これは、場合によっては問題を引き起こす可能性があります (ディスク ストライピングの場合など)。</span><span class="sxs-lookup"><span data-stu-id="44d29-162">This could cause problems in some cases (for example, in the case of disk striping).</span></span>

## <a name="storage"></a><span data-ttu-id="44d29-163">Storage</span><span class="sxs-lookup"><span data-stu-id="44d29-163">Storage</span></span>

### <a name="recovery-by-using-geo-redundant-storage-of-blob-table-queue-and-vm-disk-storage"></a><span data-ttu-id="44d29-164">BLOB、テーブル、キュー、および VM ディスク ストレージの geo 冗長ストレージを使用した復旧</span><span class="sxs-lookup"><span data-stu-id="44d29-164">Recovery by using Geo-Redundant Storage of blob, table, queue and VM disk storage</span></span>

<span data-ttu-id="44d29-165">Azure の BLOB、テーブル、キュー、および VM ディスクはすべて、既定で geo レプリケーションに対応しています。</span><span class="sxs-lookup"><span data-stu-id="44d29-165">In Azure, blobs, tables, queues, and VM disks are all geo-replicated by default.</span></span> <span data-ttu-id="44d29-166">これは geo 冗長ストレージ (GRS) と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="44d29-166">This is referred to as Geo-Redundant Storage (GRS).</span></span> <span data-ttu-id="44d29-167">GRS は、ストレージ データを特定の地理的リージョン内の数百マイル離れた場所にあるペアのデータセンターにレプリケートします。</span><span class="sxs-lookup"><span data-stu-id="44d29-167">GRS replicates storage data to a paired datacenter hundreds of miles apart within a specific geographic region.</span></span> <span data-ttu-id="44d29-168">GRS を使用すると、データセンターで大きな災害が発生したときのデータの持続性が向上します。</span><span class="sxs-lookup"><span data-stu-id="44d29-168">GRS is designed to provide additional durability in case there is a major datacenter disaster.</span></span> <span data-ttu-id="44d29-169">フェールオーバーが発生するタイミングは Microsoft によって制御されており、元のプライマリの場所が一定の時間内に復旧不可能と見なされるような大きな災害が発生した場合にのみフェールオーバーが行われます。</span><span class="sxs-lookup"><span data-stu-id="44d29-169">Microsoft controls when failover occurs, and failover is limited to major disasters in which the original primary location is deemed unrecoverable in a reasonable amount of time.</span></span> <span data-ttu-id="44d29-170">シナリオによっては、これには数日かかる場合があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-170">Under some scenarios, this can be several days.</span></span> <span data-ttu-id="44d29-171">データは通常数分以内にレプリケートされますが、同期の間隔はまだサービス レベル アグリーメントによってカバーされていません。</span><span class="sxs-lookup"><span data-stu-id="44d29-171">Data is typically replicated within a few minutes, although synchronization interval is not yet covered by a service level agreement.</span></span>

<span data-ttu-id="44d29-172">geo フェールオーバーが行われた場合、アカウントへのアクセス方法に変更はありません (URL とアカウント キーは変わりません)。</span><span class="sxs-lookup"><span data-stu-id="44d29-172">In the event of a geo-failover, there will be no change to how the account is accessed (the URL and account key will not change).</span></span> <span data-ttu-id="44d29-173">ただし、ストレージ アカウントは、フェールオーバー後は別のリージョンに存在します。</span><span class="sxs-lookup"><span data-stu-id="44d29-173">The storage account will, however, be in a different region after failover.</span></span> <span data-ttu-id="44d29-174">このことは、ストレージ アカウントと同じリージョンに置かれる必要があるアプリケーションに影響を与える可能性があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-174">This could impact applications that require regional affinity with their storage account.</span></span> <span data-ttu-id="44d29-175">同じデータセンターにストレージ アカウントを必要としないサービスとアプリケーションについても、データセンター間の待機時間と帯域幅の料金の問題のために、トラフィックをフェールオーバー リージョンに一時的に移動させなければならないことがあります。</span><span class="sxs-lookup"><span data-stu-id="44d29-175">Even for services and applications that do not require a storage account in the same datacenter, the cross-datacenter latency and bandwidth charges might be compelling reasons to move traffic to the failover region temporarily.</span></span> <span data-ttu-id="44d29-176">これはディザスター リカバリー方法全体に組み入れることができます。</span><span class="sxs-lookup"><span data-stu-id="44d29-176">This could factor into an overall disaster recovery strategy.</span></span>

<span data-ttu-id="44d29-177">GRS によって提供される自動フェールオーバーに加えて、セカンダリ ストレージ場所にあるデータのコピーを読み取ることができるサービスが Azure には導入されています。</span><span class="sxs-lookup"><span data-stu-id="44d29-177">In addition to automatic failover provided by GRS, Azure has introduced a service that gives you read access to the copy of your data in the secondary storage location.</span></span> <span data-ttu-id="44d29-178">これは読み取りアクセス geo 冗長ストレージ (RA-GRS) と呼ばれています。</span><span class="sxs-lookup"><span data-stu-id="44d29-178">This is called Read-Access Geo-Redundant Storage (RA-GRS).</span></span>

<span data-ttu-id="44d29-179">GRS および RA-GRS ストレージの詳細については、「 [Azure Storage のレプリケーション](/azure/storage/storage-redundancy/)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="44d29-179">For more information about both GRS and RA-GRS storage, see [Azure Storage replication](/azure/storage/storage-redundancy/).</span></span>

### <a name="geo-replication-region-mappings"></a><span data-ttu-id="44d29-180">geo レプリケーションのリージョン マッピング</span><span class="sxs-lookup"><span data-stu-id="44d29-180">Geo-Replication region mappings</span></span>

<span data-ttu-id="44d29-181">ストレージと同じリージョンにある必要があるデータの他のインスタンスをデプロイする場所を知るために、データが geo レプリケーションされている場所を知ることが重要です。</span><span class="sxs-lookup"><span data-stu-id="44d29-181">It is important to know where your data is geo-replicated, in order to know where to deploy the other instances of your data that require regional affinity with your storage.</span></span> <span data-ttu-id="44d29-182">詳細については、「[Azure のペアになっているリージョン](/azure/best-practices-availability-paired-regions)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="44d29-182">For more information see [Azure Paired Regions](/azure/best-practices-availability-paired-regions).</span></span>

### <a name="geo-replication-pricing"></a><span data-ttu-id="44d29-183">geo レプリケーションの価格</span><span class="sxs-lookup"><span data-stu-id="44d29-183">Geo-Replication pricing</span></span>

<span data-ttu-id="44d29-184">geo レプリケーションは Azure Storage の現在の価格に含まれます。</span><span class="sxs-lookup"><span data-stu-id="44d29-184">Geo-replication is included in current pricing for Azure Storage.</span></span> <span data-ttu-id="44d29-185">これは geo 冗長ストレージ (GRS) と呼ばれます。</span><span class="sxs-lookup"><span data-stu-id="44d29-185">This is called Geo-Redundant Storage (GRS).</span></span> <span data-ttu-id="44d29-186">自分のデータに geo レプリケーションを行う必要がない場合は、自分のアカウントの geo レプリケーションを無効にできます。</span><span class="sxs-lookup"><span data-stu-id="44d29-186">If you do not want your data geo-replicated you can disable geo-replication for your account.</span></span> <span data-ttu-id="44d29-187">これにはローカル冗長ストレージと呼ばれ、GRS と比較すると割り引きされた料金で課金されます。</span><span class="sxs-lookup"><span data-stu-id="44d29-187">This is called Locally Redundant Storage, and it is charged at a discounted price compared to GRS.</span></span>

### <a name="determining-if-a-geo-failover-has-occurred"></a><span data-ttu-id="44d29-188">geo フェールオーバーが発生したかどうかの判断</span><span class="sxs-lookup"><span data-stu-id="44d29-188">Determining if a geo-failover has occurred</span></span>

<span data-ttu-id="44d29-189">geo フェールオーバーが発生した場合、これが [Azure サービス正常性ダッシュボード](https://azure.microsoft.com/status/)に報告されます。</span><span class="sxs-lookup"><span data-stu-id="44d29-189">If a geo-failover occurs, this will be posted to the [Azure Service Health Dashboard](https://azure.microsoft.com/status/).</span></span> <span data-ttu-id="44d29-190">ただし、アプリケーションは geo リージョンでストレージ アカウントを監視することによって、これを検出するための自動的な方法を実装できます。</span><span class="sxs-lookup"><span data-stu-id="44d29-190">Applications can implement an automated means of detecting this, however, by monitoring the geo-region for their storage account.</span></span> <span data-ttu-id="44d29-191">これは、ストレージが移動される geo リージョンのコンピューティング リソースのアクティブ化など、他の復旧操作をトリガーするために使用できます。</span><span class="sxs-lookup"><span data-stu-id="44d29-191">This can be used to trigger other recovery operations, such as activation of compute resources in the geo-region where their storage moved to.</span></span> <span data-ttu-id="44d29-192">[Get Storage Account Properties](https://msdn.microsoft.com/library/ee460802.aspx)を使用して、Service Management API からこれに対するクエリを実行できます。</span><span class="sxs-lookup"><span data-stu-id="44d29-192">You can perform a query for this from the service management API, by using [Get Storage Account Properties](https://msdn.microsoft.com/library/ee460802.aspx).</span></span> <span data-ttu-id="44d29-193">関連するプロパティは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="44d29-193">The relevant properties are:</span></span>

    <GeoPrimaryRegion>primary-region</GeoPrimaryRegion>
    <StatusOfPrimary>[Available|Unavailable]</StatusOfPrimary>
    <LastGeoFailoverTime>DateTime</LastGeoFailoverTime>
    <GeoSecondaryRegion>secondary-region</GeoSecondaryRegion>
    <StatusOfSecondary>[Available|Unavailable]</StatusOfSecondary>

### <a name="vm-disks-and-geo-failover"></a><span data-ttu-id="44d29-194">VM ディスクと geo フェールオーバー</span><span class="sxs-lookup"><span data-stu-id="44d29-194">VM disks and geo-failover</span></span>

<span data-ttu-id="44d29-195">VM ディスクのセクションで説明したように、フェールオーバー後は VM ディスク間でデータに一貫性の保証はありません。</span><span class="sxs-lookup"><span data-stu-id="44d29-195">As discussed in the section on VM disks, there are no guarantees for data consistency across VM disks after a failover.</span></span> <span data-ttu-id="44d29-196">バックアップを正しく行うために、Data Protection Manager などのバックアップ製品を使用してアプリケーション データのバックアップと復元を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-196">To ensure correctness of backups, a backup product such as Data Protection Manager should be used to back up and restore application data.</span></span>

## <a name="database"></a><span data-ttu-id="44d29-197">Database</span><span class="sxs-lookup"><span data-stu-id="44d29-197">Database</span></span>

### <a name="sql-database"></a><span data-ttu-id="44d29-198">SQL Database</span><span class="sxs-lookup"><span data-stu-id="44d29-198">SQL Database</span></span>

<span data-ttu-id="44d29-199">Azure SQL Database では、地理リストアおよびアクティブ geo レプリケーションという 2 種類の復旧機能が提供されます。</span><span class="sxs-lookup"><span data-stu-id="44d29-199">Azure SQL Database provides two types of recovery: Geo-Restore and Active Geo-Replication.</span></span>

#### <a name="geo-restore"></a><span data-ttu-id="44d29-200">地理リストア</span><span class="sxs-lookup"><span data-stu-id="44d29-200">Geo-Restore</span></span>

<span data-ttu-id="44d29-201">[geo リストア](/azure/sql-database/sql-database-recovery-using-backups/#geo-restore) も、Basic、Standard、および Premium のデータベースで利用できます。</span><span class="sxs-lookup"><span data-stu-id="44d29-201">[Geo-Restore](/azure/sql-database/sql-database-recovery-using-backups/#geo-restore) is also available with Basic, Standard, and Premium databases.</span></span> <span data-ttu-id="44d29-202">データベースがホストされているリージョンでのインシデントのためにデータベースが利用できない場合は、既定の復旧オプションを提供します。</span><span class="sxs-lookup"><span data-stu-id="44d29-202">It provides the default recovery option when the database is unavailable because of an incident in the region where your database is hosted.</span></span> <span data-ttu-id="44d29-203">ポイントインタイム リストアと同様に、geo リストアも geo 冗長 Azure Storage のデータベースのバックアップに依存します。</span><span class="sxs-lookup"><span data-stu-id="44d29-203">Similar to Point-In-Time Restore, Geo-Restore relies on database backups in geo-redundant Azure storage.</span></span> <span data-ttu-id="44d29-204">geo レプリケーション バックアップ コピーから復元するため、プライマリ リージョンにおけるストレージの障害に対する回復力があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-204">It restores from the geo-replicated backup copy, and therefore is resilient to the storage outages in the primary region.</span></span> <span data-ttu-id="44d29-205">詳細については、「 [Azure SQL Database を復元する、またはセカンダリにフェールオーバーする](/azure/sql-database/sql-database-disaster-recovery/)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="44d29-205">For more details, see [Restore an Azure SQL Database or failover to a secondary](/azure/sql-database/sql-database-disaster-recovery/).</span></span>

#### <a name="active-geo-replication"></a><span data-ttu-id="44d29-206">アクティブ geo レプリケーションを選択するとき</span><span class="sxs-lookup"><span data-stu-id="44d29-206">Active Geo-Replication</span></span>

<span data-ttu-id="44d29-207">[アクティブ geo レプリケーション](/azure/sql-database/sql-database-geo-replication-overview/) は、すべてのデータベース レベルで使用できます。</span><span class="sxs-lookup"><span data-stu-id="44d29-207">[Active Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/) is available for all database tiers.</span></span> <span data-ttu-id="44d29-208">アクティブ geo レプリケーションは、geo リストアよりもアグレッシブな復旧要件があるアプリケーション用に設計されています。</span><span class="sxs-lookup"><span data-stu-id="44d29-208">It’s designed for applications that have more aggressive recovery requirements than Geo-Restore can offer.</span></span> <span data-ttu-id="44d29-209">アクティブ geo レプリケーションを使用して、別のリージョン内のサーバーで最大 4 つの読み取り可能なセカンダリを作成できます。</span><span class="sxs-lookup"><span data-stu-id="44d29-209">Using Active Geo-Replication, you can create up to four readable secondaries on servers in different regions.</span></span> <span data-ttu-id="44d29-210">いずれかのセカンダリへのフェールオーバーを開始できます。</span><span class="sxs-lookup"><span data-stu-id="44d29-210">You can initiate failover to any of the secondaries.</span></span> <span data-ttu-id="44d29-211">さらに、アクティブ geo レプリケーションを使用すると、アプリケーションのアップグレードや再配置のシナリオをサポートするだけでなく読み取り専用ワークロードの負荷を分散することができます。</span><span class="sxs-lookup"><span data-stu-id="44d29-211">In addition, Active Geo-Replication can be used to support the application upgrade or relocation scenarios, as well as load balancing for read-only workloads.</span></span> <span data-ttu-id="44d29-212">詳細については、[geo レプリケーションの構成](/azure/sql-database/sql-database-geo-replication-portal/)に関するページと、[セカンダリ データベースへのフェールオーバー](/azure/sql-database/sql-database-geo-replication-failover-portal/)に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="44d29-212">For details, see [configure Geo-Replication](/azure/sql-database/sql-database-geo-replication-portal/) and to [fail over to the secondary database](/azure/sql-database/sql-database-geo-replication-failover-portal/).</span></span> <span data-ttu-id="44d29-213">アプリケーションを設計して実装する方法と、ダウンタイムなしのアプリケーション アップグレードの詳細については、「[SQL Database のアクティブ geo レプリケーションを使用したクラウド ディザスター リカバリー用アプリケーションの設計](/azure/sql-database/sql-database-designing-cloud-solutions-for-disaster-recovery/)」と「[SQL Database アクティブ geo レプリケーションを使用したクラウド アプリケーションのローリング アップグレードの管理](/azure/sql-database/sql-database-manage-application-rolling-upgrade/)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="44d29-213">Refer to [Design an application for cloud disaster recovery using Active Geo-Replication in SQL Database](/azure/sql-database/sql-database-designing-cloud-solutions-for-disaster-recovery/) and [Managing rolling upgrades of cloud applications using SQL Database Active Geo-Replication](/azure/sql-database/sql-database-manage-application-rolling-upgrade/) for details on how to design and implement applications and applications upgrade without downtime.</span></span>

### <a name="sql-server-on-virtual-machines"></a><span data-ttu-id="44d29-214">Virtual Machines 上の SQL Server</span><span class="sxs-lookup"><span data-stu-id="44d29-214">SQL Server on Virtual Machines</span></span>

<span data-ttu-id="44d29-215">SQL Server 2012 (以降) を Azure Virtual Machines で実行した場合、復旧および高可用性のためのさまざまなオプションを利用できます。</span><span class="sxs-lookup"><span data-stu-id="44d29-215">A variety of options are available for recovery and high availability for SQL Server 2012 (and later) running in Azure Virtual Machines.</span></span> <span data-ttu-id="44d29-216">詳細については、「[Azure 仮想マシンにおける SQL Server の高可用性とディザスター リカバリー](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="44d29-216">For more information, see [High availability and disaster recovery for SQL Server in Azure Virtual Machines](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span></span>

## <a name="other-azure-platform-services"></a><span data-ttu-id="44d29-217">その他の Azure プラットフォーム サービス</span><span class="sxs-lookup"><span data-stu-id="44d29-217">Other Azure platform services</span></span>

<span data-ttu-id="44d29-218">複数の Azure リージョンでクラウド サービスを実行しようとする場合、依存関係ごとに影響について検討する必要があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-218">When attempting to run your cloud service in multiple Azure regions, you must consider the implications for each of your dependencies.</span></span> <span data-ttu-id="44d29-219">以下のセクションにおいて、サービスに固有のガイダンスでは代替の Azure データセンターにおいては同じ Azure サービスを使用する必要があると想定されています。</span><span class="sxs-lookup"><span data-stu-id="44d29-219">In the following sections, the service-specific guidance assumes that you must use the same Azure service in an alternate Azure datacenter.</span></span> <span data-ttu-id="44d29-220">これには、構成タスクとデータ レプリケーション タスクの両方があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-220">This involves both configuration and data-replication tasks.</span></span>

> [!NOTE]
> <span data-ttu-id="44d29-221">場合によっては、これらの手順はデータセンター イベント全体ではなく、サービス固有の障害を軽減するために役立つ可能性があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-221">In some cases, these steps can help to mitigate a service-specific outage rather than an entire datacenter event.</span></span> <span data-ttu-id="44d29-222">アプリケーションの観点からは、サービス固有の障害は単に制限的なもので、サービスを代替の Azure リージョンへ一時的に移行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-222">From the application perspective, a service-specific outage might be just as limiting and would require temporarily migrating the service to an alternate Azure region.</span></span>

### <a name="service-bus"></a><span data-ttu-id="44d29-223">Service Bus</span><span class="sxs-lookup"><span data-stu-id="44d29-223">Service Bus</span></span>

<span data-ttu-id="44d29-224">Azure Service Bus は、Azure リージョンにまたがらない一意の名前空間名を使用します。</span><span class="sxs-lookup"><span data-stu-id="44d29-224">Azure Service Bus uses a unique namespace that does not span Azure regions.</span></span> <span data-ttu-id="44d29-225">したがって、最初の要件は代替リージョンで必要なサービス バス名前空間を設定することです。</span><span class="sxs-lookup"><span data-stu-id="44d29-225">So the first requirement is to setup the necessary service bus namespaces in the alternate region.</span></span> <span data-ttu-id="44d29-226">ただし、キューに置かれたメッセージの持続性についても考慮事項があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-226">However, there are also considerations for the durability of the queued messages.</span></span> <span data-ttu-id="44d29-227">Azure リージョン間でメッセージをレプリケートするにはいくつかの方法があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-227">There are several strategies for replicating messages across Azure regions.</span></span> <span data-ttu-id="44d29-228">これらのレプリケーション方法とその他のディザスター リカバリー計画の詳細については、「[Service Bus の障害および災害に対するアプリケーションの保護のベスト プラクティス](/azure/service-bus-messaging/service-bus-outages-disasters/)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="44d29-228">For the details on these replication strategies and other disaster recovery strategies, see [Best practices for insulating applications against Service Bus outages and disasters](/azure/service-bus-messaging/service-bus-outages-disasters/).</span></span> <span data-ttu-id="44d29-229">その他の可用性の考慮事項については、 [Service Bus (可用性)](recovery-local-failures.md#other-azure-platform-services)に関するページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="44d29-229">For other availability considerations, see [Service Bus (Availability)](recovery-local-failures.md#other-azure-platform-services).</span></span>

### <a name="app-service"></a><span data-ttu-id="44d29-230">App Service</span><span class="sxs-lookup"><span data-stu-id="44d29-230">App Service</span></span>

<span data-ttu-id="44d29-231">Azure App Service アプリケーション (Web Apps や Mobile Apps など) をセカンダリ Azure リージョンに移行するには、発行に使用できる Web サイトのバックアップが必要です。</span><span class="sxs-lookup"><span data-stu-id="44d29-231">To migrate an Azure App Service application, such as Web Apps or Mobile Apps, to a secondary Azure region, you must have a backup of the website available for publishing.</span></span> <span data-ttu-id="44d29-232">障害が Azure データセンター全体を含んでいなければ、FTP を使用してサイト コンテンツの最新のバックアップをダウンロードできる場合があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-232">If the outage does not involve the entire Azure datacenter, it might be possible to use FTP to download a recent backup of the site content.</span></span> <span data-ttu-id="44d29-233">次に、容量を確保するために代替リージョンにまだ新しいアプリを作成していない場合は、それを作成します。</span><span class="sxs-lookup"><span data-stu-id="44d29-233">Then create a new app in the alternate region, unless you have previously done this to reserve capacity.</span></span> <span data-ttu-id="44d29-234">サイトを新しいリージョンに発行し、必要な構成の変更を行います。</span><span class="sxs-lookup"><span data-stu-id="44d29-234">Publish the site to the new region, and make any necessary configuration changes.</span></span> <span data-ttu-id="44d29-235">これらの変更には、データベース接続文字列またはその他のリージョン固有の設定が含まれる場合があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-235">These changes could include database connection strings or other region-specific settings.</span></span> <span data-ttu-id="44d29-236">必要に応じて、サイトの SSL 証明書を追加し、DNS の CNAME レコードを変更して、カスタム ドメイン名が再デプロイされた Azure の Web サイトの URL を参照するようにします。</span><span class="sxs-lookup"><span data-stu-id="44d29-236">If necessary, add the site’s SSL certificate and change the DNS CNAME record so that the custom domain name points to the redeployed Azure Web App URL.</span></span>

### <a name="hdinsight"></a><span data-ttu-id="44d29-237">HDInsight</span><span class="sxs-lookup"><span data-stu-id="44d29-237">HDInsight</span></span>

<span data-ttu-id="44d29-238">HDInsight に関連付けられているデータは、既定では Azure BLOB ストレージに保存されます。</span><span class="sxs-lookup"><span data-stu-id="44d29-238">The data associated with HDInsight is stored by default in Azure Blob Storage.</span></span> <span data-ttu-id="44d29-239">HDInsight では、MapReduce ジョブを処理する Hadoop クラスターは、分析されるデータを保持したストレージ アカウントと同じリージョンに併置する必要があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-239">HDInsight requires that a Hadoop cluster processing MapReduce jobs must be co-located in the same region as the storage account that contains the data being analyzed.</span></span> <span data-ttu-id="44d29-240">Azure Storage で利用可能な geo レプリケーション機能を使用すると、何らかの理由によりプライマリ リージョンが使用できなくなった場合、データがレプリケートされたセカンダリ リージョンのデータにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="44d29-240">Provided you use the geo-replication feature available to Azure Storage, you can access your data in the secondary region where the data was replicated if for some reason the primary region is no longer available.</span></span> <span data-ttu-id="44d29-241">データがレプリケートされているリージョンに新しい Hadoop クラスターを作成し、データの処理を継続することができます。</span><span class="sxs-lookup"><span data-stu-id="44d29-241">You can create a new Hadoop cluster in the region where the data has been replicated and continue processing it.</span></span> <span data-ttu-id="44d29-242">その他の可用性の考慮事項については、 [HDInsight (可用性)](recovery-local-failures.md#other-azure-platform-services)に関するページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="44d29-242">For other availability considerations, see [HDInsight (Availability)](recovery-local-failures.md#other-azure-platform-services).</span></span>

### <a name="sql-reporting"></a><span data-ttu-id="44d29-243">SQL Reporting</span><span class="sxs-lookup"><span data-stu-id="44d29-243">SQL Reporting</span></span>

<span data-ttu-id="44d29-244">現時点では、Azure リージョンの損失からの復旧には、異なる Azure リージョンにそれぞれ複数の SQL Reporting インスタンスが必要です。</span><span class="sxs-lookup"><span data-stu-id="44d29-244">At this time, recovering from the loss of an Azure region requires multiple SQL Reporting instances in different Azure regions.</span></span> <span data-ttu-id="44d29-245">これらの SQL Reporting インスタンスは、同じデータにアクセスする必要があり、そのデータには災害が発生した場合の独自の復旧計画が必要です。</span><span class="sxs-lookup"><span data-stu-id="44d29-245">These SQL Reporting instances should access the same data, and that data should have its own recovery plan in the event of a disaster.</span></span> <span data-ttu-id="44d29-246">また、各レポートに RDL ファイルの外部バックアップ コピーを保持できます。</span><span class="sxs-lookup"><span data-stu-id="44d29-246">You can also maintain external backup copies of the RDL file for each report.</span></span>

### <a name="media-services"></a><span data-ttu-id="44d29-247">Media Services</span><span class="sxs-lookup"><span data-stu-id="44d29-247">Media Services</span></span>

<span data-ttu-id="44d29-248">Azure Media Services には、エンコードとストリーミングのために異なる復旧方法があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-248">Azure Media Services has a different recovery approach for encoding and streaming.</span></span> <span data-ttu-id="44d29-249">通常、ストリーミングは地域的な障害が発生している場合にはより重要になります。</span><span class="sxs-lookup"><span data-stu-id="44d29-249">Typically, streaming is more critical during a regional outage.</span></span> <span data-ttu-id="44d29-250">これに備えて、2 つの異なる Azure リージョンに Media Services アカウントを用意する必要があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-250">To prepare for this, you should have a Media Services account in two different Azure regions.</span></span> <span data-ttu-id="44d29-251">エンコードされた内容は、両方のリージョンに配置される必要があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-251">The encoded content should be located in both regions.</span></span> <span data-ttu-id="44d29-252">障害時には、ストリーミング トラフィックを代替リージョンにリダイレクトできます。</span><span class="sxs-lookup"><span data-stu-id="44d29-252">During a failure, you can redirect the streaming traffic to the alternate region.</span></span> <span data-ttu-id="44d29-253">エンコードは任意の Azure リージョンで実行できます。</span><span class="sxs-lookup"><span data-stu-id="44d29-253">Encoding can be performed in any Azure region.</span></span> <span data-ttu-id="44d29-254">ライブ イベントの処理中など、エンコードが時間の影響を受ける場合、ジョブを障害中に代替のデータセンターへ送信する準備をしておく必要があります。</span><span class="sxs-lookup"><span data-stu-id="44d29-254">If encoding is time-sensitive, for example during live event processing, you must be prepared to submit jobs to an alternate datacenter during failures.</span></span>

### <a name="virtual-network"></a><span data-ttu-id="44d29-255">仮想ネットワーク</span><span class="sxs-lookup"><span data-stu-id="44d29-255">Virtual network</span></span>

<span data-ttu-id="44d29-256">構成ファイルを使用すると、代替の Azure リージョンで仮想ネットワークを最もすばやくセットアップできます。</span><span class="sxs-lookup"><span data-stu-id="44d29-256">Configuration files provide the quickest way to set up a virtual network in an alternate Azure region.</span></span> <span data-ttu-id="44d29-257">プライマリ Azure リージョンで仮想ネットワークを構成した後、ネットワーク構成ファイルに現在のネットワークの [仮想ネットワーク設定をエクスポート](/azure/virtual-network/virtual-networks-create-vnet-classic-portal/) します。</span><span class="sxs-lookup"><span data-stu-id="44d29-257">After configuring the virtual network in the primary Azure region, [export the virtual network settings](/azure/virtual-network/virtual-networks-create-vnet-classic-portal/) for the current network to a network configuration file.</span></span> <span data-ttu-id="44d29-258">プライマリ リージョンで障害が発生した場合は、保存された構成ファイルから [仮想ネットワーク構成ファイルを復元](/azure/virtual-network/virtual-networks-create-vnet-classic-portal/) します。</span><span class="sxs-lookup"><span data-stu-id="44d29-258">In the event of an outage in the primary region, [restore the virtual network](/azure/virtual-network/virtual-networks-create-vnet-classic-portal/) from the stored configuration file.</span></span> <span data-ttu-id="44d29-259">次に、その他のクラウド サービス、仮想マシン、またはクロスプレミス設定を構成して、新しい仮想ネットワークで作業します。</span><span class="sxs-lookup"><span data-stu-id="44d29-259">Then configure other cloud services, virtual machines, or cross-premises settings to work with the new virtual network.</span></span>

## <a name="checklists-for-disaster-recovery"></a><span data-ttu-id="44d29-260">障害復旧のためのチェックリスト</span><span class="sxs-lookup"><span data-stu-id="44d29-260">Checklists for disaster recovery</span></span>

## <a name="cloud-services-checklist"></a><span data-ttu-id="44d29-261">Cloud Services のチェックリスト</span><span class="sxs-lookup"><span data-stu-id="44d29-261">Cloud Services checklist</span></span>

1. <span data-ttu-id="44d29-262">このドキュメントの「Cloud Services」セクションを確認する。</span><span class="sxs-lookup"><span data-stu-id="44d29-262">Review the Cloud Services section of this document.</span></span>
2. <span data-ttu-id="44d29-263">複数のリージョンにわたるディザスター リカバリー方法を作成する。</span><span class="sxs-lookup"><span data-stu-id="44d29-263">Create a cross-region disaster recovery strategy.</span></span>
3. <span data-ttu-id="44d29-264">代替リージョンにおける容量の確保においてのトレードオフを理解する。</span><span class="sxs-lookup"><span data-stu-id="44d29-264">Understand trade-offs in reserving capacity in alternate regions.</span></span>
4. <span data-ttu-id="44d29-265">Azure Traffic Manager などのトラフィック ルーティング ツールを使用する。</span><span class="sxs-lookup"><span data-stu-id="44d29-265">Use traffic routing tools, such as Azure Traffic Manager.</span></span>

## <a name="virtual-machines-checklist"></a><span data-ttu-id="44d29-266">Virtual Machines のチェックリスト</span><span class="sxs-lookup"><span data-stu-id="44d29-266">Virtual Machines checklist</span></span>

1. <span data-ttu-id="44d29-267">このドキュメントの「Virtual Machines」セクションを確認する。</span><span class="sxs-lookup"><span data-stu-id="44d29-267">Review the Virtual Machines section of this document.</span></span>
2. <span data-ttu-id="44d29-268">[Azure Backup](https://azure.microsoft.com/services/backup/) を使用して、リージョン間でアプリケーション整合性のあるバックアップを作成する。</span><span class="sxs-lookup"><span data-stu-id="44d29-268">Use [Azure Backup](https://azure.microsoft.com/services/backup/) to create application consistent backups across regions.</span></span>

## <a name="storage-checklist"></a><span data-ttu-id="44d29-269">Storage のチェックリスト</span><span class="sxs-lookup"><span data-stu-id="44d29-269">Storage checklist</span></span>

1. <span data-ttu-id="44d29-270">このドキュメントの「Storage」セクションを確認する。</span><span class="sxs-lookup"><span data-stu-id="44d29-270">Review the Storage section of this document.</span></span>
2. <span data-ttu-id="44d29-271">ストレージ リソースの geo レプリケーションを無効にしない。</span><span class="sxs-lookup"><span data-stu-id="44d29-271">Do not disable geo-replication of storage resources.</span></span>
3. <span data-ttu-id="44d29-272">フェールオーバーが発生した場合の geo レプリケーションの代替リージョンを理解する。</span><span class="sxs-lookup"><span data-stu-id="44d29-272">Understand alternate region for geo-replication in the event of failover.</span></span>
4. <span data-ttu-id="44d29-273">ユーザー制御のフェールオーバー方法に有効なカスタム バックアップ方法を作成する。</span><span class="sxs-lookup"><span data-stu-id="44d29-273">Create custom backup strategies for user-controlled failover strategies.</span></span>

## <a name="sql-database-checklist"></a><span data-ttu-id="44d29-274">SQL Database のチェックリスト</span><span class="sxs-lookup"><span data-stu-id="44d29-274">SQL Database checklist</span></span>

1. <span data-ttu-id="44d29-275">このドキュメントの「SQL Database」セクションを確認する。</span><span class="sxs-lookup"><span data-stu-id="44d29-275">Review the SQL Database section of this document.</span></span>
2. <span data-ttu-id="44d29-276">必要に応じて [geo リストア](/azure/sql-database/sql-database-recovery-using-backups/#geo-restore)または [geo レプリケーション](/azure/sql-database/sql-database-geo-replication-overview/)を使用する。</span><span class="sxs-lookup"><span data-stu-id="44d29-276">Use [Geo-Restore](/azure/sql-database/sql-database-recovery-using-backups/#geo-restore) or [Geo-Replication](/azure/sql-database/sql-database-geo-replication-overview/) as appropriate.</span></span>

## <a name="sql-server-on-virtual-machines-checklist"></a><span data-ttu-id="44d29-277">Virtual Machines での SQL Server のチェックリスト</span><span class="sxs-lookup"><span data-stu-id="44d29-277">SQL Server on Virtual Machines checklist</span></span>

1. <span data-ttu-id="44d29-278">このドキュメントの「Virtual Machines 上の SQL Server」セクションを確認する。</span><span class="sxs-lookup"><span data-stu-id="44d29-278">Review the SQL Server on Virtual Machines section of this document.</span></span>
2. <span data-ttu-id="44d29-279">複数のリージョンにわたる AlwaysOn 可用性グループまたはデータベース ミラーリングを使用する。</span><span class="sxs-lookup"><span data-stu-id="44d29-279">Use cross-region AlwaysOn Availability Groups or database mirroring.</span></span>
3. <span data-ttu-id="44d29-280">または、バックアップを使用して、Blob Storage に復元します。</span><span class="sxs-lookup"><span data-stu-id="44d29-280">Alternately use backup and restore to blob storage.</span></span>

## <a name="service-bus-checklist"></a><span data-ttu-id="44d29-281">Service Bus のチェックリスト</span><span class="sxs-lookup"><span data-stu-id="44d29-281">Service Bus checklist</span></span>

1. <span data-ttu-id="44d29-282">このドキュメントの「Service Bus」セクションを確認する。</span><span class="sxs-lookup"><span data-stu-id="44d29-282">Review the Service Bus section of this document.</span></span>
2. <span data-ttu-id="44d29-283">代替リージョンで Service Bus 名前空間を構成する。</span><span class="sxs-lookup"><span data-stu-id="44d29-283">Configure a Service Bus namespace in an alternate region.</span></span>
3. <span data-ttu-id="44d29-284">リージョン間でのメッセージのカスタム レプリケーション方法を検討する。</span><span class="sxs-lookup"><span data-stu-id="44d29-284">Consider custom replication strategies for messages across regions.</span></span>

## <a name="app-service-checklist"></a><span data-ttu-id="44d29-285">App Service のチェックリスト</span><span class="sxs-lookup"><span data-stu-id="44d29-285">App Service checklist</span></span>

1. <span data-ttu-id="44d29-286">このドキュメントの「App Service」セクションを確認する。</span><span class="sxs-lookup"><span data-stu-id="44d29-286">Review the App Service section of this document.</span></span>
2. <span data-ttu-id="44d29-287">プライマリ リージョンの外でサイトのバックアップを維持する。</span><span class="sxs-lookup"><span data-stu-id="44d29-287">Maintain site backups outside of the primary region.</span></span>
3. <span data-ttu-id="44d29-288">障害が部分的な場合は、FTP を使用して現在のサイトの取得を試みる。</span><span class="sxs-lookup"><span data-stu-id="44d29-288">If outage is partial, attempt to retrieve current site with FTP.</span></span>
4. <span data-ttu-id="44d29-289">代替リージョンの新規または既存のサイトにサイトをデプロイする計画を作成する。</span><span class="sxs-lookup"><span data-stu-id="44d29-289">Plan to deploy the site to new or existing site in an alternate region.</span></span>
5. <span data-ttu-id="44d29-290">アプリケーションと DNS の CNAME レコードの両方の構成変更を計画する。</span><span class="sxs-lookup"><span data-stu-id="44d29-290">Plan configuration changes for both application and DNS CNAME records.</span></span>

## <a name="hdinsight-checklist"></a><span data-ttu-id="44d29-291">HDInsight のチェックリスト</span><span class="sxs-lookup"><span data-stu-id="44d29-291">HDInsight checklist</span></span>

1. <span data-ttu-id="44d29-292">このドキュメントの「HDInsight」セクションを確認する。</span><span class="sxs-lookup"><span data-stu-id="44d29-292">Review the HDInsight section of this document.</span></span>
2. <span data-ttu-id="44d29-293">レプリケートされたデータを使用して、リージョンに新しい Hadoop クラスターを作成する。</span><span class="sxs-lookup"><span data-stu-id="44d29-293">Create a new Hadoop cluster in the region with replicated data.</span></span>

## <a name="sql-reporting-checklist"></a><span data-ttu-id="44d29-294">SQL Reporting のチェックリスト</span><span class="sxs-lookup"><span data-stu-id="44d29-294">SQL Reporting checklist</span></span>

1. <span data-ttu-id="44d29-295">このドキュメントの「SQL Reporting」セクションを確認する。</span><span class="sxs-lookup"><span data-stu-id="44d29-295">Review the SQL Reporting section of this document.</span></span>
2. <span data-ttu-id="44d29-296">SQL Reporting の代替インスタンスを別のリージョンで保持する。</span><span class="sxs-lookup"><span data-stu-id="44d29-296">Maintain an alternate SQL Reporting instance in a different region.</span></span>
3. <span data-ttu-id="44d29-297">そのリージョンに対象をレプリケートする別の計画を維持する。</span><span class="sxs-lookup"><span data-stu-id="44d29-297">Maintain a separate plan to replicate the target to that region.</span></span>

## <a name="media-services-checklist"></a><span data-ttu-id="44d29-298">Media Services のチェックリスト</span><span class="sxs-lookup"><span data-stu-id="44d29-298">Media Services checklist</span></span>

1. <span data-ttu-id="44d29-299">このドキュメントの「Media Services」セクションを確認する。</span><span class="sxs-lookup"><span data-stu-id="44d29-299">Review the Media Services section of this document.</span></span>
2. <span data-ttu-id="44d29-300">代替リージョンで Media Services アカウントを作成する。</span><span class="sxs-lookup"><span data-stu-id="44d29-300">Create a Media Services account in an alternate region.</span></span>
3. <span data-ttu-id="44d29-301">両方のリージョンで同じ内容をエンコードして、ストリーム フェールオーバーをサポートする。</span><span class="sxs-lookup"><span data-stu-id="44d29-301">Encode the same content in both regions to support streaming failover.</span></span>
4. <span data-ttu-id="44d29-302">サービスの中断が発生した場合は、エンコード ジョブを代替リージョンに送信する。</span><span class="sxs-lookup"><span data-stu-id="44d29-302">Submit encoding jobs to an alternate region in the event of a service disruption.</span></span>

## <a name="virtual-network-checklist"></a><span data-ttu-id="44d29-303">Virtual Network のチェックリスト</span><span class="sxs-lookup"><span data-stu-id="44d29-303">Virtual Network checklist</span></span>

1. <span data-ttu-id="44d29-304">このドキュメントの「Virtual Network」セクションを確認する。</span><span class="sxs-lookup"><span data-stu-id="44d29-304">Review the Virtual Network section of this document.</span></span>
2. <span data-ttu-id="44d29-305">エクスポートされた仮想ネットワーク設定を使用して、別のリージョンでテーブルを再作成する。</span><span class="sxs-lookup"><span data-stu-id="44d29-305">Use exported virtual network settings to re-create it in another region.</span></span>
