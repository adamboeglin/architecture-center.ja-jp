---
title: CAF:Azure での複数チーム向けのガバナンス設計
titleSuffix: Microsoft Cloud Adoption Framework for Azure
ms.service: architecture-center
ms.subservice: enterprise-cloud-adoption
ms.custom: governance
description: 複数のチーム、複数のワークロード、および複数の環境を対象とした Azure ガバナンス管理を構成するためのガイダンス
author: petertaylor9999
ms.date: 02/11/2019
ms.openlocfilehash: a235c73ebef0fe1b6067ed25f1948446486c3ca8
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/20/2019
ms.locfileid: "58247333"
---
# <a name="governance-design-for-multiple-teams"></a><span data-ttu-id="607c3-103">複数チーム向けのガバナンス設計</span><span class="sxs-lookup"><span data-stu-id="607c3-103">Governance design for multiple teams</span></span>

<span data-ttu-id="607c3-104">このガイドの目的は、複数チーム、複数ワークロード、および複数環境をサポートする、Azure におけるリソース ガバナンス モデルの設計プロセスについて説明することです。</span><span class="sxs-lookup"><span data-stu-id="607c3-104">The goal of this guidance is to help you learn the process for designing a resource governance model in Azure to support multiple teams, multiple workloads, and multiple environments.</span></span> <span data-ttu-id="607c3-105">まず、一連のガバナンス要件を例として挙げて、これらの要件に対応する実装サンプルをいくつか紹介します。</span><span class="sxs-lookup"><span data-stu-id="607c3-105">First you'll look at a set of hypothetical governance requirements, then go through several example implementations that satisfy those requirements.</span></span>

<span data-ttu-id="607c3-106">要件は次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="607c3-106">The requirements are:</span></span>

- <span data-ttu-id="607c3-107">新しいクラウドのロールと責任を一連のユーザーに移行しようとしている企業が、Azure でさまざまなリソース アクセス ニーズを持つ複数チームを対象とした ID 管理を必要としています。</span><span class="sxs-lookup"><span data-stu-id="607c3-107">The enterprise plans to transition new cloud roles and responsibilities to a set of users and therefore requires identity management for multiple teams with different resource access needs in Azure.</span></span> <span data-ttu-id="607c3-108">この ID 管理システムには、次のユーザーの ID を格納する必要があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-108">This identity management system is required to store the identity of the following users:</span></span>
  1. <span data-ttu-id="607c3-109">**サブスクリプション**の所有を担当する、ご自身の組織内の個人。</span><span class="sxs-lookup"><span data-stu-id="607c3-109">The individual in your organization responsible for ownership of **subscriptions**.</span></span>
  2. <span data-ttu-id="607c3-110">ご自身のオンプレミス ネットワークを Azure 仮想ネットワークに接続するときに使用される**共有インフラストラクチャ リソース**を担当する、ご自身の組織内の個人。</span><span class="sxs-lookup"><span data-stu-id="607c3-110">The individual in your organization responsible for the **shared infrastructure resources** used to connect your on-premises network to an Azure virtual network.</span></span>
  3. <span data-ttu-id="607c3-111">**ワークロード**の管理を担当する、ご自身の組織内の個人 (2 人)。</span><span class="sxs-lookup"><span data-stu-id="607c3-111">Two individuals in your organization responsible for managing a **workload**.</span></span>
- <span data-ttu-id="607c3-112">複数の**環境**のサポート。</span><span class="sxs-lookup"><span data-stu-id="607c3-112">Support for multiple **environments**.</span></span> <span data-ttu-id="607c3-113">環境とは、仮想マシン、仮想ネットワーク、ネットワーク トラフィックのルーティング サービスなど、リソースの論理的グループのことです。</span><span class="sxs-lookup"><span data-stu-id="607c3-113">An environment is a logical grouping of resources, such as virtual machines, virtual networking, and network traffic routing services.</span></span> <span data-ttu-id="607c3-114">これらのリソース グループは、管理およびセキュリティ要件が類似しており、通常は、テストや運用などの特定の目的で使用されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-114">These groups of resources have similar management and security requirements and are typically used for a specific purpose such as testing or production.</span></span> <span data-ttu-id="607c3-115">この例では、要件は次の 3 つの環境に対応しています。</span><span class="sxs-lookup"><span data-stu-id="607c3-115">In this example, the requirement is for three environments:</span></span>
  1. <span data-ttu-id="607c3-116">**共有インフラストラクチャ環境**: 他の環境のワークロードによって共有されるリソースが含まれます。</span><span class="sxs-lookup"><span data-stu-id="607c3-116">A **shared infrastructure environment** that includes resources shared by workloads in other environments.</span></span> <span data-ttu-id="607c3-117">オンプレミスへの接続性を提供するゲートウェイ サブネットを含む仮想ネットワークなど。</span><span class="sxs-lookup"><span data-stu-id="607c3-117">For example, a virtual network with a gateway subnet that provides connectivity to on-premises.</span></span>
  2. <span data-ttu-id="607c3-118">**運用環境**: 最も制限の厳しいセキュリティ ポリシーが適用されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-118">A **production environment** with the most restrictive security policies.</span></span> <span data-ttu-id="607c3-119">内部または外部に接続されるワークロードを含めることができます。</span><span class="sxs-lookup"><span data-stu-id="607c3-119">May include internal or external facing workloads.</span></span>
  3. <span data-ttu-id="607c3-120">**開発環境**: 概念実証とテストを行うための環境です。</span><span class="sxs-lookup"><span data-stu-id="607c3-120">A **development environment** for proof-of-concept and testing work.</span></span> <span data-ttu-id="607c3-121">この環境のセキュリティ、コンプライアンス、およびコストの各ポリシーは、運用環境のものとは異なります。</span><span class="sxs-lookup"><span data-stu-id="607c3-121">This environment has security, compliance, and cost policies that differ from those in the production environment.</span></span>
- <span data-ttu-id="607c3-122">**最小限の特権のアクセス許可モデル**。既定では、アクセス許可がユーザーに付与されていません。</span><span class="sxs-lookup"><span data-stu-id="607c3-122">A **permissions model of least privilege** in which users have no permissions by default.</span></span> <span data-ttu-id="607c3-123">このモデルは以下をサポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-123">The model must support the following:</span></span>
  - <span data-ttu-id="607c3-124">リソース アクセス権を割り当てるアクセス許可を持つ、サブスクリプション スコープの 1 人の信頼されたユーザー。</span><span class="sxs-lookup"><span data-stu-id="607c3-124">A single trusted user at the subscription scope with permission to assign resource access rights.</span></span>
  - <span data-ttu-id="607c3-125">リソースへの各ワークロード所有者によるアクセスが既定で拒否されている。</span><span class="sxs-lookup"><span data-stu-id="607c3-125">Each workload owner is denied access to resources by default.</span></span> <span data-ttu-id="607c3-126">リソース アクセス権は、サブスクリプション スコープの 1 人の信頼されたユーザーによって明示的に付与されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-126">Resource access rights are granted explicitly by the single trusted user at the subscription scope.</span></span>
  - <span data-ttu-id="607c3-127">共有インフラストラクチャ リソースへの管理アクセスが、インフラストラクチャ所有者に制限されている。</span><span class="sxs-lookup"><span data-stu-id="607c3-127">Management access for the shared infrastructure resources limited to the shared infrastructure owner.</span></span>
  - <span data-ttu-id="607c3-128">各ワークロードへの管理アクセスが、ワークロード所有者に制限されている。</span><span class="sxs-lookup"><span data-stu-id="607c3-128">Management access for each workload restricted to the workload owner.</span></span>
  - <span data-ttu-id="607c3-129">この企業は 3 つの環境それぞれで個別にロールを管理しなければならな状況を望んでいないため、[組み込み RBAC ロール][rbac-built-in-roles]のみを使用する必要がある。</span><span class="sxs-lookup"><span data-stu-id="607c3-129">The enterprise does not want to have to manage roles independently in each of the three environments, therefore requires the use of [built-in RBAC roles][rbac-built-in-roles] only.</span></span> <span data-ttu-id="607c3-130">仮にこの企業がカスタム RBAC ロールを使うとすると、3 つの環境でカスタム ロールを同期させるために、追加のプロセスが必要になる。</span><span class="sxs-lookup"><span data-stu-id="607c3-130">If the enterprise were to use custom RBAC roles, an additional process is required to synchronize custom roles across the three environments.</span></span>
- <span data-ttu-id="607c3-131">ワークロード所有者名、環境、またはその両方でコストを追跡。</span><span class="sxs-lookup"><span data-stu-id="607c3-131">Cost tracking by workload owner name, environment, or both.</span></span>

## <a name="identity-management"></a><span data-ttu-id="607c3-132">ID 管理</span><span class="sxs-lookup"><span data-stu-id="607c3-132">Identity management</span></span>

<span data-ttu-id="607c3-133">ご自身のガバナンス モデルの ID 管理を設計する前に、次の 4 つの主な領域について理解しておくことが重要です。</span><span class="sxs-lookup"><span data-stu-id="607c3-133">Before you can design identity management for your governance model, it's important to understand the four major areas it encompasses:</span></span>

- <span data-ttu-id="607c3-134">管理: ユーザー ID を作成、編集、および削除するためのプロセスとツール。</span><span class="sxs-lookup"><span data-stu-id="607c3-134">Administration: the processes and tools for creating, editing, and deleting user identity.</span></span>
- <span data-ttu-id="607c3-135">認証: ユーザー名、パスワードなどの資格情報を検証することにより、ユーザー ID を確認すること。</span><span class="sxs-lookup"><span data-stu-id="607c3-135">Authentication: verifying user identity by validating credentials, such as a user name and password.</span></span>
- <span data-ttu-id="607c3-136">承認: 認証されたユーザーがアクセスできるリソースや、そのユーザーが実行できる操作を決定すること。</span><span class="sxs-lookup"><span data-stu-id="607c3-136">Authorization: determining which resources an authenticated user is allowed to access or what operations they have permission to perform.</span></span>
- <span data-ttu-id="607c3-137">監査: ログまたはその他の情報を定期的に確認して、ユーザー ID に関連するセキュリティの問題を検出すること。</span><span class="sxs-lookup"><span data-stu-id="607c3-137">Auditing: periodically reviewing logs and other information to discover security issues related to user identity.</span></span> <span data-ttu-id="607c3-138">これには、不審な使用パターンがないかどうかを確認する、ユーザーのアクセス許可が正しいかどうかを定期的に確認する、などが含まれます。</span><span class="sxs-lookup"><span data-stu-id="607c3-138">This includes reviewing suspicious usage patterns, periodically reviewing user permissions to verify they are accurate, and other functions.</span></span>

<span data-ttu-id="607c3-139">ID に関して Azure が信頼するサービスは Azure Active Directory (Azure AD) の 1 つだけです。</span><span class="sxs-lookup"><span data-stu-id="607c3-139">There is only one service trusted by Azure for identity, and that is Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="607c3-140">ここではユーザーを Azure AD に追加し、前に示したすべての領域に対して使用しますが、</span><span class="sxs-lookup"><span data-stu-id="607c3-140">You'll be adding users to Azure AD and using it for all of the functions listed above.</span></span> <span data-ttu-id="607c3-141">Azure AD の構成方法を見る前に、これらのサービスへのアクセスの管理に使用される特権アカウントについて理解しておくことが重要です。</span><span class="sxs-lookup"><span data-stu-id="607c3-141">But before looking at how to configure Azure AD, it's important to understand the privileged accounts that are used to manage access to these services.</span></span>

<span data-ttu-id="607c3-142">ご自身の組織が Azure アカウントにサインアップしたときに、少なくとも 1 つの Azure **アカウント所有者**が割り当てられています。</span><span class="sxs-lookup"><span data-stu-id="607c3-142">When your organization signed up for an Azure account, at least one Azure **account owner** was assigned.</span></span> <span data-ttu-id="607c3-143">また、既存のテナントが、ご自身の組織で使用している他の Microsoft サービス (Office 365 など) にまだ関連付けられていなかった場合は、Azure AD **テナント**が作成されています。</span><span class="sxs-lookup"><span data-stu-id="607c3-143">Also, an Azure AD **tenant** was created, unless an existing tenant was already associated with your organization's use of other Microsoft services such as Office 365.</span></span> <span data-ttu-id="607c3-144">Azure AD テナントに対する完全なアクセス許可を持つ**グローバル管理者**が、そのテナントの作成時に関連付けられました。</span><span class="sxs-lookup"><span data-stu-id="607c3-144">A **global administrator** with full permissions on the Azure AD tenant was associated when it was created.</span></span>

<span data-ttu-id="607c3-145">Azure アカウント所有者と Azure AD グローバル管理者の両方のユーザー ID が、Microsoft によって管理されている安全性の高い ID システムに格納されています。</span><span class="sxs-lookup"><span data-stu-id="607c3-145">The user identities for both the Azure Account Owner and the Azure AD global administrator are stored in a highly secure identity system that is managed by Microsoft.</span></span> <span data-ttu-id="607c3-146">Azure アカウント所有者には、サブスクリプションを作成、更新、および削除する権限があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-146">The Azure Account Owner is authorized to create, update, and delete subscriptions.</span></span> <span data-ttu-id="607c3-147">Azure AD グローバル管理者が Azure AD で許可されているアクションは多数ありますが、この設計ガイドでは、ユーザー ID の作成と削除に注目します。</span><span class="sxs-lookup"><span data-stu-id="607c3-147">The Azure AD global administrator is authorized to perform many actions in Azure AD, but for this design guide you'll focus on the creation and deletion of user identity.</span></span>

> [!NOTE]
> <span data-ttu-id="607c3-148">お使いのアカウントに既存の Office 365 または Intune ライセンスが関連付けられている場合は、ご自身の組織に Azure AD テナントが既に存在することがあります。</span><span class="sxs-lookup"><span data-stu-id="607c3-148">Your organization may already have an existing Azure AD tenant if there's an existing Office 365 or Intune license associated with your account.</span></span>

<span data-ttu-id="607c3-149">Azure アカウント所有者には、サブスクリプションを作成、更新、および削除するアクセス許可が付与されています。</span><span class="sxs-lookup"><span data-stu-id="607c3-149">The Azure Account Owner has permission to create, update, and delete subscriptions:</span></span>

<span data-ttu-id="607c3-150">![Azure アカウント マネージャーと Azure AD グローバル管理者が含まれる Azure アカウント](../../_images/governance-3-0.png)
*図 1. Azure アカウント マネージャーと Azure AD グローバル管理者が含まれる Azure アカウント。*</span><span class="sxs-lookup"><span data-stu-id="607c3-150">![Azure account with Azure Account Manager and Azure AD global admin](../../_images/governance-3-0.png)
*Figure 1. An Azure account with an Account Manager and Azure AD Global Administrator.*</span></span>

<span data-ttu-id="607c3-151">Azure AD **グローバル管理者**には、ユーザー アカウントを作成するアクセス許可が付与されています。</span><span class="sxs-lookup"><span data-stu-id="607c3-151">The Azure AD **global administrator** has permission to create user accounts:</span></span>

<span data-ttu-id="607c3-152">![Azure アカウント マネージャーと Azure AD グローバル管理者が含まれる Azure アカウント](../../_images/governance-3-0a.png)
*図 2. Azure AD グローバル管理者は必要なユーザー アカウントをテナントに作成する。*</span><span class="sxs-lookup"><span data-stu-id="607c3-152">![Azure account with Azure Account Manager and Azure AD global admin](../../_images/governance-3-0a.png)
*Figure 2. The Azure AD Global Administrator creates the required user accounts in the tenant.*</span></span>

<span data-ttu-id="607c3-153">最初の 2 つのアカウント **App1 ワークロード所有者**と **App2 ワークロード所有者**はそれぞれ、ワークロードの管理を担当するご自身の組織内の個人に関連付けられています。</span><span class="sxs-lookup"><span data-stu-id="607c3-153">The first two accounts, **App1 Workload Owner** and **App2 Workload Owner** are each associated with an individual in your organization responsible for managing a workload.</span></span> <span data-ttu-id="607c3-154">**ネットワーク操作**アカウントは、共有インフラストラクチャ リソースを担当する個人が所有します。</span><span class="sxs-lookup"><span data-stu-id="607c3-154">The **network operations** account is owned by the individual that is responsible for the shared infrastructure resources.</span></span> <span data-ttu-id="607c3-155">最後の**サブスクリプション所有者**アカウントは、サブスクリプションの所有権を担当する個人と関連付けられています。</span><span class="sxs-lookup"><span data-stu-id="607c3-155">Finally, the **subscription owner** account is associated with the individual responsible for ownership of subscriptions.</span></span>

## <a name="resource-access-permissions-model-of-least-privilege"></a><span data-ttu-id="607c3-156">最小限の特権のリソース アクセスのアクセス許可モデル</span><span class="sxs-lookup"><span data-stu-id="607c3-156">Resource access permissions model of least privilege</span></span>

<span data-ttu-id="607c3-157">ご自身の ID 管理システムとユーザー アカウントが作成されたので、次は、最小限の特権のアクセス許可モデルをサポートするために、ロールベースのアクセス制御 (RBAC) ロールを各アカウントに適用する方法を決める必要があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-157">Now that your identity management system and user accounts have been created, you have to decide how to apply role-based access control (RBAC) roles to each account to support a permissions model of least privilege.</span></span>

<span data-ttu-id="607c3-158">また、ワークロード所有者が自身の所有していない他のワークロードに管理アクセスできないように、各ワークロードに関連付けられているリソースがそれぞれ互いに分離されていなければならないというもう 1 つの要件があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-158">There's another requirement stating the resources associated with each workload be isolated from one another such that no one workload owner has management access to any other workload they do not own.</span></span> <span data-ttu-id="607c3-159">さらに、このモデルは、[Azure RBAC の組み込みロール][rbac-built-in-roles]のみを使用して、実装するという要件もあります。</span><span class="sxs-lookup"><span data-stu-id="607c3-159">There's also a requirement to implement this model using only [built-in roles for Azure RBAC][rbac-built-in-roles].</span></span>

<span data-ttu-id="607c3-160">それぞれの RBAC ロールが、**サブスクリプション**、**リソース グループ**、個別の**リソース**の 3 つのスコープのいずれかで適用されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-160">Each RBAC role is applied at one of three scopes in Azure: **subscription**, **resource group**, then an individual **resource**.</span></span> <span data-ttu-id="607c3-161">ロールは下位のスコープに継承されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-161">Roles are inherited at lower scopes.</span></span> <span data-ttu-id="607c3-162">たとえば、ユーザーに[組み込み所有者ロール][rbac-built-in-owner]がサブスクリプション レベルで割り当てられている場合、そのロールは、オーバーライドされない限り、リソース グループおよび個別のリソース レベルでもユーザーに割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="607c3-162">For example, if a user is assigned the [built-in owner role][rbac-built-in-owner] at the subscription level, that role is also assigned to that user at the resource group and individual resource level unless it's overridden.</span></span>

<span data-ttu-id="607c3-163">そのため、最小限の特権アクセスのモデルを作成するには、特定のタイプのユーザーが 3 つの各スコープで実行できるアクションを決める必要があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-163">Therefore, to create a model of least privilege access you have to decide the actions a particular type of user is allowed to take at each of these three scopes.</span></span> <span data-ttu-id="607c3-164">たとえば、ここでは、ワークロード所有者には、自身のワークロードに関連付けられているリソースのみに対する管理アクセス許可を付与し、他のリソースは管理できないようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-164">For example, the requirement is for a workload owner to have permission to manage access to only the resources associated with their workload and no others.</span></span> <span data-ttu-id="607c3-165">[組み込み所有者ロール][rbac-built-in-owner]をサブスクリプション スコープで割り当てると、各ワークロード所有者はすべてのワークロードへの管理アクセス権を持つことになります。</span><span class="sxs-lookup"><span data-stu-id="607c3-165">If you were to assign the [built-in owner role][rbac-built-in-owner] at the subscription scope, each workload owner would have management access to all workloads.</span></span>

<span data-ttu-id="607c3-166">この概念がもう少しわかるように、2 つのアクセス許可モデルの例を見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="607c3-166">Let's take a look at two example permission models to understand this concept a little better.</span></span> <span data-ttu-id="607c3-167">最初の例のモデルでは、サービス管理者のみを信頼してリソース グループを作成します。</span><span class="sxs-lookup"><span data-stu-id="607c3-167">In the first example, the model trusts only the service administrator to create resource groups.</span></span> <span data-ttu-id="607c3-168">2 番目の例のモデルでは、組み込み所有者ロールを、サブスクリプション スコープの各ワークロード所有者に割り当てます。</span><span class="sxs-lookup"><span data-stu-id="607c3-168">In the second example, the model assigns the built-in owner role to each workload owner at the subscription scope.</span></span>

<span data-ttu-id="607c3-169">両方の例に、サブスクリプション スコープで[組み込み所有者ロール][rbac-built-in-owner]が割り当てられているサブスクリプション サービス管理者がいます。</span><span class="sxs-lookup"><span data-stu-id="607c3-169">In both examples, there is a subscription service administrator that is assigned the [built-in owner role][rbac-built-in-owner] at the subscription scope.</span></span> <span data-ttu-id="607c3-170">[組み込み所有者ロール][rbac-built-in-owner]によって、リソースへのアクセス管理を含むすべてのアクセス許可が付与されることを思い出してください。</span><span class="sxs-lookup"><span data-stu-id="607c3-170">Recall that the [built-in owner role][rbac-built-in-owner] grants all permissions including the management of access to resources.</span></span>
<span data-ttu-id="607c3-171">![所有者ロールを持つサブスクリプション サービス管理者](../../_images/governance-2-1.png)
*図 3. 組み込み所有者ロールが割り当てられたサービス管理者が含まれるサブスクリプション。*</span><span class="sxs-lookup"><span data-stu-id="607c3-171">![subscription service administrator with owner role](../../_images/governance-2-1.png)
*Figure 3. A subscription with a service administrator assigned the built-in owner role.*</span></span>

1. <span data-ttu-id="607c3-172">最初の例の**ワークロード所有者 A** にはサブスクリプション スコープのアクセス許可がありません。つまり、既定では、この所有者にはリソース アクセス管理のアクセス権がありません。</span><span class="sxs-lookup"><span data-stu-id="607c3-172">In the first example, there is **workload owner A** with no permissions at the subscription scope - they have no resource access management rights by default.</span></span> <span data-ttu-id="607c3-173">このユーザーは、そのワークロードに対応したリソースを展開して管理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-173">This user wants to deploy and manage the resources for their workload.</span></span> <span data-ttu-id="607c3-174">ワークロード所有者は**サービス管理者**に、リソース グループを作成するように要求する必要があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-174">They must contact the **service administrator** to request creation of a resource group.</span></span>
    <span data-ttu-id="607c3-175">![ワークロード所有者がリソース グループ A の作成を要求する](../../_images/governance-2-2.png)</span><span class="sxs-lookup"><span data-stu-id="607c3-175">![workload owner requests creation of resource group A](../../_images/governance-2-2.png)</span></span>
2. <span data-ttu-id="607c3-176">**サービス管理者**はその要求を確認し、**リソース グループ A** を作成します。この時点では、まだ**ワークロード所有者 A** にはアクセス許可がないため、何もできません。</span><span class="sxs-lookup"><span data-stu-id="607c3-176">The **service administrator** reviews their request and creates **resource group A**. At this point, **workload owner A** still doesn't have permission to do anything.</span></span>
    <span data-ttu-id="607c3-177">![サービス管理者がリソース グループ A を作成する](../../_images/governance-2-3.png)</span><span class="sxs-lookup"><span data-stu-id="607c3-177">![service administrator creates resource group A](../../_images/governance-2-3.png)</span></span>
3. <span data-ttu-id="607c3-178">**サービス管理者**は**ワークロード所有者 A** を**リソース グループ A** に追加し、[組み込み共同作成者ロール](/azure/role-based-access-control/built-in-roles#contributor)を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="607c3-178">The **service administrator** adds **workload owner A** to **resource group A** and assigns the [built-in contributor role](/azure/role-based-access-control/built-in-roles#contributor).</span></span> <span data-ttu-id="607c3-179">共同作成者ロールによって、**リソース グループ A** には、アクセス管理を除くすべてのアクセス許可が付与されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-179">The contributor role grants all permissions on **resource group A** except managing access permission.</span></span>
    <span data-ttu-id="607c3-180">![サービス管理者がワークロード所有者 A をリソース グループ A に追加する](../../_images/governance-2-4.png)</span><span class="sxs-lookup"><span data-stu-id="607c3-180">![service administrator adds workload owner a to resource group a](../../_images/governance-2-4.png)</span></span>
4. <span data-ttu-id="607c3-181">**ワークロード所有者 A** は、ワークロードの容量計画の一環として、2 人のチーム メンバーが CPU とネットワーク トラフィック監視データを確認できるようにする必要があるとします。</span><span class="sxs-lookup"><span data-stu-id="607c3-181">Let's assume that **workload owner A** has a requirement for a pair of team members to view the CPU and network traffic monitoring data as part of capacity planning for the workload.</span></span> <span data-ttu-id="607c3-182">**ワークロード所有者 A** には共同作成者ロールが割り当てられているため、ユーザーを**リソース グループ A** に追加するアクセス許可はありません。そこで、この要求を**サービス管理者**に送信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-182">Because **workload owner A** is assigned the contributor role, they do not have permission to add a user to **resource group A**. They must send this request to the **service administrator**.</span></span>
    <span data-ttu-id="607c3-183">![ワークロード所有者が、リソース グループへのワークロード共同作成者の追加を要求する](../../_images/governance-2-5.png)</span><span class="sxs-lookup"><span data-stu-id="607c3-183">![workload owner requests workload contributors be added to resource group](../../_images/governance-2-5.png)</span></span>
5. <span data-ttu-id="607c3-184">**サービス管理者**は要求を確認し、2 人の**ワークロードの共同作成者**ユーザーを**リソース グループ A** に追加します。この 2 人のユーザーにはリソース管理のアクセス許可は必要ありません。したがって、[組み込み閲覧者ロール](/azure/role-based-access-control/built-in-roles#contributor)が割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="607c3-184">The **service administrator** reviews the request, and adds the two **workload contributor** users to **resource group A**. Neither of these two users require permission to manage resources, so they are assigned the [built-in reader role](/azure/role-based-access-control/built-in-roles#contributor).</span></span>
    <span data-ttu-id="607c3-185">![サービス管理者がワークロード共同作成者をリソース グループ A に追加する](../../_images/governance-2-6.png)</span><span class="sxs-lookup"><span data-stu-id="607c3-185">![service administrator adds workload contributors to resource group A](../../_images/governance-2-6.png)</span></span>
6. <span data-ttu-id="607c3-186">さらに、**ワークロード所有者 B** も、自身のワークロードに対するリソースをリソース グループに追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-186">Next, **workload owner B** also requires a resource group to contain the resources for their workload.</span></span> <span data-ttu-id="607c3-187">**ワークロード所有者 A** と同様、**ワークロード所有者 B** にも、サブスクリプション スコープでアクションを実行するためのアクセス許可が最初は付与されていません。そこで、ワークロード所有者 B も**サービス管理者**に要求を送信する必要があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-187">As with **workload owner A**, **workload owner B** initially does not have permission to take any action at the subscription scope so they must send a request to the **service administrator**.</span></span>
    <span data-ttu-id="607c3-188">![ワークロード所有者 B がリソース グループ B の作成を要求する](../../_images/governance-2-7.png)</span><span class="sxs-lookup"><span data-stu-id="607c3-188">![workload owner B requests creation of resource group B](../../_images/governance-2-7.png)</span></span>
7. <span data-ttu-id="607c3-189">**サービス管理者**はその要求を確認し、**リソース グループ B** を作成します。![サービス管理者がリソース グループ B を作成する](../../_images/governance-2-8.png)</span><span class="sxs-lookup"><span data-stu-id="607c3-189">The **service administrator** reviews the request and creates **resource group B**.  ![Service Administrator creates resource group B](../../_images/governance-2-8.png)</span></span>
8. <span data-ttu-id="607c3-190">次に、**サービス管理者**は**ワークロード所有者 B** を**リソース グループ B** に追加し、[組み込み共同作成者ロール](/azure/role-based-access-control/built-in-roles#contributor)を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="607c3-190">The **service administrator** then adds **workload owner B** to **resource group B** and assigns the [built-in contributor role](/azure/role-based-access-control/built-in-roles#contributor).</span></span>
    <span data-ttu-id="607c3-191">![サービス管理者がワークロード所有者 B をリソース グループ B に追加する](../../_images/governance-2-9.png)</span><span class="sxs-lookup"><span data-stu-id="607c3-191">![Service Administrator adds Workload Owner B to resource group B](../../_images/governance-2-9.png)</span></span>

<span data-ttu-id="607c3-192">この時点で、ワークロード所有者はそれぞれ、自身のリソース グループで孤立しています。</span><span class="sxs-lookup"><span data-stu-id="607c3-192">At this point, each of the workload owners is isolated in their own resource group.</span></span> <span data-ttu-id="607c3-193">ワークロード所有者またはそのチーム メンバーが、他のリソース グループのリソースに管理アクセスすることはできません。</span><span class="sxs-lookup"><span data-stu-id="607c3-193">None of the workload owners or their team members have management access to the resources in any other resource group.</span></span>

<span data-ttu-id="607c3-194">![リソース グループ A とリソース グループ B が含まれるサブスクリプション](../../_images/governance-2-10.png)
*図 4. それぞれのリソース グループで孤立している 2 人のワークロード所有者が含まれるサブスクリプション。*</span><span class="sxs-lookup"><span data-stu-id="607c3-194">![subscription with resource groups A and B](../../_images/governance-2-10.png)
*Figure 4. A subscription with two workload owners isolated with their own resource group.*</span></span>

<span data-ttu-id="607c3-195">これは最小限の特権モデルです。このモデルでは、各ユーザーに、適切なアクセス許可が適切なリソース管理スコープで割り当てられています。</span><span class="sxs-lookup"><span data-stu-id="607c3-195">This model is a least privilege model - each user is assigned the correct permission at the correct resource management scope.</span></span>

<span data-ttu-id="607c3-196">ただし、この例では、すべてのタスクが**サービス管理者**によって実行されたことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="607c3-196">However, consider that every task in this example was performed by the **service administrator**.</span></span> <span data-ttu-id="607c3-197">この例ではワークロード所有者が 2 人しかいなかったため、シンプルで、問題がないように見えますが、大規模な組織では問題が発生するのは想像に難くありません。</span><span class="sxs-lookup"><span data-stu-id="607c3-197">While this is a simple example and may not appear to be an issue because there were only two workload owners, it's easy to imagine the types of issues that would result for a large organization.</span></span> <span data-ttu-id="607c3-198">たとえば、要求のバックログが大きくなれば、**サービス管理者**がボトルネックとなる可能性があり、これが遅延につながります。</span><span class="sxs-lookup"><span data-stu-id="607c3-198">For example, the **service administrator** can become a bottleneck with a large backlog of requests that result in delays.</span></span>

<span data-ttu-id="607c3-199">次の 2 番目の例では、**サービス管理者**によって実行されるタスク数が減っています。</span><span class="sxs-lookup"><span data-stu-id="607c3-199">Let's take a look at second example that reduces the number of tasks performed by the **service administrator**.</span></span>

1. <span data-ttu-id="607c3-200">このモデルでは、サブスクリプション スコープで**ワークロード所有者 A** に[組み込み所有者ロール][rbac-built-in-owner]が割り当てられており、そのワークロード所有者 A は、自身のリソース グループとして**リソース グループ A** を作成できます。![サービス管理者がワークロード所有者 A をサブスクリプションに追加する](../../_images/governance-2-11.png)</span><span class="sxs-lookup"><span data-stu-id="607c3-200">In this model, **workload owner A** is assigned the [built-in owner role][rbac-built-in-owner] at the subscription scope, enabling them to create their own resource group: **resource group A**.  ![Service Administrator adds Workload Owner A to subscription](../../_images/governance-2-11.png)</span></span>
2. <span data-ttu-id="607c3-201">**リソース グループ A** が作成されるとき、**ワークロード所有者 A** が既定で追加され、この所有者は、[組み込み所有者][rbac-built-in-owner]ロールをサブスクリプション スコープから継承します。</span><span class="sxs-lookup"><span data-stu-id="607c3-201">When **resource group A** is created, **workload owner A** is added by default and inherits the [built-in owner][rbac-built-in-owner] role from the subscription scope.</span></span>
    <span data-ttu-id="607c3-202">![ワークロード所有者 A がリソース グループ A を作成する](../../_images/governance-2-12.png)</span><span class="sxs-lookup"><span data-stu-id="607c3-202">![Workload Owner A creates resource group A](../../_images/governance-2-12.png)</span></span>
3. <span data-ttu-id="607c3-203">[組み込み所有者ロール][rbac-built-in-owner]により、**ワークロード所有者 A** に、リソース グループへのアクセスを管理するアクセス許可が付与されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-203">The [built-in owner role][rbac-built-in-owner] grants **workload owner A** permission to manage access to the resource group.</span></span> <span data-ttu-id="607c3-204">**ワークロード所有者 A** が 2 人の**ワークロード共同作成者**を追加し、それぞれに[組み込み閲覧者ロール][rbac-built-in-owner]を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="607c3-204">**Workload owner A** adds two **workload contributors** and assigns the [built-in reader role][rbac-built-in-owner] to each of them.</span></span>
    <span data-ttu-id="607c3-205">![ワークロード所有者 A がワークロード共同作成者を追加する](../../_images/governance-2-13.png)</span><span class="sxs-lookup"><span data-stu-id="607c3-205">![Workload Owner A adds Workload Contributors](../../_images/governance-2-13.png)</span></span>
4. <span data-ttu-id="607c3-206">ここで、**サービス管理者**が、**ワークロード所有者 B** を、組み込み所有者ロールが含まれるサブスクリプションに追加します。</span><span class="sxs-lookup"><span data-stu-id="607c3-206">**Service administrator** now adds **workload owner B** to the subscription with the built-in owner role.</span></span>
    <span data-ttu-id="607c3-207">![サービス管理者がワークロード所有者 B をサブスクリプションに追加する](../../_images/governance-2-14.png)</span><span class="sxs-lookup"><span data-stu-id="607c3-207">![Service Administrator adds Workload Owners B to subscription](../../_images/governance-2-14.png)</span></span>
5. <span data-ttu-id="607c3-208">**ワークロード所有者 B** が**リソース グループ B** を作成します。ワークロード所有者 B は既定で追加されています。</span><span class="sxs-lookup"><span data-stu-id="607c3-208">**Workload owner B** creates **resource group B** and is added by default.</span></span> <span data-ttu-id="607c3-209">前と同様、**ワークロード所有者 B** は、組み込み所有者ロールをサブスクリプション スコープから継承します。</span><span class="sxs-lookup"><span data-stu-id="607c3-209">Again, **workload owner B** inherits the built-in owner role from the subscription scope.</span></span>
    <span data-ttu-id="607c3-210">![ワークロード所有者 B がリソース グループ B を作成する](../../_images/governance-2-15.png)</span><span class="sxs-lookup"><span data-stu-id="607c3-210">![Workload Owner B creates resource group B](../../_images/governance-2-15.png)</span></span>

<span data-ttu-id="607c3-211">このモデルでは、**サービス管理者**が実行するアクションが、最初の例よりも少なくなっていることに注意してください。これはそれぞれのワークロード所有者に管理アクセスが委任されているためです。</span><span class="sxs-lookup"><span data-stu-id="607c3-211">Note that in this model, the **service administrator** performed fewer actions than they did in the first example due to the delegation of management access to each of the individual workload owners.</span></span>

<span data-ttu-id="607c3-212">![リソース グループ A とリソース グループ B が含まれるサブスクリプション](../../_images/governance-2-16.png)
*図 5. 組み込み所有者ロールが割り当てられた、サービス管理者と 2 人のワークロード所有者が含まれるサブスクリプション。*</span><span class="sxs-lookup"><span data-stu-id="607c3-212">![subscription with resource groups A and B](../../_images/governance-2-16.png)
*Figure 5. A subscription with a service administrator and two workload owners, all assigned the built-in owner role.*</span></span>

<span data-ttu-id="607c3-213">ただし、サブスクリプション スコープで**ワークロード所有者 A** と**ワークロード所有者 B** の両方に組み込み所有者ロールが割り当てられているため、それぞれが、お互いのリソース グループの組み込み所有者ロールを継承しています。</span><span class="sxs-lookup"><span data-stu-id="607c3-213">However, because both **workload owner A** and **workload owner B** are assigned the built-in owner role at the subscription scope, they have each inherited the built-in owner role for each other's resource group.</span></span> <span data-ttu-id="607c3-214">つまり、両方の所有者は、お互いのリソースにフル アクセスできるだけでなく、管理アクセスを、お互いのリソース グループに委任することもできます。</span><span class="sxs-lookup"><span data-stu-id="607c3-214">This means that not only do they have full access to one another's resources, they are also able to delegate management access to each other's resource groups.</span></span> <span data-ttu-id="607c3-215">たとえば、**ワークロード所有者 B** が他のユーザーを**リソース グループ A** に追加し、組み込み所有者ロールなど、任意のロールを割り当てることができます。</span><span class="sxs-lookup"><span data-stu-id="607c3-215">For example, **workload owner B** has rights to add any other user to **resource group A** and can assign any role to them, including the built-in owner role.</span></span>

<span data-ttu-id="607c3-216">それぞれの例を要件と比較すると、この 2 つの例では、2 人のワークロード所有者にリソース アクセス権を付与するアクセス許可を持つ 1 人の信頼されたユーザーがサブスクリプション スコープでサポートされていることがわかります。</span><span class="sxs-lookup"><span data-stu-id="607c3-216">If you compare each example to the requirements, you'll see that both examples support a single trusted user at the subscription scope with permission to grant resource access rights to the two workload owners.</span></span> <span data-ttu-id="607c3-217">2 人のワークロード所有者は、既定では、リソース管理にアクセスできなかったため、**サービス管理者**に、アクセス許可を明示的に割り当ててもらう必要がありました。</span><span class="sxs-lookup"><span data-stu-id="607c3-217">Each of the two workload owners did not have access to resource management by default and required the **service administrator** to explicitly assign permissions to them.</span></span> <span data-ttu-id="607c3-218">ただし、最初の例のみが、ワークロード所有者が他のワークロードのリソースにアクセスできないように、各ワークロードに関連付けられているリソースがお互いに独立していなければならない、という要件に対応しています。</span><span class="sxs-lookup"><span data-stu-id="607c3-218">However, only the first example supports the requirement that the resources associated with each workload are isolated from one another such that no workload owner has access to the resources of any other workload.</span></span>

## <a name="resource-management-model"></a><span data-ttu-id="607c3-219">リソース管理モデル</span><span class="sxs-lookup"><span data-stu-id="607c3-219">Resource management model</span></span>

<span data-ttu-id="607c3-220">これで、最小限の特権のアクセス許可モデルの設計が完了しました。次は、これらのガバナンス モデルの実際の適用例をいくつか見ていきましょう。</span><span class="sxs-lookup"><span data-stu-id="607c3-220">Now that you've designed a permissions model of least privilege, let's move on to take a look at some practical applications of these governance models.</span></span> <span data-ttu-id="607c3-221">次の 3 つの環境をサポートする必要がある、という要件を思い出してください。</span><span class="sxs-lookup"><span data-stu-id="607c3-221">Recall from the requirements that you must support the following three environments:</span></span>

1. <span data-ttu-id="607c3-222">**共有インフラストラクチャ:** すべてのワークロードで共有されるリソースの 1 つのグループ。</span><span class="sxs-lookup"><span data-stu-id="607c3-222">**Shared infrastructure:** a single group of resources shared by all workloads.</span></span> <span data-ttu-id="607c3-223">ネットワーク ゲートウェイ、ファイアウォール、セキュリティ サービスなどのリソースです。</span><span class="sxs-lookup"><span data-stu-id="607c3-223">These are resources such as network gateways, firewalls, and security services.</span></span>
2. <span data-ttu-id="607c3-224">**開発:** 複数の非運用対応ワークロードを表す複数のリソース グループ。</span><span class="sxs-lookup"><span data-stu-id="607c3-224">**Development:** multiple groups of resources representing multiple non-production ready workloads.</span></span> <span data-ttu-id="607c3-225">これらのリソースは、概念実証、テスト、およびその他の開発者アクティビティ用に使用されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-225">These resources are used for proof-of-concept, testing, and other developer activities.</span></span> <span data-ttu-id="607c3-226">これらのリソースのガバナンス モデルは、開発者の俊敏性を高めることができるように、もっと緩やかなものにしてもかまいません。</span><span class="sxs-lookup"><span data-stu-id="607c3-226">These resources may have a more relaxed governance model to enable increased developer agility.</span></span>
3. <span data-ttu-id="607c3-227">**運用:** 複数の運用ワークロードを表す複数のリソース グループ。</span><span class="sxs-lookup"><span data-stu-id="607c3-227">**Production:** multiple groups of resources representing multiple production workloads.</span></span> <span data-ttu-id="607c3-228">これらのリソースは、プライベートとパブリックのアプリケーション成果物のホストに使用されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-228">These resources are used to host the private and public facing application artifacts.</span></span> <span data-ttu-id="607c3-229">これらのリソースでは、リソース、アプリケーション コード、およびデータを不正アクセスから保護するために、通常、最も厳しいガバナンスおよびセキュリティ モデルが採用されています。</span><span class="sxs-lookup"><span data-stu-id="607c3-229">These resources typically have the tightest governance and security models to protect the resources, application code, and data from unauthorized access.</span></span>

<span data-ttu-id="607c3-230">この 3 つの環境ごとに、**ワークロード所有者**、**環境**、またはその両方について、コスト データを追跡する必要があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-230">For each of these three environments, there is a requirement to track cost data by **workload owner**, **environment**, or both.</span></span> <span data-ttu-id="607c3-231">つまり、**共有インフラストラクチャ**の継続的なコスト、**開発**環境と**運用**環境の両方の個人によって発生するコスト、最終的には**開発**と**運用**の全体的コストを把握する必要があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-231">That is, you'll want to know the ongoing cost of the **shared infrastructure**, the costs incurred by individuals in both the **development** and **production** environments, and finally the overall cost of **development** and **production**.</span></span>

<span data-ttu-id="607c3-232">リソースのスコープには、**サブスクリプション**と**リソース グループ**の 2 つのレベルがあることは既に説明しました。</span><span class="sxs-lookup"><span data-stu-id="607c3-232">You have already learned that resources are scoped to two levels: **subscription** and **resource group**.</span></span> <span data-ttu-id="607c3-233">したがって、最初に、**サブスクリプション**によって環境を整理する方法を決めます。</span><span class="sxs-lookup"><span data-stu-id="607c3-233">Therefore, the first decision is how to organize environments by **subscription**.</span></span> <span data-ttu-id="607c3-234">可能性は 2 つしかありません。1 つのサブスクリプション、そして複数のサブスクリプションです。</span><span class="sxs-lookup"><span data-stu-id="607c3-234">There are only two possibilities: a single subscription, or, multiple subscriptions.</span></span>

<span data-ttu-id="607c3-235">それぞれのモデルの例を見る前に、Azure 内のサブスクリプションの管理構造を確認しましょう。</span><span class="sxs-lookup"><span data-stu-id="607c3-235">Before you look at examples of each of these models, let's review the management structure for subscriptions in Azure.</span></span>

<span data-ttu-id="607c3-236">サブスクリプションを担当する個人が組織にいる、という要件を思い出してください。このユーザーは、Azure AD テナント内で**サブスクリプション所有者**アカウントを所有しています。</span><span class="sxs-lookup"><span data-stu-id="607c3-236">Recall from the requirements that you have an individual in the organization who is responsible for subscriptions, and this user owns the **subscription owner** account in the Azure AD tenant.</span></span> <span data-ttu-id="607c3-237">ただし、このアカウントには、サブスクリプションを作成するためのアクセス許可がありません。</span><span class="sxs-lookup"><span data-stu-id="607c3-237">However, this account does not have permission to create subscriptions.</span></span> <span data-ttu-id="607c3-238">これを行うアクセス許可を持っているのは **Azure アカウント所有者**だけです。</span><span class="sxs-lookup"><span data-stu-id="607c3-238">Only the **Azure Account Owner** has permission to do this:</span></span>

<span data-ttu-id="607c3-239">![Azure アカウント所有者がサブスクリプションを作成する](../../_images/governance-3-0b.png)
*図 6. Azure アカウント所有者がサブスクリプションを作成する。*</span><span class="sxs-lookup"><span data-stu-id="607c3-239">![An Azure Account Owner creates a subscription](../../_images/governance-3-0b.png)
*Figure 6. An Azure Account Owner creates a subscription.*</span></span>

<span data-ttu-id="607c3-240">サブスクリプションが作成されたら、**Azure アカウント所有者**は、**サブスクリプション所有者**アカウントを、**所有者**ロールと共にサブスクリプションに追加できます。</span><span class="sxs-lookup"><span data-stu-id="607c3-240">Once the subscription has been created, the **Azure Account Owner** can add the **subscription owner** account to the subscription with the **owner** role:</span></span>

<span data-ttu-id="607c3-241">![Azure アカウント所有者は、サブスクリプション所有者ユーザー アカウントを所有者ロールと共にサブスクリプションに追加する。](../../_images/governance-3-0c.png)
*図 7. Azure アカウント所有者は、**サブスクリプション所有者**ユーザー アカウントを**所有者**ロールと共にサブスクリプションに追加する。*</span><span class="sxs-lookup"><span data-stu-id="607c3-241">![The Azure Account Owner adds the subscription owner user account to the subscription with the owner role.](../../_images/governance-3-0c.png)
*Figure 7. The Azure Account Owner adds the **subscription owner** user account to the subscription with the **owner** role.*</span></span>

<span data-ttu-id="607c3-242">これで、**サブスクリプション所有者**は、**リソース グループ**を作成して、リソース アクセス管理を委任できます。</span><span class="sxs-lookup"><span data-stu-id="607c3-242">The **subscription owner** can now create **resource groups** and delegate resource access management.</span></span>

<span data-ttu-id="607c3-243">まず、1 つのサブスクリプションを使用したリソース管理モデルの例を見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="607c3-243">First let's look at an example resource management model using a single subscription.</span></span> <span data-ttu-id="607c3-244">最初に、リソース グループを 3 つの環境と連携させる方法を決めます。</span><span class="sxs-lookup"><span data-stu-id="607c3-244">The first decision is how to align resource groups to the three environments.</span></span> <span data-ttu-id="607c3-245">2 つのオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="607c3-245">You have two options:</span></span>

1. <span data-ttu-id="607c3-246">各環境を 1 つのリソース グループと連携させる。</span><span class="sxs-lookup"><span data-stu-id="607c3-246">Align each environment to a single resource group.</span></span> <span data-ttu-id="607c3-247">共有インフラストラクチャ リソースはすべて、1 つの**共有インフラストラクチャ** リソース グループにデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="607c3-247">All shared infrastructure resources are deployed to a single **shared infrastructure** resource group.</span></span> <span data-ttu-id="607c3-248">開発ワークロードに関連付けられているリソースはすべて、1 つの**開発**リソース グループにデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="607c3-248">All resources associated with development workloads are deployed to a single **development** resource group.</span></span> <span data-ttu-id="607c3-249">運用ワークロードに関連付けられているリソースについては、**運用**環境の 1 つの**運用**リソース グループにすべてデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="607c3-249">All resources associated with production workloads are deployed into a single **production** resource group for the **production** environment.</span></span>
2. <span data-ttu-id="607c3-250">ワークロードごとに個別のリソース グループを作成し、名前付け規則とタグを使用して、そのリソース グループを 3 つの環境それぞれと連携させる。</span><span class="sxs-lookup"><span data-stu-id="607c3-250">Create separate resource groups for each workload, using a naming convention and tags to align resource groups with each of the three environments.</span></span>

<span data-ttu-id="607c3-251">まずは、最初のオプションについて考えてみましょう。</span><span class="sxs-lookup"><span data-stu-id="607c3-251">Let's begin by evaluating the first option.</span></span> <span data-ttu-id="607c3-252">ここでは、前のセクションで説明したアクセス許可モデルと、1 人のサブスクリプション サービス管理者を使用します。この管理者は、リソース グループを作成し、そのグループに、ユーザーを、組み込み**共同作成者**ロールまたは**閲覧者**ロールと共に追加します。</span><span class="sxs-lookup"><span data-stu-id="607c3-252">You'll be using the permissions model that was discussed in the previous section, with a single subscription service administrator who creates resource groups and adds users to them with either the built-in **contributor** or **reader** role.</span></span>

1. <span data-ttu-id="607c3-253">デプロイされた最初のリソース グループは、**共有インフラストラクチャ**環境を表します。</span><span class="sxs-lookup"><span data-stu-id="607c3-253">The first resource group deployed represents the **shared infrastructure** environment.</span></span> <span data-ttu-id="607c3-254">**サブスクリプション所有者**は、`netops-shared-rg` という名前の共有インフラストラクチャ リソースのリソース グループを作成します。</span><span class="sxs-lookup"><span data-stu-id="607c3-254">The **subscription owner** creates a resource group for the shared infrastructure resources named `netops-shared-rg`.</span></span>
    ![](../../_images/governance-3-0d.png)
2. <span data-ttu-id="607c3-255">**サブスクリプション所有者**は、**ネットワーク操作ユーザー** アカウントをそのリソース グループに追加し、**共同作成者**ロールを割り当てます。</span><span class="sxs-lookup"><span data-stu-id="607c3-255">The **subscription owner** adds the **network operations user** account to the resource group and assigns the **contributor** role.</span></span>
    ![](../../_images/governance-3-0e.png)
3. <span data-ttu-id="607c3-256">**ネットワーク操作ユーザー**は、[VPN ゲートウェイ](/azure/vpn-gateway/vpn-gateway-about-vpngateways)を作成し、オンプレミス VPN アプライアンスに接続するように構成します。</span><span class="sxs-lookup"><span data-stu-id="607c3-256">The **network operations user** creates a [VPN gateway](/azure/vpn-gateway/vpn-gateway-about-vpngateways) and configures it to connect to the on-premises VPN appliance.</span></span> <span data-ttu-id="607c3-257">また、**ネットワーク操作ユーザー**は、*environment:shared* および *managedBy:netOps* という[タグ](/azure/azure-resource-manager/resource-group-using-tags)のペアを各リソースに適用します。</span><span class="sxs-lookup"><span data-stu-id="607c3-257">The **network operations** user also applies a pair of [tags](/azure/azure-resource-manager/resource-group-using-tags) to each of the resources: *environment:shared* and *managedBy:netOps*.</span></span> <span data-ttu-id="607c3-258">**サブスクリプション サービス管理者**がコスト レポートをエクスポートすると、それぞれのタグに合わせてコストが調整されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-258">When the **subscription service administrator** exports a cost report, costs will be aligned with each of these tags.</span></span> <span data-ttu-id="607c3-259">これにより、**サブスクリプション サービス管理者**が、*environment* タグ *managedBy* タグを使ってコストをピボットできます。</span><span class="sxs-lookup"><span data-stu-id="607c3-259">This allows the **subscription service administrator** to pivot costs using the *environment* tag and the *managedBy* tag.</span></span> <span data-ttu-id="607c3-260">図の右上にある**リソース制限**カウンターをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="607c3-260">Notice the **resource limits** counter at the top right-hand side of the figure.</span></span> <span data-ttu-id="607c3-261">各 Azure サブスクリプションに[サービス制限](/azure/azure-subscription-service-limits)があります。これらの制限の影響について理解しやすいように、ここでは各サブスクリプションの仮想ネットワークの制限を追跡します。</span><span class="sxs-lookup"><span data-stu-id="607c3-261">Each Azure subscription has [service limits](/azure/azure-subscription-service-limits), and to help you understand the effect of these limits you'll follow the virtual network limit for each subscription.</span></span> <span data-ttu-id="607c3-262">サブスクリプションあたりの仮想ネットワークの制限は 1,000 です。1 つ目の仮想ネットワークがデプロイされたため、現在 999 の仮想ネットワークが使用可能です。</span><span class="sxs-lookup"><span data-stu-id="607c3-262">There is a limit of 1000 virtual networks per subscription, and after the first virtual network is deployed there are now 999 available.</span></span>
    ![](../../_images/governance-3-1.png)
4. <span data-ttu-id="607c3-263">さらに 2 つのリソース グループがデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="607c3-263">Two more resource groups are deployed.</span></span> <span data-ttu-id="607c3-264">1 つ目の名前は `prod-rg` です。</span><span class="sxs-lookup"><span data-stu-id="607c3-264">The first is named `prod-rg`.</span></span> <span data-ttu-id="607c3-265">このリソース グループは運用環境と連携します。</span><span class="sxs-lookup"><span data-stu-id="607c3-265">This resource group is aligned with the production environment.</span></span> <span data-ttu-id="607c3-266">2 つ目の名前は `dev-rg` で、開発環境と連携します。</span><span class="sxs-lookup"><span data-stu-id="607c3-266">The second is named `dev-rg` and is aligned with the development environment.</span></span> <span data-ttu-id="607c3-267">運用ワークロードに関連付けられているリソースはすべて、運用環境にデプロイされ、開発ワークロードに関連付けられているリソースはすべて、開発環境にデプロイされます。</span><span class="sxs-lookup"><span data-stu-id="607c3-267">All resources associated with production workloads are deployed to the production environment and all resources associated with development workloads are deployed to the development environment.</span></span> <span data-ttu-id="607c3-268">この例では、この 2 つの環境それぞれにデプロイするワークロードは 2 つだけなので、Azure サブスクリプション サービスの制限に達することはありません。</span><span class="sxs-lookup"><span data-stu-id="607c3-268">In this example, you'll only deploy two workloads to each of these two environments, so you won't encounter any Azure subscription service limits.</span></span> <span data-ttu-id="607c3-269">しかし、リソース数の上限がリソース グループあたり 800 であることを考慮してください。</span><span class="sxs-lookup"><span data-stu-id="607c3-269">However, consider that each resource group has a limit of 800 resources per resource group.</span></span> <span data-ttu-id="607c3-270">各リソース グループにワークロードを追加し続けると、最終的にこの制限に到達します。</span><span class="sxs-lookup"><span data-stu-id="607c3-270">If you continue to add workloads to each resource group, eventually this limit will be reached.</span></span>
    ![](../../_images/governance-3-2.png)
5. <span data-ttu-id="607c3-271">最初の**ワークロード所有者**が要求を**サブスクリプション サービス管理者**に送信します。その所有者は、**共同作成者**ロールと共に、開発環境と運用環境それぞれのリソース グループに追加されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-271">The first **workload owner** sends a request to the **subscription service administrator** and is added to each of the development and production environment resource groups with the **contributor** role.</span></span> <span data-ttu-id="607c3-272">前に説明したように、**共同作成者**ロールにより、ユーザーは、別のユーザーへのロールの割り当て以外のすべての操作を実行できます。</span><span class="sxs-lookup"><span data-stu-id="607c3-272">As you learned earlier, the **contributor** role allows the user to perform any operation other than assigning a role to another user.</span></span> <span data-ttu-id="607c3-273">最初の**ワークロード所有者**は、自身のワークロードに関連付けられているリソースを作成できます。</span><span class="sxs-lookup"><span data-stu-id="607c3-273">The first **workload owner** can now create the resources associated with their workload.</span></span>
    ![](../../_images/governance-3-3.png)
6. <span data-ttu-id="607c3-274">最初の**ワークロード所有者**は、2 つのリソース グループそれぞれに仮想ネットワークを作成します。各仮想ネットワークには 2 つの仮想マシンがあります。</span><span class="sxs-lookup"><span data-stu-id="607c3-274">The first **workload owner** creates a virtual network in each of the two resource groups with a pair of virtual machines in each.</span></span> <span data-ttu-id="607c3-275">最初の**ワークロード所有者**は、*environment* タグと *managedBy* タグをすべてのリソースに適用します。</span><span class="sxs-lookup"><span data-stu-id="607c3-275">The first **workload owner** applies the *environment* and *managedBy* tags to all resources.</span></span> <span data-ttu-id="607c3-276">Azure サービスの制限カウンターが示す現在の残りの仮想ネットワーク数が 997 であることに注意してください。</span><span class="sxs-lookup"><span data-stu-id="607c3-276">Note that the Azure service limit counter is now at 997 virtual networks remaining.</span></span>
    ![](../../_images/governance-3-4.png)
7. <span data-ttu-id="607c3-277">仮想ネットワークが作成されたとき、どちらにもオンプレミスへの接続性はありません。</span><span class="sxs-lookup"><span data-stu-id="607c3-277">Each of the virtual networks does not have connectivity to on-premises when they are created.</span></span> <span data-ttu-id="607c3-278">この種類のアーキテクチャでは、各仮想ネットワークが、**共有インフラストラクチャ**環境の *hub-vnet* にピアリングされていなければなりません。</span><span class="sxs-lookup"><span data-stu-id="607c3-278">In this type of architecture, each virtual network must be peered to the *hub-vnet* in the **shared infrastructure** environment.</span></span> <span data-ttu-id="607c3-279">仮想ネットワークのピアリングにより、2 つの個別の仮想ネットワーク間に接続が作成され、その間をネットワーク トラフィックが行き来できるようになります。</span><span class="sxs-lookup"><span data-stu-id="607c3-279">Virtual network peering creates a connection between two separate virtual networks and allows network traffic to travel between them.</span></span> <span data-ttu-id="607c3-280">仮想ネットワークのピアリングは、本質的には推移的でないことに注意してください。</span><span class="sxs-lookup"><span data-stu-id="607c3-280">Note that virtual network peering is not inherently transitive.</span></span> <span data-ttu-id="607c3-281">ピアリングは、接続されている 2 つの各仮想ネットワークで指定する必要があります。いずれか 1 つの仮想ネットワークでしかピアリングが指定されていない場合、接続は不完全です。</span><span class="sxs-lookup"><span data-stu-id="607c3-281">A peering must be specified in each of the two virtual networks that are connected, and if only one of the virtual networks specifies a peering the connection is incomplete.</span></span> <span data-ttu-id="607c3-282">この影響を示すために、最初の**ワークロード所有者**は、**prod-vnet** と **hub-vnet** の間のピアリングを指定します。</span><span class="sxs-lookup"><span data-stu-id="607c3-282">To illustrate the effect of this, the first **workload owner** specifies a peering between **prod-vnet** and **hub-vnet**.</span></span> <span data-ttu-id="607c3-283">この場合、最初のピアリングは作成されますが、トラフィックは行き来しません。**hub-vnet** から **prod-vnet** への補完的なピアリングがまだ指定されていないためです。</span><span class="sxs-lookup"><span data-stu-id="607c3-283">The first peering is created, but no traffic flows because the complementary peering from **hub-vnet** to **prod-vnet** has not yet been specified.</span></span> <span data-ttu-id="607c3-284">最初の**ワークロード所有者**は、**ネットワーク操作**ユーザーに、この補完的なピアリング接続を要求します。</span><span class="sxs-lookup"><span data-stu-id="607c3-284">The first **workload owner** contacts the **network operations** user and requests this complementary peering connection.</span></span>
    ![](../../_images/governance-3-5.png)
8. <span data-ttu-id="607c3-285">**ネットワーク操作**ユーザーは要求を確認し、承認したうえで、**hub-vnet** の設定でピアリングを指定します。</span><span class="sxs-lookup"><span data-stu-id="607c3-285">The **network operations** user reviews the request, approves it, then specifies the peering in the settings for the **hub-vnet**.</span></span> <span data-ttu-id="607c3-286">これでピアリングの接続は完了です。2 つの仮想ネットワーク間を、ネットワーク トラフィックが行き来するようになります。</span><span class="sxs-lookup"><span data-stu-id="607c3-286">The peering connection is now complete and network traffic flows between the two virtual networks.</span></span>
    ![](../../_images/governance-3-6.png)
9. <span data-ttu-id="607c3-287">ここで、もう 1 人の**ワークロード所有者**が要求を**サブスクリプション サービス管理者**に送信します。その所有者は、**共同作成者**ロールと共に、既存の**運用**環境と**開発**環境それぞれのリソース グループに追加されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-287">Now, a second **workload owner** sends a request to the **subscription service administrator** and is added to the existing **production** and **development** environment resource groups with the **contributor** role.</span></span> <span data-ttu-id="607c3-288">その 2 番目の**ワークロード所有者**には、各リソース グループで、最初の**ワークロード所有者**と同じアクセス許可がすべてのリソースについて付与されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-288">The second **workload owner** has the same permissions on all resources as the first **workload owner** in each resource group.</span></span>
    ![](../../_images/governance-3-7.png)
10. <span data-ttu-id="607c3-289">2 番目の**ワークロード所有者**は、**prod vnet** 仮想ネットワークにサブネットを作成し、2 つの仮想マシンを追加します。</span><span class="sxs-lookup"><span data-stu-id="607c3-289">The second **workload owner** creates a subnet in the **prod-vnet** virtual network, then adds two virtual machines.</span></span> <span data-ttu-id="607c3-290">2 番目の**ワークロード所有者**は、*environment* タグと *managedBy* タグを各リソースに適用します。</span><span class="sxs-lookup"><span data-stu-id="607c3-290">The second **workload owner** applies the *environment* and *managedBy* tags to each resource.</span></span>
    ![](../../_images/governance-3-8.png)

<span data-ttu-id="607c3-291">このリソース管理モデルの例では、3 つの必要な環境でリソースを管理できます。</span><span class="sxs-lookup"><span data-stu-id="607c3-291">This example resource management model enables us to manage resources in the three required environments.</span></span> <span data-ttu-id="607c3-292">共有インフラストラクチャ リソースが保護されているのは、それらのリソースへのアクセス許可を持つユーザーが、サブスクリプションに 1 人しかいないためです。</span><span class="sxs-lookup"><span data-stu-id="607c3-292">The shared infrastructure resources are protected because there's only a single user in the subscription with permission to access those resources.</span></span> <span data-ttu-id="607c3-293">共有インフラストラクチャ リソースは、その実際の共有リソース自体に対するアクセス許可がなくても、各ワークロード所有者が使用できます。</span><span class="sxs-lookup"><span data-stu-id="607c3-293">Each of the workload owners is able to use the shared infrastructure resources without having any permissions on the actual shared resources themselves.</span></span> <span data-ttu-id="607c3-294">ただし、この管理モデルは、ワークロード分離の要件を満たしておらず、2 人の**ワークロード所有者**それぞれが、もう一方のワークロードのリソースにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="607c3-294">However, This management model fails the requirement for workload isolation - each of the two **workload owners** are able to access the resources of the other's workload.</span></span>

<span data-ttu-id="607c3-295">また、一見するとわかりにくいかもしれませんが、このモデルには重要な考慮事項がもう 1 つあります。</span><span class="sxs-lookup"><span data-stu-id="607c3-295">There's another important consideration with this model that may not be immediately obvious.</span></span> <span data-ttu-id="607c3-296">この例では、オンプレミスとの接続性を提供するために **hub-vnet** とのネットワーク ピアリング接続を要求したのは、**app1 ワークロード所有者**でした。</span><span class="sxs-lookup"><span data-stu-id="607c3-296">In the example, it was **app1 workload owner** that requested the network peering connection with the **hub-vnet** to provide connectivity to on-premises.</span></span> <span data-ttu-id="607c3-297">**ネットワーク操作**ユーザーは、そのワークロードでデプロイされたリソースに基づいてその要求を評価しました。</span><span class="sxs-lookup"><span data-stu-id="607c3-297">The **network operations** user evaluated that request based on the resources deployed with that workload.</span></span> <span data-ttu-id="607c3-298">**サブスクリプション所有者**が **app2 ワークロード所有者**を、**共同作成者**ロールと共に追加したとき、そのユーザーには、**prod-rg** リソース グループのすべてのリソースに対する管理アクセス権がありました。</span><span class="sxs-lookup"><span data-stu-id="607c3-298">When the **subscription owner** added **app2 workload owner** with the **contributor** role, that user had management access rights to all resources in the **prod-rg** resource group.</span></span>

![](../../_images/governance-3-10.png)

<span data-ttu-id="607c3-299">つまり、**app2 ワークロード所有者**には、**prod-vnet** 仮想ネットワーク内に、自身のサブネットと仮想マシンをデプロイするアクセス許可がありました。</span><span class="sxs-lookup"><span data-stu-id="607c3-299">This means **app2 workload owner** had permission to deploy their own subnet with virtual machines in the **prod-vnet** virtual network.</span></span> <span data-ttu-id="607c3-300">既定では、これで、それらの仮想マシンはオンプレミス ネットワークにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="607c3-300">By default, those virtual machines now have access to the on-premises network.</span></span> <span data-ttu-id="607c3-301">**ネットワーク操作**ユーザーは、これらのマシンを認識せず、そのマシンがオンプレミスに接続するのを承認しませんでした。</span><span class="sxs-lookup"><span data-stu-id="607c3-301">The **network operations** user is not aware of those machines and did not approve their connectivity to on-premises.</span></span>

<span data-ttu-id="607c3-302">次に、さまざまな環境やワークロードに対するリソース グループが複数含まれる 1 つのサブスクリプションを見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="607c3-302">Next, let's look at a single subscription with multiple resources groups for different environments and workloads.</span></span> <span data-ttu-id="607c3-303">前の例では、リソースは環境ごとに分かれ、同じ環境のリソースは同じリソース グループにあったため、各環境のリソースを簡単に特定できました。</span><span class="sxs-lookup"><span data-stu-id="607c3-303">Note that in the previous example, the resources for each environment were easily identifiable because they were in the same resource group.</span></span> <span data-ttu-id="607c3-304">そのグループ分けがなくなり、今後は、リソースを特定するために、リソース グループの名前付け規則を使用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-304">Now that you no longer have that grouping, you will have to rely on a resource group naming convention to provide that functionality.</span></span>

1. <span data-ttu-id="607c3-305">**共有インフラストラクチャ** リソースでは引き続きこのモデル内で個別のリソース グループが使用されるため、変更されません。</span><span class="sxs-lookup"><span data-stu-id="607c3-305">The **shared infrastructure** resources will still have a separate resource group in this model, so that remains the same.</span></span> <span data-ttu-id="607c3-306">ワークロードごとに 2 つのリソース グループが必要です。1 つは**開発**環境、もう 1 つは**運用**環境に対して使用されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-306">Each workload requires two resource groups - one for each of the **development** and **production** environments.</span></span> <span data-ttu-id="607c3-307">最初のワークロードに対して、**サブスクリプション所有者**は 2 つのリソース グループを作成します。</span><span class="sxs-lookup"><span data-stu-id="607c3-307">For the first workload, the **subscription owner** creates two resource groups.</span></span> <span data-ttu-id="607c3-308">1 つ目の名前は `app1-prod-rg`、2 つ目の名前は `app1-dev-rg` です。</span><span class="sxs-lookup"><span data-stu-id="607c3-308">The first is named `app1-prod-rg` and the second is named `app1-dev-rg`.</span></span> <span data-ttu-id="607c3-309">前に説明したように、この名前付け規則により、リソースが、最初のワークロード **app1** と、**dev** 環境または **prod** 環境のいずれかに関連付けられていることが特定されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-309">As discussed earlier, this naming convention identifies the resources as being associated with the first workload, **app1**, and either the **dev** or **prod** environment.</span></span> <span data-ttu-id="607c3-310">ここでも、"*サブスクリプション*" 所有者は、*app1 ワークロード所有者*を、**共同作成者**ロールと共にリソース グループに追加します。</span><span class="sxs-lookup"><span data-stu-id="607c3-310">Again, the *subscription* owner adds *app1 workload* owner to the resource group with the **contributor** role.</span></span>
    ![](../../_images/governance-3-12.png)
2. <span data-ttu-id="607c3-311">最初の例と同様、**app1 ワークロード所有者**が、**app1-prod-vnet** という名前の仮想ネットワークを**運用**環境に、もう 1 つの **app1-dev-vnet** という名前の仮想ネットワークを**開発**環境に追加します。</span><span class="sxs-lookup"><span data-stu-id="607c3-311">Similar to the first example, **app1 workload owner** deploys a virtual network named **app1-prod-vnet** to the **production** environment, and another named **app1-dev-vnet** to the **development** environment.</span></span> <span data-ttu-id="607c3-312">ここでも、**app1 ワークロード所有者**が、ピアリング接続の作成要求を**ネットワーク操作**ユーザーに送信します。</span><span class="sxs-lookup"><span data-stu-id="607c3-312">Again, **app1 workload owner** sends a request to the **network operations** user to create a peering connection.</span></span> <span data-ttu-id="607c3-313">**app1 ワークロード所有者**が、最初の例と同じタグを追加していることに注意してください。制限カウンターは、サブスクリプションに残っている仮想ネットワークの数を示す 997 に減少しています。</span><span class="sxs-lookup"><span data-stu-id="607c3-313">Note that **app1 workload owner** adds the same tags as in the first example, and the limit counter has been decremented to 997 virtual networks remaining in the subscription.</span></span>
    ![](../../_images/governance-3-13.png)
3. <span data-ttu-id="607c3-314">ここで、**サブスクリプション所有者**は、**app2 ワークロード所有者**に対して 2 つのリソース グループを作成します。</span><span class="sxs-lookup"><span data-stu-id="607c3-314">The **subscription owner** now creates two resource groups for **app2 workload owner**.</span></span> <span data-ttu-id="607c3-315">**app1 ワークロード所有者**と同じ規則に従って、リソース グループの名前は **app2-prod-rg** と **app2-dev-rg** となります。</span><span class="sxs-lookup"><span data-stu-id="607c3-315">Following the same conventions as for **app1 workload owner**, the resource groups are named **app2-prod-rg** and **app2-dev-rg**.</span></span> <span data-ttu-id="607c3-316">**サブスクリプション所有者**は、**app2 ワークロード所有者**を、**共同作成者**ロールと共に各リソース グループに追加します。</span><span class="sxs-lookup"><span data-stu-id="607c3-316">The **subscription owner** adds **app2 workload owner** to each of the resource groups with the **contributor** role.</span></span>
    ![](../../_images/governance-3-14.png)
4. <span data-ttu-id="607c3-317">"*app2 ワークロード所有者*" が、仮想ネットワークと仮想マシンを、同じ名前付け規則を持つリソース グループにデプロイします。</span><span class="sxs-lookup"><span data-stu-id="607c3-317">*App2 workload owner* deploys virtual networks and virtual machines to the resource groups with the same naming conventions.</span></span> <span data-ttu-id="607c3-318">タグが追加され、制限カウンターは、"*サブスクリプション*" に残っている仮想ネットワークの数を示す 995 に減少しています。</span><span class="sxs-lookup"><span data-stu-id="607c3-318">Tags are added and the limit counter has been decremented to 995 virtual networks remaining in the *subscription*.</span></span>
    ![](../../_images/governance-3-15.png)
5. <span data-ttu-id="607c3-319">"*app2 ワークロード所有者*" が、"*ネットワーク操作*" ユーザーに対して、*app2-prod-vnet* を *hub-vnet* にピアリングするよう要求します。</span><span class="sxs-lookup"><span data-stu-id="607c3-319">*App2 workload owner* sends a request to the *network operations* user to peer the *app2-prod-vnet* with the *hub-vnet*.</span></span> <span data-ttu-id="607c3-320">"*ネットワーク操作*" ユーザーは、ピアリング接続を作成します。</span><span class="sxs-lookup"><span data-stu-id="607c3-320">The *network operations* user creates the peering connection.</span></span>
    ![](../../_images/governance-3-16.png)

<span data-ttu-id="607c3-321">結果の管理モデルは最初の例と似ていますが、主に次のような違いがあります。</span><span class="sxs-lookup"><span data-stu-id="607c3-321">The resulting management model is similar to the first example, with several key differences:</span></span>

- <span data-ttu-id="607c3-322">2 つのワークロードはそれぞれ、ワークロードおよび環境によって分離されています。</span><span class="sxs-lookup"><span data-stu-id="607c3-322">Each of the two workloads is isolated by workload and by environment.</span></span>
- <span data-ttu-id="607c3-323">このモデルには、最初の例のモデルよりも仮想ネットワークが 2 つ多く必要です。</span><span class="sxs-lookup"><span data-stu-id="607c3-323">This model required two more virtual networks than the first example model.</span></span> <span data-ttu-id="607c3-324">ワークロードが 2 つだけなので、この違いは重要ではありませんが、このモデルのワークロード数の制限は理論的には 24 個です。</span><span class="sxs-lookup"><span data-stu-id="607c3-324">While this is not an important distinction with only two workloads, the theoretical limit on the number of workloads for this model is 24.</span></span>
- <span data-ttu-id="607c3-325">それぞれの環境に対応する 1 つのリソース グループに、リソースがグループ化されなくなりました。</span><span class="sxs-lookup"><span data-stu-id="607c3-325">Resources are no longer grouped in a single resource group for each environment.</span></span> <span data-ttu-id="607c3-326">リソースをグループ化するには、各環境に使用される名前付け規則を理解する必要があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-326">Grouping resources requires an understanding of the naming conventions used for each environment.</span></span>
- <span data-ttu-id="607c3-327">ピアリングされた各仮想ネットワーク接続が、"*ネットワーク操作*" ユーザーによって確認および承認されました。</span><span class="sxs-lookup"><span data-stu-id="607c3-327">Each of the peered virtual network connections was reviewed and approved by the *network operations* user.</span></span>

<span data-ttu-id="607c3-328">ここで、複数のサブスクリプションを使用したリソース管理モデルを見てみましょう。</span><span class="sxs-lookup"><span data-stu-id="607c3-328">Now let's look at a resource management model using multiple subscriptions.</span></span> <span data-ttu-id="607c3-329">このモデルでは、3 つの各環境を、**共有サービス** サブスクリプション、**運用**サブスクリプション、**開発**サブスクリプションの 3 つの個別のサブスクリプションと連携させます。</span><span class="sxs-lookup"><span data-stu-id="607c3-329">In this model, you'll align each of the three environments to a separate subscription: a **shared services** subscription, **production** subscription, and finally a **development** subscription.</span></span> <span data-ttu-id="607c3-330">このモデルに関する考慮事項は、リソース グループとワークロードを連携させる方法を決める必要がある点では、1 つのサブスクリプションを使用するモデルと似ています。</span><span class="sxs-lookup"><span data-stu-id="607c3-330">The considerations for this model are similar to a model using a single subscription in that you have to decide how to align resource groups to workloads.</span></span> <span data-ttu-id="607c3-331">ワークロードごとにリソース グループを作成すると、ワークロードの分離要件に対応できることは既に確認しました。したがって、この例では、そのモデルをそのまま使用します。</span><span class="sxs-lookup"><span data-stu-id="607c3-331">Already determined is that creating a resource group for each workload satisfies the workload isolation requirement, so you'll stick with that model in this example.</span></span>

1. <span data-ttu-id="607c3-332">このモデルには、"*共有インフラストラクチャ*"、"*運用*"、および "*開発*" の 3 つの "*サブスクリプション*" があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-332">In this model, there are three *subscriptions*: *shared infrastructure*, *production*, and *development*.</span></span> <span data-ttu-id="607c3-333">この 3 つのサブスクリプションそれぞれに、"*サブスクリプション所有者*" が必要で、このシンプルな例では、3 つすべてに同じユーザー アカウントを使用します。</span><span class="sxs-lookup"><span data-stu-id="607c3-333">Each of these three subscriptions requires a *subscription owner*, and in the simple example you'll use the same user account for all three.</span></span> <span data-ttu-id="607c3-334">"*共有インフラストラクチャ*" リソースは、上記の最初の 2 つの例と同じように管理されており、最初のワークロードは、"*運用*" 環境の *app1-rg*と、"*開発*" 環境の同じ名前のリソース グループに関連付けられています。</span><span class="sxs-lookup"><span data-stu-id="607c3-334">The *shared infrastructure* resources are managed similarly to the first two examples above, and the first workload is associated with the *app1-rg* in the *production* environment and the same-named resource group in the *development* environment.</span></span> <span data-ttu-id="607c3-335">"*app1 ワークロード所有者*" は、"*共同作成者*" ロールと共に各リソース グループに追加されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-335">The *app1 workload owner* is added to each of the resource group with the *contributor* role.</span></span>
    ![](../../_images/governance-3-17.png)
2. <span data-ttu-id="607c3-336">前の例と同様に、"*app1 ワークロード所有者*" がリソースを作成し、"*共有インフラストラクチャ*" 仮想ネットワークとのピアリング接続を要求します。</span><span class="sxs-lookup"><span data-stu-id="607c3-336">As with the earlier examples, *app1 workload owner* creates the resources and requests the peering connection with the *shared infrastructure* virtual network.</span></span> <span data-ttu-id="607c3-337">"*app1 ワークロード所有者*" は *managedBy* タグのみを追加します。*environment* タグは必要なくなったためです。</span><span class="sxs-lookup"><span data-stu-id="607c3-337">*App1 workload owner* adds only the *managedBy* tag because there is no longer a need for the *environment* tag.</span></span> <span data-ttu-id="607c3-338">つまり、各環境のリソースが同じ "*サブスクリプション*" にグループ化されるようになり、*environment* タグは不要です。</span><span class="sxs-lookup"><span data-stu-id="607c3-338">That is, resources are for each environment are now grouped in the same *subscription* and the *environment* tag is redundant.</span></span> <span data-ttu-id="607c3-339">制限カウンターは、残り 999 仮想ネットワークに減少します。</span><span class="sxs-lookup"><span data-stu-id="607c3-339">The limit counter is decremented to 999 virtual networks remaining.</span></span>
    ![](../../_images/governance-3-18.png)
3. <span data-ttu-id="607c3-340">最後に、"*サブスクリプション所有者*" は 2 つ目のワークロードに対して処理を繰り返して、共同作成者ロールで "*app2 ワークロード所有者*" を含むリソース グループを追加します。</span><span class="sxs-lookup"><span data-stu-id="607c3-340">Finally, the *subscription owner* repeats the process for the second workload, adding the resource groups with the *app2 workload owner* in the \*contributor role.</span></span> <span data-ttu-id="607c3-341">各環境サブスクリプションの制限カウンターは、残り 998 仮想ネットワークに減少します。</span><span class="sxs-lookup"><span data-stu-id="607c3-341">The limit counter for each of the environment subscriptions is decremented to 998 virtual networks remaining.</span></span>

<span data-ttu-id="607c3-342">この管理モデルには、上記の 2 番目の例で示した利点があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-342">This management model has the benefits of the second example above.</span></span> <span data-ttu-id="607c3-343">主な違いは、制限が 2 つの "*サブスクリプション*" に分散されるため、あまり問題にはならないという点です。</span><span class="sxs-lookup"><span data-stu-id="607c3-343">However, the key difference is that limits are less of an issue due to the fact that they are spread over two *subscriptions*.</span></span> <span data-ttu-id="607c3-344">欠点は、タグによって追跡されるコスト データを、3 つのすべての "*サブスクリプション*" にわたって集計する必要があることです。</span><span class="sxs-lookup"><span data-stu-id="607c3-344">The drawback is that the cost data tracked by tags must be aggregated across all three *subscriptions*.</span></span>

<span data-ttu-id="607c3-345">したがって、ご自身の要件の優先度に応じて、2 つのサンプル リソース管理モデルのいずれかを選択できます。</span><span class="sxs-lookup"><span data-stu-id="607c3-345">Therefore, you can select any of these two examples resource management models depending on the priority of your requirements.</span></span> <span data-ttu-id="607c3-346">皆様の組織で 1 つのサブスクリプションのサービス制限に到達しないと思われる場合は、複数のリソース グループを含む 1 つのサブスクリプションを使用できます。</span><span class="sxs-lookup"><span data-stu-id="607c3-346">If you anticipate that your organization will not reach the service limits for a single subscription, you can use a single subscription with multiple resource groups.</span></span> <span data-ttu-id="607c3-347">逆に、組織のワークロードが多くなりそうなときは、環境ごとに複数のサブスクリプションを使用することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="607c3-347">Conversely, if your organization anticipates many workloads, multiple subscriptions for each environment may be better.</span></span>

## <a name="implementing-the-resource-management-model"></a><span data-ttu-id="607c3-348">リソース管理モデルの実装</span><span class="sxs-lookup"><span data-stu-id="607c3-348">Implementing the resource management model</span></span>

<span data-ttu-id="607c3-349">Azure リソースへのアクセスを管理するためのモデルをいくつか取り上げて説明しました。</span><span class="sxs-lookup"><span data-stu-id="607c3-349">You've learned about several different models for governing access to Azure resources.</span></span> <span data-ttu-id="607c3-350">ここでは、設計ガイドの**共有インフラストラクチャ**環境、**運用**環境、**開発**環境それぞれに、1 つのサブスクリプションが含まれるリソース管理モデルを実装する手順を説明します。</span><span class="sxs-lookup"><span data-stu-id="607c3-350">Now you'll walk through the steps necessary to implement the resource management model with one subscription for each of the **shared infrastructure**, **production**, and **development** environments from the design guide.</span></span> <span data-ttu-id="607c3-351">この 3 つの環境すべてに 1 人の**サブスクリプション所有者**がいます。</span><span class="sxs-lookup"><span data-stu-id="607c3-351">You'll have one **subscription owner** for all three environments.</span></span> <span data-ttu-id="607c3-352">ワークロードはそれぞれ、**共同作成者**ロールと共に追加された**ワークロード所有者**を含む**リソース グループ**に分離されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-352">Each workload will be isolated in a **resource group** with a **workload owner** added with the **contributor** role.</span></span>

> [!NOTE]
> <span data-ttu-id="607c3-353">Azure アカウントとサブスクリプション間のリレーションシップの詳細については、[Azure でのリソース アクセス][understand-resource-access-in-azure]に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="607c3-353">Read [understanding resource access in Azure][understand-resource-access-in-azure] to learn more about the relationship between Azure Accounts and subscriptions.</span></span>

<span data-ttu-id="607c3-354">次の手順に従います。</span><span class="sxs-lookup"><span data-stu-id="607c3-354">Follow these steps:</span></span>

1. <span data-ttu-id="607c3-355">[Azure アカウント](/azure/active-directory/sign-up-organization)を作成します (まだ組織にない場合)。</span><span class="sxs-lookup"><span data-stu-id="607c3-355">Create an [Azure account](/azure/active-directory/sign-up-organization) if your organization doesn't already have one.</span></span> <span data-ttu-id="607c3-356">Azure アカウントにサインアップしたユーザーは、Azure アカウント管理者になります。また、組織の指導者は、このロールを担う個人を選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="607c3-356">The person who signs up for the Azure account becomes the Azure account administrator, and your organization's leadership must select an individual to assume this role.</span></span> <span data-ttu-id="607c3-357">この個人は、次を担当します。</span><span class="sxs-lookup"><span data-stu-id="607c3-357">This individual will be responsible for:</span></span>
    - <span data-ttu-id="607c3-358">サブスクリプションの作成。</span><span class="sxs-lookup"><span data-stu-id="607c3-358">Creating subscriptions, and</span></span>
    - <span data-ttu-id="607c3-359">これらのサブスクリプションのユーザー ID が格納される [Azure Active Directory (AD)](/azure/active-directory/active-directory-whatis) テナントの作成と管理。</span><span class="sxs-lookup"><span data-stu-id="607c3-359">Creating and administering [Azure Active Directory (AD)](/azure/active-directory/active-directory-whatis) tenants that store user identity for those subscriptions.</span></span>
2. <span data-ttu-id="607c3-360">ご自身の組織の指導チームは、次の作業を行う担当者を決めます。</span><span class="sxs-lookup"><span data-stu-id="607c3-360">Your organization's leadership team decides which people are responsible for:</span></span>
    - <span data-ttu-id="607c3-361">ユーザー ID の管理。ご自身の組織の Azure アカウントの作成時に [Azure AD テナント](/azure/active-directory/develop/active-directory-howto-tenant)が既定で作成されます。アカウント管理者は、[Azure AD グローバル管理者](/azure/active-directory/active-directory-assign-admin-roles-azure-portal#details-about-the-global-administrator-role)として既定で追加されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-361">Management of user identity; an [Azure AD tenant](/azure/active-directory/develop/active-directory-howto-tenant) is created by default when your organization's Azure Account is created, and the account administrator is added as the [Azure AD global administrator](/azure/active-directory/active-directory-assign-admin-roles-azure-portal#details-about-the-global-administrator-role) by default.</span></span> <span data-ttu-id="607c3-362">ご自身の組織がユーザー ID 管理の担当者として別のユーザーを選択するには、[そのユーザーに Azure AD グローバル管理者ロールを割り当て](/azure/active-directory/active-directory-users-assign-role-azure-portal)ます。</span><span class="sxs-lookup"><span data-stu-id="607c3-362">Your organization can choose another user to manage user identity by [assigning the Azure AD global administrator role to that user](/azure/active-directory/active-directory-users-assign-role-azure-portal).</span></span>
    - <span data-ttu-id="607c3-363">サブスクリプション。これらのユーザーは次を行います。</span><span class="sxs-lookup"><span data-stu-id="607c3-363">Subscriptions, which means these users:</span></span>
        - <span data-ttu-id="607c3-364">そのサブスクリプションのリソース使用量に関連付けられているコストの管理。</span><span class="sxs-lookup"><span data-stu-id="607c3-364">Manage costs associated with resource usage in that subscription,</span></span>
        - <span data-ttu-id="607c3-365">リソース アクセスのための最小限のアクセス許可モデルの実装と維持。</span><span class="sxs-lookup"><span data-stu-id="607c3-365">Implement and maintain least permission model for resource access, and</span></span>
        - <span data-ttu-id="607c3-366">サービス制限の追跡。</span><span class="sxs-lookup"><span data-stu-id="607c3-366">Keep track of service limits.</span></span>
    - <span data-ttu-id="607c3-367">共有インフラストラクチャ サービス (ご自身の組織がこのモデルの使用を決めた場合)。このユーザーは次を担当します。</span><span class="sxs-lookup"><span data-stu-id="607c3-367">Shared infrastructure services (if your organization decides to use this model), which means this user is responsible for:</span></span>
        - <span data-ttu-id="607c3-368">オンプレミスと Azure ネットワークの接続。</span><span class="sxs-lookup"><span data-stu-id="607c3-368">On-premises to Azure network connectivity, and</span></span>
        - <span data-ttu-id="607c3-369">Azure 内での仮想ネットワーク ピアリング経由のネットワーク接続の所有権。</span><span class="sxs-lookup"><span data-stu-id="607c3-369">Ownership of network connectivity within Azure through virtual network peering.</span></span>
    - <span data-ttu-id="607c3-370">ワークロード所有者。</span><span class="sxs-lookup"><span data-stu-id="607c3-370">Workload owners.</span></span>
3. <span data-ttu-id="607c3-371">Azure AD グローバル管理者は、次に対する[ユーザー アカウントを新しく作成](/azure/active-directory/add-users-azure-active-directory)します。</span><span class="sxs-lookup"><span data-stu-id="607c3-371">The Azure AD global administrator [creates the new user accounts](/azure/active-directory/add-users-azure-active-directory) for:</span></span>
    - <span data-ttu-id="607c3-372">各環境に関連付けられている各サブスクリプションの**サブスクリプション所有者**になる人。</span><span class="sxs-lookup"><span data-stu-id="607c3-372">The person who will be the **subscription owner** for each subscription associated with each environment.</span></span> <span data-ttu-id="607c3-373">これは、サブスクリプション **サービス管理者**に、各サブスクリプション/環境のリソース アクセス管理のタスクが割り当てられない場合にのみ必要です。</span><span class="sxs-lookup"><span data-stu-id="607c3-373">Note that this is necessary only if the subscription **service administrator** will not be tasked with managing resource access for each subscription/environment.</span></span>
    - <span data-ttu-id="607c3-374">**ネットワーク操作ユーザー**になる人。</span><span class="sxs-lookup"><span data-stu-id="607c3-374">The person who will be the **network operations user**, and</span></span>
    - <span data-ttu-id="607c3-375">**ワークロード所有者**になる人。</span><span class="sxs-lookup"><span data-stu-id="607c3-375">The people who are **workload owners**.</span></span>
4. <span data-ttu-id="607c3-376">Azure アカウント管理者は、[Azure アカウント ポータル](https://account.azure.com)を使用して、次の 3 つのサブスクリプションを作成します。</span><span class="sxs-lookup"><span data-stu-id="607c3-376">The Azure account administrator creates the following three subscriptions using the [Azure account portal](https://account.azure.com):</span></span>
    - <span data-ttu-id="607c3-377">**共有インフラストラクチャ**環境のサブスクリプション。</span><span class="sxs-lookup"><span data-stu-id="607c3-377">A subscription for the **shared infrastructure** environment,</span></span>
    - <span data-ttu-id="607c3-378">**運用**環境のサブスクリプション。</span><span class="sxs-lookup"><span data-stu-id="607c3-378">A subscription for the **production** environment, and</span></span>
    - <span data-ttu-id="607c3-379">**開発**環境のサブスクリプション。</span><span class="sxs-lookup"><span data-stu-id="607c3-379">A subscription for the **development** environment.</span></span>
5. <span data-ttu-id="607c3-380">Azure アカウント管理者は、[サブスクリプション サービス所有者を各サブスクリプションに追加](/azure/billing/billing-add-change-azure-subscription-administrator#add-an-rbac-owner-admin-for-a-subscription-in-azure-portal)します。</span><span class="sxs-lookup"><span data-stu-id="607c3-380">The Azure account administrator [adds the subscription service owner to each subscription](/azure/billing/billing-add-change-azure-subscription-administrator#add-an-rbac-owner-admin-for-a-subscription-in-azure-portal).</span></span>
6. <span data-ttu-id="607c3-381">**ワークロード所有者**の承認プロセスを作成して、リソース グループの作成を要求します。</span><span class="sxs-lookup"><span data-stu-id="607c3-381">Create an approval process for **workload owners** to request the creation of resource groups.</span></span> <span data-ttu-id="607c3-382">承認プロセスは、さまざまな方法で実装できます。たとえば、電子メールや、[SharePoint ワークフロー](https://support.office.com/article/introduction-to-sharepoint-workflow-07982276-54e8-4e17-8699-5056eff4d9e3)などのプロセス管理ツールを使用できます。</span><span class="sxs-lookup"><span data-stu-id="607c3-382">The approval process can be implemented in many ways, such as over email, or you can using a process management tool such as [SharePoint workflows](https://support.office.com/article/introduction-to-sharepoint-workflow-07982276-54e8-4e17-8699-5056eff4d9e3).</span></span> <span data-ttu-id="607c3-383">承認プロセスでは、次の手順に従うことができます。</span><span class="sxs-lookup"><span data-stu-id="607c3-383">The approval process can follow these steps:</span></span>
    - <span data-ttu-id="607c3-384">**ワークロード所有者**は、**開発**環境、**運用**環境、またはその両方で、必要な Azure リソースの部品表を準備して、**サブスクリプション所有者**に送信します。</span><span class="sxs-lookup"><span data-stu-id="607c3-384">The **workload owner** prepares a bill of materials for required Azure resources in either the **development** environment, **production** environment, or both, and submits it to the **subscription owner**.</span></span>
    - <span data-ttu-id="607c3-385">**サブスクリプション所有者**は部品表を確認し、要求されたリソースを検証して、そのリソースが計画的な使用に適していることを確かめます。たとえば、要求された[仮想マシンのサイズ](/azure/virtual-machines/windows/sizes)が正しいことをチェックします。</span><span class="sxs-lookup"><span data-stu-id="607c3-385">The **subscription owner** reviews the bill of materials and validates the requested resources to ensure that the requested resources are appropriate for their planned use - for example, checking that the requested [virtual machine sizes](/azure/virtual-machines/windows/sizes) are correct.</span></span>
    - <span data-ttu-id="607c3-386">要求が承認されなかった場合は、**ワークロード所有者**に通知されます。</span><span class="sxs-lookup"><span data-stu-id="607c3-386">If the request is not approved, the **workload owner** is notified.</span></span> <span data-ttu-id="607c3-387">要求が承認された場合、**サブスクリプション所有者**は、自分の組織の[名前付け規則](/azure/architecture/best-practices/naming-conventions)に従って[要求されたリソース グループを作成](/azure/azure-resource-manager/resource-group-portal#manage-resource-groups)し、[**共同作成者**ロール](/azure/role-based-access-control/built-in-roles#contributor)と共に[**ワークロード所有者**を追加](/azure/role-based-access-control/role-assignments-portal#add-access)して、リソース グループが作成されたことを**ワークロード所有者**に通知します。</span><span class="sxs-lookup"><span data-stu-id="607c3-387">If the request is approved, the **subscription owner** [creates the requested resource group](/azure/azure-resource-manager/resource-group-portal#manage-resource-groups) following your organization's [naming conventions](/azure/architecture/best-practices/naming-conventions), [adds the **workload owner**](/azure/role-based-access-control/role-assignments-portal#add-access) with the [**contributor** role](/azure/role-based-access-control/built-in-roles#contributor) and sends notification to the **workload owner** that the resource group has been created.</span></span>
7. <span data-ttu-id="607c3-388">ワークロード所有者の承認プロセスを作成して、仮想ネットワーク ピアリング接続を共有インフラストラクチャ所有者に要求します。</span><span class="sxs-lookup"><span data-stu-id="607c3-388">Create an approval process for workload owners to request a virtual network peering connection from the shared infrastructure owner.</span></span> <span data-ttu-id="607c3-389">前の手順と同様に、この承認プロセスは、電子メールまたはプロセス管理ツールを使用して実装できます。</span><span class="sxs-lookup"><span data-stu-id="607c3-389">As with the previous step, this approval process can be implemented using email or a process management tool.</span></span>

<span data-ttu-id="607c3-390">ガバナンス モデルが実装されたので、共有インフラストラクチャ サービスをデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="607c3-390">Now that you've implemented your governance model, you can deploy your shared infrastructure services.</span></span>

## <a name="next-steps"></a><span data-ttu-id="607c3-391">次の手順</span><span class="sxs-lookup"><span data-stu-id="607c3-391">Next steps</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="607c3-392">基本的なインフラストラクチャのデプロイについて確認する</span><span class="sxs-lookup"><span data-stu-id="607c3-392">Learn about deploying a basic infrastructure</span></span>](../../infrastructure/basic-workload.md)

<!-- links -->
[understand-resource-access-in-azure]: /azure/role-based-access-control/rbac-and-directory-admin-roles

[rbac-built-in-owner]: /azure/role-based-access-control/built-in-roles#owner
[rbac-built-in-roles]: /azure/role-based-access-control/built-in-roles
