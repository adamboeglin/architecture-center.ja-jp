---
title: スケーラブルな注文処理
titleSuffix: Azure Example Scenarios
description: Azure Cosmos DB を使用して高度にスケーラブルな注文処理パイプラインを構築します。
author: alexbuckgit
ms.date: 07/10/2018
ms.topic: example-scenario
ms.service: architecture-center
ms.subservice: example-scenario
ms.custom: fasttrack
social_image_url: /azure/architecture/example-scenario/data/media/architecture-ecommerce-order-processing.png
ms.openlocfilehash: d7e723e67e021510076c0e97083687e807798a1b
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/20/2019
ms.locfileid: "58246233"
---
# <a name="scalable-order-processing-on-azure"></a><span data-ttu-id="556b8-103">Azure でのスケーラブルな注文処理</span><span class="sxs-lookup"><span data-stu-id="556b8-103">Scalable order processing on Azure</span></span>

<span data-ttu-id="556b8-104">このサンプル シナリオは、オンライン注文処理のために拡張性と回復性の高いアーキテクチャを必要とする組織に関連します。</span><span class="sxs-lookup"><span data-stu-id="556b8-104">This example scenario is relevant to organizations that need a highly scalable and resilient architecture for online order processing.</span></span> <span data-ttu-id="556b8-105">考えられる用途としては、eコマースと小売販売管理、受注処理、および在庫予約と追跡が挙げられます。</span><span class="sxs-lookup"><span data-stu-id="556b8-105">Potential applications include e-commerce and retail point-of-sale, order fulfillment, and inventory reservation and tracking.</span></span>

<span data-ttu-id="556b8-106">このシナリオのイベント ソーシング アプローチでは、マイクロサービスを介して実装される関数型プログラミング モデルが使用されています。</span><span class="sxs-lookup"><span data-stu-id="556b8-106">This scenario takes an event sourcing approach, using a functional programming model implemented via microservices.</span></span> <span data-ttu-id="556b8-107">各マイクロサービスがストリーム プロセッサとして扱われ、すべてのビジネス ロジックがマイクロサービスを使って実装されます。</span><span class="sxs-lookup"><span data-stu-id="556b8-107">Each microservice is treated as a stream processor, and all business logic is implemented via microservices.</span></span> <span data-ttu-id="556b8-108">このアプローチにより、高可用性と回復性、geo レプリケーション、および高速なパフォーマンスが実現します。</span><span class="sxs-lookup"><span data-stu-id="556b8-108">This approach enables high availability and resiliency, geo-replication, and fast performance.</span></span>

<span data-ttu-id="556b8-109">Cosmos DB、HDInsight などのマネージド Azure サービスを使用して、クラウド規模のグローバル分散データ ストレージおよび取得における Microsoft の専門知識を活用すると、コスト削減に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="556b8-109">Using managed Azure services such as Cosmos DB and HDInsight can help reduce costs by leveraging Microsoft's expertise in globally distributed cloud-scale data storage and retrieval.</span></span> <span data-ttu-id="556b8-110">このシナリオでは、特に eコマースと小売のシナリオを扱っています。データ サービスについて他のニーズがある場合は、使用可能な [Azure のフル マネージドのインテリジェント データベース サービス][product-category]の一覧を確認する必要があります。</span><span class="sxs-lookup"><span data-stu-id="556b8-110">This scenario specifically addresses an e-commerce or retail scenario; if you have other needs for data services, you should review the list of available [fully managed intelligent database services in Azure][product-category].</span></span>

## <a name="relevant-use-cases"></a><span data-ttu-id="556b8-111">関連するユース ケース</span><span class="sxs-lookup"><span data-stu-id="556b8-111">Relevant use cases</span></span>

<span data-ttu-id="556b8-112">その他の関連するユース ケース:</span><span class="sxs-lookup"><span data-stu-id="556b8-112">Other relevant use cases include:</span></span>

- <span data-ttu-id="556b8-113">eコマースまたは小売販売管理のバックエンド システム。</span><span class="sxs-lookup"><span data-stu-id="556b8-113">E-commerce or retail point-of-sale back-end systems.</span></span>
- <span data-ttu-id="556b8-114">在庫管理システム。</span><span class="sxs-lookup"><span data-stu-id="556b8-114">Inventory management systems.</span></span>
- <span data-ttu-id="556b8-115">受注システム。</span><span class="sxs-lookup"><span data-stu-id="556b8-115">Order fulfillment systems.</span></span>
- <span data-ttu-id="556b8-116">注文処理パイプラインに関連する他の統合シナリオ。</span><span class="sxs-lookup"><span data-stu-id="556b8-116">Other integration scenarios relevant to an order processing pipeline.</span></span>

## <a name="architecture"></a><span data-ttu-id="556b8-117">アーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="556b8-117">Architecture</span></span>

![スケーラブルな注文処理パイプラインのアーキテクチャの例][architecture]

<span data-ttu-id="556b8-119">このアーキテクチャは、注文処理パイプラインの主要コンポーネントの詳細を示しています。</span><span class="sxs-lookup"><span data-stu-id="556b8-119">This architecture details key components of an order processing pipeline.</span></span> <span data-ttu-id="556b8-120">このシナリオのデータ フローは次のとおりです。</span><span class="sxs-lookup"><span data-stu-id="556b8-120">The data flows through the scenario as follows:</span></span>

1. <span data-ttu-id="556b8-121">イベント メッセージが、顧客向けアプリケーションを介して (HTTP 経由で同期的に) システムに届きます。また、さまざまなバックエンド システムに (Apache Kafka 経由で非同期的に) 届きます。</span><span class="sxs-lookup"><span data-stu-id="556b8-121">Event messages enter the system via customer-facing applications (synchronously over HTTP) and various back-end systems (asynchronously via Apache Kafka).</span></span> <span data-ttu-id="556b8-122">これらのメッセージは、コマンド処理パイプラインに渡されます。</span><span class="sxs-lookup"><span data-stu-id="556b8-122">These messages are passed into a command processing pipeline.</span></span>
2. <span data-ttu-id="556b8-123">各イベント メッセージが取り込まれ、コマンド プロセッサ マイクロサービスによって定義された一連のコマンドのいずれかにマップされます。</span><span class="sxs-lookup"><span data-stu-id="556b8-123">Each event message is ingested and mapped to one of a defined set of commands by a command processor microservice.</span></span> <span data-ttu-id="556b8-124">コマンド プロセッサは、イベント ストリームのスナップショット データベースからのコマンド実行に関連する現在の状態を取得します。</span><span class="sxs-lookup"><span data-stu-id="556b8-124">The command processor retrieves any current state relevant to executing the command from an event stream snapshot database.</span></span> <span data-ttu-id="556b8-125">その後、コマンドが実行され、そのコマンドの出力が新しいイベントとして生成されます。</span><span class="sxs-lookup"><span data-stu-id="556b8-125">The command is then executed, and the output of the command is emitted as a new event.</span></span>
3. <span data-ttu-id="556b8-126">コマンドの出力として生成された各イベントが、Cosmos DB を使用して、イベント ストリームのデータベースにコミットされます。</span><span class="sxs-lookup"><span data-stu-id="556b8-126">Each event emitted as the output of a command is committed to an event stream database using Cosmos DB.</span></span>
4. <span data-ttu-id="556b8-127">イベント ストリームのデータベースにコミットされたデータベース挿入または更新ごとに、Cosmos DB Change Feed によってイベントが発生します。</span><span class="sxs-lookup"><span data-stu-id="556b8-127">For each database insert or update committed to the event stream database, an event is raised by the Cosmos DB Change Feed.</span></span> <span data-ttu-id="556b8-128">そのシステムに関連するすべてのイベント トピックに、ダウンストリーム システムがサブスクライブできます。</span><span class="sxs-lookup"><span data-stu-id="556b8-128">Downstream systems can subscribe to any event topics that are relevant to that system.</span></span>
5. <span data-ttu-id="556b8-129">Cosmos DB Change Feed からのイベントもすべて、スナップショット イベント ストリームのマイクロサービスに送信されます。これにより、発生したイベントによるすべての状態の変更が計算されます。</span><span class="sxs-lookup"><span data-stu-id="556b8-129">All events from the Cosmos DB Change Feed are also sent to a snapshot event stream microservice, which calculates any state changes caused by events that have occurred.</span></span> <span data-ttu-id="556b8-130">その後、新しい状態が、Cosmos DB に格納されているイベント ストリームのスナップショット データベースにコミットされます。</span><span class="sxs-lookup"><span data-stu-id="556b8-130">The new state is then committed to the event stream snapshot database stored in Cosmos DB.</span></span> <span data-ttu-id="556b8-131">スナップショット データベースは、現在の状態のすべてのデータ要素に対して、待機時間の短いグローバル分散データ ソースを提供します。</span><span class="sxs-lookup"><span data-stu-id="556b8-131">The snapshot database provides a globally distributed, low latency data source for the current state of all data elements.</span></span> <span data-ttu-id="556b8-132">イベント ストリームのデータベースは、アーキテクチャを介して渡されるすべてのイベント メッセージの完全なレコードを提供することで、堅牢なテスト、トラブルシューティング、およびディザスター リカバリーのシナリオを有効にします。</span><span class="sxs-lookup"><span data-stu-id="556b8-132">The event stream database provides a complete record of all event messages that have passed through the architecture, which enables robust testing, troubleshooting, and disaster recovery scenarios.</span></span>

### <a name="components"></a><span data-ttu-id="556b8-133">コンポーネント</span><span class="sxs-lookup"><span data-stu-id="556b8-133">Components</span></span>

- <span data-ttu-id="556b8-134">[Cosmos DB](/azure/cosmos-db/introduction) は Microsoft のグローバル分散マルチモデル データベースです。これにより、ソリューションでは、スループットとストレージを、任意の数の地理的リージョンで柔軟かつ個別にスケーリングできるようになります。</span><span class="sxs-lookup"><span data-stu-id="556b8-134">[Cosmos DB](/azure/cosmos-db/introduction) is Microsoft's globally distributed, multi-model database that enables your solutions to elastically and independently scale throughput and storage across any number of geographic regions.</span></span> <span data-ttu-id="556b8-135">このサービスは包括的なサービス レベル アグリーメント (SLA) により、スループット、待機時間、可用性、一貫性が保証されています。</span><span class="sxs-lookup"><span data-stu-id="556b8-135">It offers throughput, latency, availability, and consistency guarantees with comprehensive service level agreements (SLAs).</span></span> <span data-ttu-id="556b8-136">このシナリオでは、イベント ストリーム ストレージおよびスナップショット ストレージに Cosmos DB を使用し、[Cosmos DB の Change Feed][docs-cosmos-db-change-feed] 機能を利用して、データの一貫性と障害からの復旧を実現します。</span><span class="sxs-lookup"><span data-stu-id="556b8-136">This scenario uses Cosmos DB for event stream storage and snapshot storage, and leverages [Cosmos DB's Change Feed][docs-cosmos-db-change-feed] features to provide data consistency and fault recovery.</span></span>
- <span data-ttu-id="556b8-137">[HDInsight 上の Apache Kafka](/azure/hdinsight/kafka/apache-kafka-introduction) は、リアルタイムのストリーミング データ パイプラインとアプリケーションを構築するための、オープン ソースの分散ストリーム プラットフォームである Apache Kafka のマネージド サービス実装です。</span><span class="sxs-lookup"><span data-stu-id="556b8-137">[Apache Kafka on HDInsight](/azure/hdinsight/kafka/apache-kafka-introduction) is a managed service implementation of Apache Kafka, an open-source distributed streaming platform for building real-time streaming data pipelines and applications.</span></span> <span data-ttu-id="556b8-138">Kafka は、名前付きデータ ストリームへの公開とサブスクライブのために、メッセージ キューと同様のメッセージ ブローカー機能も提供しています。</span><span class="sxs-lookup"><span data-stu-id="556b8-138">Kafka also provides message broker functionality similar to a message queue, for publishing and subscribing to named data streams.</span></span> <span data-ttu-id="556b8-139">このシナリオでは、Kafka を使用して、注文処理パイプラインの受信およびダウンストリーム イベントを処理します。</span><span class="sxs-lookup"><span data-stu-id="556b8-139">This scenario uses Kafka to process incoming as well as downstream events in the order processing pipeline.</span></span>

## <a name="considerations"></a><span data-ttu-id="556b8-140">考慮事項</span><span class="sxs-lookup"><span data-stu-id="556b8-140">Considerations</span></span>

<span data-ttu-id="556b8-141">リアルタイム メッセージ インジェスト、データ ストレージ、ストリーム処理、分析データのストレージ、および分析とレポート作成では、使用できるテクノロジ オプションが多数あります。</span><span class="sxs-lookup"><span data-stu-id="556b8-141">Many technology options are available for real-time message ingestion, data storage, stream processing, storage of analytical data, and analytics and reporting.</span></span> <span data-ttu-id="556b8-142">これらのオプションやその機能、主要な選択条件の概要については、「[ビッグ データ アーキテクチャ:リアルタイム処理](/azure/architecture/data-guide/technology-choices/real-time-ingestion)」([Azure データ アーキテクチャ ガイド](/azure/architecture/data-guide)内) をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="556b8-142">For an overview of these options, their capabilities, and key selection criteria, see [Big data architectures: Real-time processing](/azure/architecture/data-guide/technology-choices/real-time-ingestion) in the [Azure Data Architecture Guide](/azure/architecture/data-guide).</span></span>

<span data-ttu-id="556b8-143">現在、マイクロサービスは、回復性優れ、単独でのデプロイが可能で、迅速に展開できるスケーラブルなクラウド アプリケーションを構築するための一般的なアーキテクチャ スタイルになっています。</span><span class="sxs-lookup"><span data-stu-id="556b8-143">Microservices have become a popular architectural style for building cloud applications that are resilient, highly scalable, independently deployable, and able to evolve quickly.</span></span> <span data-ttu-id="556b8-144">マイクロサービスには、アプリケーションを設計およびビルドするのためのさまざまなアプローチが必要です。</span><span class="sxs-lookup"><span data-stu-id="556b8-144">Microservices require a different approach to designing and building applications.</span></span> <span data-ttu-id="556b8-145">Docker、Kubernetes、Azure Service Fabric、Nomad などのツールを使用すると、マイクロサービス ベースのアーキテクチャを開発できます。</span><span class="sxs-lookup"><span data-stu-id="556b8-145">Tools such as Docker, Kubernetes, Azure Service Fabric, and Nomad enable the development of microservices-based architectures.</span></span> <span data-ttu-id="556b8-146">マイクロサービス ベースのアーキテクチャの構築とガイダンスについては、Azure アーキテクチャ センターの [Azure でのマイクロサービスの設計](/azure/architecture/microservices)に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="556b8-146">For guidance on building and running a microservices-based architecture, see [Designing microservices on Azure](/azure/architecture/microservices) in the Azure Architecture Center.</span></span>

### <a name="availability"></a><span data-ttu-id="556b8-147">可用性</span><span class="sxs-lookup"><span data-stu-id="556b8-147">Availability</span></span>

<span data-ttu-id="556b8-148">このシナリオのイベント ソーシング アプローチを使用すると、システム コンポーネントの疎結合が可能になり、それぞれ個別にデプロイできます。</span><span class="sxs-lookup"><span data-stu-id="556b8-148">This scenario's event sourcing approach allows system components to be loosely coupled and deployed independently of one another.</span></span> <span data-ttu-id="556b8-149">Cosmos DB により[高可用性][docs-cosmos-db-regional-failover]が実現します。また、Cosmos DB は、組織が一貫性、可用性、パフォーマンスと関連するトレードオフを、それぞれに[対応する保証][docs-cosmos-db-guarantees]と共に、管理する際に役立ちます。</span><span class="sxs-lookup"><span data-stu-id="556b8-149">Cosmos DB offers [high availability][docs-cosmos-db-regional-failover] and helps organization manage the tradeoffs associated with consistency, availability, and performance, all with [corresponding guarantees][docs-cosmos-db-guarantees].</span></span> <span data-ttu-id="556b8-150">HDInsight 上の Apache Kafka も、[高可用性][docs-kafka-high-availability]を確保できるよう設計されています。</span><span class="sxs-lookup"><span data-stu-id="556b8-150">Apache Kafka on HDInsight is also designed for [high availability][docs-kafka-high-availability].</span></span>

<span data-ttu-id="556b8-151">Azure Monitor には、さまざまな Azure サービスにわたって監視するための統合ユーザー インターフェイスが用意されています。</span><span class="sxs-lookup"><span data-stu-id="556b8-151">Azure Monitor provides unified user interfaces for monitoring across various Azure services.</span></span> <span data-ttu-id="556b8-152">詳細については、[Microsoft Azure での監視](/azure/monitoring-and-diagnostics/monitoring-overview)に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="556b8-152">For more information, see [Monitoring in Microsoft Azure](/azure/monitoring-and-diagnostics/monitoring-overview).</span></span> <span data-ttu-id="556b8-153">Event Hubs と Stream Analytics は両方とも、Azure Monitor に統合されています。</span><span class="sxs-lookup"><span data-stu-id="556b8-153">Event Hubs and Stream Analytics are both integrated with Azure Monitor.</span></span>

<span data-ttu-id="556b8-154">その他の可用性の考慮事項については、[可用性のチェックリスト][availability]を参照してください。</span><span class="sxs-lookup"><span data-stu-id="556b8-154">For other availability considerations, see the [availability checklist][availability].</span></span>

### <a name="scalability"></a><span data-ttu-id="556b8-155">スケーラビリティ</span><span class="sxs-lookup"><span data-stu-id="556b8-155">Scalability</span></span>

<span data-ttu-id="556b8-156">HDInsight 上の Kafka を使用すると、Kafka クラスターの[ストレージとスケーラビリティを構成](/azure/hdinsight/kafka/apache-kafka-scalability)できます。</span><span class="sxs-lookup"><span data-stu-id="556b8-156">Kafka on HDInsight allows [configuration of storage and scalability](/azure/hdinsight/kafka/apache-kafka-scalability) for Kafka clusters.</span></span> <span data-ttu-id="556b8-157">Cosmos DB により、予測したとおりのパフォーマンスを迅速に確保し、アプリケーションの成長に合わせて[シームレスにスケーリング](/azure/cosmos-db/partition-data)できます。</span><span class="sxs-lookup"><span data-stu-id="556b8-157">Cosmos DB provides fast, predictable performance and [scales seamlessly](/azure/cosmos-db/partition-data) as your application grows.</span></span>
<span data-ttu-id="556b8-158">このシナリオのイベント ソーシング マイクロサービス ベースのアーキテクチャでも、システムのスケーリングとその機能の拡張が行いやすくなります。</span><span class="sxs-lookup"><span data-stu-id="556b8-158">The event sourcing microservices-based architecture of this scenario also makes it easier to scale your system and expand its functionality.</span></span>

<span data-ttu-id="556b8-159">スケーラビリティに関する考慮事項については、Azure アーキテクチャ センターの[スケーラビリティのチェックリスト][scalability]を参照してください。</span><span class="sxs-lookup"><span data-stu-id="556b8-159">For other scalability considerations, see the [scalability checklist][scalability] available in the Azure Architecture Center.</span></span>

### <a name="security"></a><span data-ttu-id="556b8-160">セキュリティ</span><span class="sxs-lookup"><span data-stu-id="556b8-160">Security</span></span>

<span data-ttu-id="556b8-161">[Cosmos DB セキュリティ モデル](/azure/cosmos-db/secure-access-to-data)では、ユーザーを認証し、そのデータとリソースへのアクセスを提供しています。</span><span class="sxs-lookup"><span data-stu-id="556b8-161">The [Cosmos DB security model](/azure/cosmos-db/secure-access-to-data) authenticates users and provides access to its data and resources.</span></span> <span data-ttu-id="556b8-162">詳細については、[Cosmos DB のデータ セキュリティ](/azure/cosmos-db/database-security)に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="556b8-162">For more information, see [Cosmos DB database security](/azure/cosmos-db/database-security).</span></span>

<span data-ttu-id="556b8-163">セキュリティで保護されたソリューションの設計に関する一般的なガイダンスについては、「[Azure のセキュリティのドキュメント][security]」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="556b8-163">For general guidance on designing secure solutions, see the [Azure Security Documentation][security].</span></span>

### <a name="resiliency"></a><span data-ttu-id="556b8-164">回復性</span><span class="sxs-lookup"><span data-stu-id="556b8-164">Resiliency</span></span>

<span data-ttu-id="556b8-165">このサンプル シナリオのイベント ソーシング アーキテクチャと関連テクノロジにより、障害発生時に高い回復性が実現します。</span><span class="sxs-lookup"><span data-stu-id="556b8-165">The event sourcing architecture and associated technologies in this example scenario make this scenario highly resilient when failures occur.</span></span> <span data-ttu-id="556b8-166">回復性に優れたソリューションの設計に関する一般的なガイダンスについては、「[回復性に優れた Azure 用アプリケーションの設計][resiliency]」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="556b8-166">For general guidance on designing resilient solutions, see [Designing resilient applications for Azure][resiliency].</span></span>

## <a name="pricing"></a><span data-ttu-id="556b8-167">価格</span><span class="sxs-lookup"><span data-stu-id="556b8-167">Pricing</span></span>

<span data-ttu-id="556b8-168">このシナリオの実行コストを調べることができるように、すべてのサービスがコスト計算ツールで事前構成されています。</span><span class="sxs-lookup"><span data-stu-id="556b8-168">To examine the cost of running this scenario, all of the services are pre-configured in the cost calculator.</span></span> <span data-ttu-id="556b8-169">特定のシナリオについて価格の変化を確認するには、予想されるデータ ボリュームに合わせて該当する変数を変更します。</span><span class="sxs-lookup"><span data-stu-id="556b8-169">To see how pricing would change for your particular scenario, change the appropriate variables to match your expected data volume.</span></span> <span data-ttu-id="556b8-170">このシナリオで価格の例に含まれるのは、Cosmos DB Change Feed から生成されたイベントを処理するための Cosmos DB と Kafka クラスターのみです。</span><span class="sxs-lookup"><span data-stu-id="556b8-170">For this scenario, the example pricing includes only Cosmos DB and a Kafka cluster for processing events raised from the Cosmos DB Change Feed.</span></span> <span data-ttu-id="556b8-171">送信元システムと他のダウンストリーム システムのイベント プロセッサおよびマイクロサービスは含まれず、そのコストは、これらのサービスと、そのサービスを実装するために選択されたテクノロジの数量とスケールによって大きく異なります。</span><span class="sxs-lookup"><span data-stu-id="556b8-171">Event processors and microservices for originating systems and other downstream systems are not included, and their cost is highly dependent on the quantity and scale of these services as well as the technologies chosen for implementing them.</span></span>

<span data-ttu-id="556b8-172">Azure Cosmos DB の通貨は要求ユニット (RU) です。</span><span class="sxs-lookup"><span data-stu-id="556b8-172">The currency of Azure Cosmos DB is the request unit (RU).</span></span> <span data-ttu-id="556b8-173">要求ユニットが使用されるので、読み取り/書き込み容量を予約したり、CPU、メモリ、IOPS をプロビジョニングしたりする必要はありません。</span><span class="sxs-lookup"><span data-stu-id="556b8-173">With request units, you don't need to reserve read/write capacities or provision CPU, memory, and IOPS.</span></span> <span data-ttu-id="556b8-174">Azure Cosmos DB は、単純な読み取りと書き込みから複雑なグラフのクエリまで、さまざまな操作を行うための API を幅広くサポートしています。</span><span class="sxs-lookup"><span data-stu-id="556b8-174">Azure Cosmos DB supports various APIs that have different operations, ranging from simple reads and writes to complex graph queries.</span></span> <span data-ttu-id="556b8-175">すべての要求が同等とは限らないので、要求には、それを処理するために必要な計算量に基づいて、正規化された要求ユニットの量が割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="556b8-175">Because not all requests are equal, requests are assigned a normalized quantity of request units based on the amount of computation required to serve the request.</span></span> <span data-ttu-id="556b8-176">ご自身のソリューションに必要な要求ユニット数は、データ要素のサイズと、秒あたりのデータベース読み取りおよび書き込み操作数に酔って異なります。</span><span class="sxs-lookup"><span data-stu-id="556b8-176">The number of request units required by your solution is dependent on data element size and the number of database read and write operations per second.</span></span> <span data-ttu-id="556b8-177">詳細については、「[Azure Cosmos DB の要求ユニット](/azure/cosmos-db/request-units)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="556b8-177">For more information, see [Request units in Azure Cosmos DB](/azure/cosmos-db/request-units).</span></span> <span data-ttu-id="556b8-178">これらの推定価格は、2 つの Azure リージョンで実行されている Cosmos DB に基づきます。</span><span class="sxs-lookup"><span data-stu-id="556b8-178">These estimated prices are based on Cosmos DB running in two Azure regions.</span></span>

<span data-ttu-id="556b8-179">想定するアクティビティの量に基づいて、次の 3 つのサンプル コスト プロファイルが用意されています。</span><span class="sxs-lookup"><span data-stu-id="556b8-179">We have provided three sample cost profiles based on amount of activity you expect:</span></span>

- <span data-ttu-id="556b8-180">[Small][small-pricing]: この価格例は、Cosmos DB と小規模 (D3 v2) Kafka クラスターの 1 TB のデータ ストアで予約された 5 RU に対応します。</span><span class="sxs-lookup"><span data-stu-id="556b8-180">[Small][small-pricing]: this pricing example correlates to 5 RUs reserved with a 1 TB data store in Cosmos DB and a small (D3 v2) Kafka cluster.</span></span>
- <span data-ttu-id="556b8-181">[Medium][medium-pricing]: この価格例は、Cosmos DB と中規模 (D4 v2) Kafka クラスターの 10 TB のデータ ストアで予約された 50 RU に対応します。</span><span class="sxs-lookup"><span data-stu-id="556b8-181">[Medium][medium-pricing]: this pricing example correlates to 50 RUs reserved with a 10 TB data store in Cosmos DB and a midsized (D4 v2) Kafka cluster.</span></span>
- <span data-ttu-id="556b8-182">[Large][large-pricing]: この価格例は、Cosmos DB と大規模 (D5 v2) Kafka クラスターの 30 TB のデータ ストアで予約された 500 RU に対応します。</span><span class="sxs-lookup"><span data-stu-id="556b8-182">[Large][large-pricing]: this pricing example correlates to 500 RUs reserved with a 30 TB data store in Cosmos DB and a large (D5 v2) Kafka cluster.</span></span>

## <a name="related-resources"></a><span data-ttu-id="556b8-183">関連リソース</span><span class="sxs-lookup"><span data-stu-id="556b8-183">Related resources</span></span>

<span data-ttu-id="556b8-184">このサンプル シナリオは、[jet.com 社](https://jet.com)が、そのエンド ツー エンド注文処理パイプライン用に構築した、このアーキテクチャの大規模バージョンに基づいています。</span><span class="sxs-lookup"><span data-stu-id="556b8-184">This example scenario is based on a more extensive version of this architecture built by [Jet.com](https://jet.com) for its end-to-end order processing pipeline.</span></span> <span data-ttu-id="556b8-185">詳細については、[Jet.com 社のテクニカル カスタマー プロファイル][source-document]と、[Build 2018 での Jet.com 社のプレゼンテーション][source-presentation]を参照してください。</span><span class="sxs-lookup"><span data-stu-id="556b8-185">For more information, see the [jet.com technical customer profile][source-document] and [jet.com's presentation at Build 2018][source-presentation].</span></span>

<span data-ttu-id="556b8-186">その他の関連リソースには次のものがあります。</span><span class="sxs-lookup"><span data-stu-id="556b8-186">Other related resources include:</span></span>

- <span data-ttu-id="556b8-187">*[データ量の多いアプリケーションの設計](https://dataintensive.net)* Martin Kleppmann (O'Reilly Media、2017)。</span><span class="sxs-lookup"><span data-stu-id="556b8-187">*[Designing Data-Intensive Applications](https://dataintensive.net)* by Martin Kleppmann (O'Reilly Media, 2017).</span></span>
- <span data-ttu-id="556b8-188">*[機能的なドメイン モデリング: ドメイン主導の設計と F# でソフトウェアの複雑さに取り組む](https://pragprog.com/book/swdddf/domain-modeling-made-functional)* Scott Wlaschin (Pragmatic Programmers LLC、2018)。</span><span class="sxs-lookup"><span data-stu-id="556b8-188">*[Domain Modeling Made Functional: Tackle Software Complexity with Domain-Driven Design and F#](https://pragprog.com/book/swdddf/domain-modeling-made-functional)* by Scott Wlaschin (Pragmatic Programmers LLC, 2018).</span></span>
- <span data-ttu-id="556b8-189">その他の[Cosmos DB のユース ケース][docs-cosmos-db-use-cases]</span><span class="sxs-lookup"><span data-stu-id="556b8-189">Other [Cosmos DB use cases][docs-cosmos-db-use-cases]</span></span>
- <span data-ttu-id="556b8-190">「[Azure データ アーキテクチャ ガイド](/azure/architecture/data-guide)」の「[リアルタイム処理](/azure/architecture/data-guide/big-data/real-time-processing)」</span><span class="sxs-lookup"><span data-stu-id="556b8-190">[Real time processing architecture](/azure/architecture/data-guide/big-data/real-time-processing) in the [Azure Data Architecture Guide](/azure/architecture/data-guide).</span></span>

<!-- links -->

[architecture]: ./media/architecture-ecommerce-order-processing.png
[product-category]: https://azure.microsoft.com/product-categories/databases/
[source-document]: https://customers.microsoft.com/story/jet-com-powers-innovative-e-commerce-engine-on-azure-in-less-than-12-months
[source-presentation]: https://channel9.msdn.com/events/Build/2018/BRK3602
[small-pricing]: https://azure.com/e/3d43949ffbb945a88cc0a126dc3a0e6e
[medium-pricing]: https://azure.com/e/1f1e7bf2a6ad4f7799581211f4369b9b
[large-pricing]: https://azure.com/e/75207172ece94cf6b5fb354a2252b333
[docs-cosmos-db-change-feed]: /azure/cosmos-db/change-feed
[docs-cosmos-db-regional-failover]: /azure/cosmos-db/regional-failover
[docs-cosmos-db-guarantees]: /azure/cosmos-db/distribute-data-globally#AvailabilityGuarantees
[docs-cosmos-db-use-cases]: /azure/cosmos-db/use-cases
[docs-kafka-high-availability]: /azure/hdinsight/kafka/apache-kafka-high-availability
[docs-event-hubs]: /azure/event-hubs/event-hubs-what-is-event-hubs
[docs-stream-analytics]: /azure/stream-analytics/stream-analytics-introduction
[availability]: /azure/architecture/checklist/availability
[scalability]: /azure/architecture/checklist/scalability
[resiliency]: /azure/architecture/patterns/category/resiliency/
[security]: /azure/security/
