---
title: Azure アプリケーションの障害とディザスター リカバリー
description: Azure でのディザスター リカバリー アプローチの概要
author: MikeWasson
ms.date: 04/10/2019
ms.topic: article
ms.service: architecture-center
ms.subservice: cloud-design-principles
ms.openlocfilehash: f00341b06b8092c798d6260317226190cbace66b
ms.sourcegitcommit: 579c39ff4b776704ead17a006bf24cd4cdc65edd
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/17/2019
ms.locfileid: "59642877"
---
# <a name="failure-and-disaster-recovery-for-azure-applications"></a><span data-ttu-id="24eec-103">Azure アプリケーションの障害とディザスター リカバリー</span><span class="sxs-lookup"><span data-stu-id="24eec-103">Failure and disaster recovery for Azure applications</span></span>

<span data-ttu-id="24eec-104">*ディザスター リカバリー*は、致命的な損失の発生時にアプリケーション機能を復元するプロセスです。</span><span class="sxs-lookup"><span data-stu-id="24eec-104">*Disaster recovery* is the process of restoring application functionality in the wake of a catastrophic loss.</span></span>

<span data-ttu-id="24eec-105">障害発生時の機能の制限に対する許容範囲に基づいて、アプリケーションごとに異なるビジネス上の意思決定を行います。</span><span class="sxs-lookup"><span data-stu-id="24eec-105">Your tolerance for reduced functionality during a disaster is a business decision that varies from one application to the next.</span></span> <span data-ttu-id="24eec-106">アプリケーションによっては、一定期間、完全に使用できなくなるか、または機能の制限や処理の遅延がありながら部分的に使用できることが許容される場合があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-106">It might be acceptable for some applications to be completely unavailable or to be partially available with reduced functionality or delayed processing for a period of time.</span></span> <span data-ttu-id="24eec-107">また、機能の制限が許容されないアプリケーションもあります。</span><span class="sxs-lookup"><span data-stu-id="24eec-107">For other applications, any reduced functionality is unacceptable.</span></span>

## <a name="disaster-recovery-plan"></a><span data-ttu-id="24eec-108">ディザスター リカバリー プラン</span><span class="sxs-lookup"><span data-stu-id="24eec-108">Disaster recovery plan</span></span>

<span data-ttu-id="24eec-109">まずはリカバリー プランの作成から開始します。</span><span class="sxs-lookup"><span data-stu-id="24eec-109">Start by creating a recovery plan.</span></span> <span data-ttu-id="24eec-110">プランは、完全にテストした後に完成と見なされます。</span><span class="sxs-lookup"><span data-stu-id="24eec-110">The plan is considered complete after it has been fully tested.</span></span> <span data-ttu-id="24eec-111">顧客向けに定義したサービス レベル アグリーメント (SLA) 内で機能を復元するために必要な人員、プロセス、およびアプリケーションを含めます。</span><span class="sxs-lookup"><span data-stu-id="24eec-111">Include the people, processes, and applications needed to restore functionality within the service-level agreement (SLA) you've defined for your customers.</span></span>

<span data-ttu-id="24eec-112">ディザスター リカバリー プランを作成してテストする際には、次の推奨事項を考慮してください。</span><span class="sxs-lookup"><span data-stu-id="24eec-112">Consider the following suggestions when creating and testing your disaster recovery plan:</span></span>

- <span data-ttu-id="24eec-113">プランに、サポートへの連絡と問題のエスカレーションのプロセスを含めます。</span><span class="sxs-lookup"><span data-stu-id="24eec-113">In your plan, include the process for contacting support and for escalating issues.</span></span> <span data-ttu-id="24eec-114">この情報は、初めて復旧プロセスを実行する際に、長時間にわたるダウンタイムを回避するのに役立ちます。</span><span class="sxs-lookup"><span data-stu-id="24eec-114">This information will help to avoid prolonged downtime as you work out the recovery process for the first time.</span></span>
- <span data-ttu-id="24eec-115">アプリケーションの障害によるビジネスの影響を評価します。</span><span class="sxs-lookup"><span data-stu-id="24eec-115">Evaluate the business impact of application failures.</span></span>
- <span data-ttu-id="24eec-116">ミッションクリティカルなアプリケーションに対応できる、複数のリージョンにわたるディザスター リカバリー アーキテクチャを選択します。</span><span class="sxs-lookup"><span data-stu-id="24eec-116">Choose a cross-region recovery architecture for mission-critical applications.</span></span>
- <span data-ttu-id="24eec-117">自動化やテストも含めたディザスター リカバリー プランの特定のオーナーを指定します。</span><span class="sxs-lookup"><span data-stu-id="24eec-117">Identify a specific owner of the disaster recovery plan, including automation and testing.</span></span>
- <span data-ttu-id="24eec-118">特にすべての手動の手順について、プロセスを文書化します。</span><span class="sxs-lookup"><span data-stu-id="24eec-118">Document the process, especially any manual steps.</span></span>
- <span data-ttu-id="24eec-119">可能な限りプロセスを自動化します。</span><span class="sxs-lookup"><span data-stu-id="24eec-119">Automate the process as much as possible.</span></span>
- <span data-ttu-id="24eec-120">すべての参照データとトランザクション データに対してバックアップ戦略を確立し、これらのバックアップの復元を定期的にテストします。</span><span class="sxs-lookup"><span data-stu-id="24eec-120">Establish a backup strategy for all reference and transactional data, and test backup restoration regularly.</span></span>
- <span data-ttu-id="24eec-121">アプリケーションによって使用される Azure サービスのスタックに対して、アラートを設定します。</span><span class="sxs-lookup"><span data-stu-id="24eec-121">Set up alerts for the stack of the Azure services consumed by your application.</span></span>
- <span data-ttu-id="24eec-122">プランを実行する運用スタッフをトレーニングします。</span><span class="sxs-lookup"><span data-stu-id="24eec-122">Train operations staff to execute the plan.</span></span>
- <span data-ttu-id="24eec-123">プランを検証し改善するために、定期的な障害のシミュレーションを実行します。</span><span class="sxs-lookup"><span data-stu-id="24eec-123">Perform regular disaster simulations to validate and improve the plan.</span></span>

<span data-ttu-id="24eec-124">[Azure Site Recovery](/azure/site-recovery/) を使用して仮想マシン (VM) をレプリケートする場合は、完全に自動化されたリカバリー プランを作成して、アプリケーション全体をフェールオーバーします。</span><span class="sxs-lookup"><span data-stu-id="24eec-124">If you're using [Azure Site Recovery](/azure/site-recovery/) to replicate virtual machines (VMs), create a fully automated recovery plan to fail over the entire application.</span></span>

## <a name="manual-responses"></a><span data-ttu-id="24eec-125">手動での対応</span><span class="sxs-lookup"><span data-stu-id="24eec-125">Manual responses</span></span>

<span data-ttu-id="24eec-126">自動化が最も適切ですが、ディザスター リカバリーのいくつかの戦略には手動の対応が必要です。</span><span class="sxs-lookup"><span data-stu-id="24eec-126">Although automation is ideal, some strategies for disaster recovery require manual responses.</span></span>

### <a name="alerts"></a><span data-ttu-id="24eec-127">アラート</span><span class="sxs-lookup"><span data-stu-id="24eec-127">Alerts</span></span>

<span data-ttu-id="24eec-128">アプリケーションで、積極的な介入が必要な可能性がある警告の兆候を監視します。</span><span class="sxs-lookup"><span data-stu-id="24eec-128">Monitor your application for warning signs that may require proactive intervention.</span></span> <span data-ttu-id="24eec-129">たとえば、Azure SQL Database または Azure Cosmos DB でアプリケーションが常に調整されている場合は、データベース容量の増加や、クエリの最適化が必要な可能性があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-129">For example, if Azure SQL Database or Azure Cosmos DB consistently throttles your application, you might need to increase your database capacity or optimize your queries.</span></span> <span data-ttu-id="24eec-130">アプリケーションで調整エラーが透過的に処理される場合でも、テレメトリでは、フォロー アップのためにアラートを生成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-130">Even though the application might handle the throttling errors transparently, your telemetry should still raise an alert so that you can follow up.</span></span>

<span data-ttu-id="24eec-131">サービスの制限とクォータのしきい値について、Azure リソースのメトリックと診断ログのアラートを構成することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="24eec-131">For service limits and quota thresholds, we recommend configuring alerts on Azure resources metrics and diagnostics logs.</span></span> <span data-ttu-id="24eec-132">可能であれば、メトリックのアラートを、診断ログよりも待機時間が短くなるよう設定します。</span><span class="sxs-lookup"><span data-stu-id="24eec-132">When possible, set up alerts on metrics, which are lower latency than diagnostics logs.</span></span>

<span data-ttu-id="24eec-133"> [Resource Health](/azure/service-health/resource-health-checks-resource-types) を通じて、Azure では Azure サービスの調整問題を診断するのに役立つ、いくつかの組み込みの正常性状態チェックを提供しています。</span><span class="sxs-lookup"><span data-stu-id="24eec-133">Through [Resource Health](/azure/service-health/resource-health-checks-resource-types), Azure provides some built-in health status checks that can help you diagnose Azure service throttling issues.</span></span>

### <a name="failover"></a><span data-ttu-id="24eec-134">フェールオーバー</span><span class="sxs-lookup"><span data-stu-id="24eec-134">Failover</span></span>

<span data-ttu-id="24eec-135">各 Azure アプリケーションとその Azure サービスのディザスター リカバリー戦略を構成します。</span><span class="sxs-lookup"><span data-stu-id="24eec-135">Configure a disaster recovery strategy for each Azure application and its Azure services.</span></span> <span data-ttu-id="24eec-136">ディザスター リカバリーをサポートするために使用できるデプロイ戦略は、各アプリケーションのすべてのコンポーネントに必要な SLA に応じて異なる場合があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-136">Acceptable deployment strategies to support disaster recovery may vary based on the SLAs required for all components of each application.</span></span>  

<span data-ttu-id="24eec-137">Azure では、手動のフェールオーバー ( [Redis Cache の geo レプリカ](/azure/azure-cache-for-redis/cache-how-to-geo-replication)など) や、自動フェールオーバー ( [SQL 自動フェールオーバー グループ](/azure/sql-database/sql-database-auto-failover-group)など) のために、多くの Azure サービス内でさまざまな機能を提供しています。</span><span class="sxs-lookup"><span data-stu-id="24eec-137">Azure provides different features within many Azure services to allow for manual failover, such as [redis cache geo-replicas](/azure/azure-cache-for-redis/cache-how-to-geo-replication), or for automated failover, such as [SQL auto-failover groups](/azure/sql-database/sql-database-auto-failover-group).</span></span> <span data-ttu-id="24eec-138">例: </span><span class="sxs-lookup"><span data-stu-id="24eec-138">For example:</span></span>

- <span data-ttu-id="24eec-139">主に仮想マシンを使用するアプリケーションでは、Web 層とロジック層で Azure Site Recovery を使用できます。</span><span class="sxs-lookup"><span data-stu-id="24eec-139">For an application that mainly uses virtual machines, you can use Azure Site Recovery for the web and logic tiers.</span></span> <span data-ttu-id="24eec-140">詳細については、[Azure から Azure へのディザスター リカバリー アーキテクチャ](/azure/site-recovery/azure-to-azure-architecture)に関するページを参照してください。</span><span class="sxs-lookup"><span data-stu-id="24eec-140">For more information, see [Azure to Azure disaster recovery architecture](/azure/site-recovery/azure-to-azure-architecture).</span></span> <span data-ttu-id="24eec-141">VM 上の SQL Server では、[SQL Server Always On 可用性グループ](/azure/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-availability-group-dr)を使用します。</span><span class="sxs-lookup"><span data-stu-id="24eec-141">For SQL Server on VMs, use [SQL Server Always On availability groups](/azure/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-availability-group-dr).</span></span>
- <span data-ttu-id="24eec-142">App Service および Azure SQL Database を使用するアプリケーションでは、セカンダリ リージョン内で構成されている小規模な層の App Service プランを使用でき、これはフェールオーバーの発生時に自動スケーリングされます。</span><span class="sxs-lookup"><span data-stu-id="24eec-142">For an application that uses App Service and Azure SQL Database, you can use a smaller tier App Service plan configured in the secondary region, which autoscales when a failover occurs.</span></span> <span data-ttu-id="24eec-143">データベース層に対してフェールオーバー グループを使用します。</span><span class="sxs-lookup"><span data-stu-id="24eec-143">Use failover groups for the database tier.</span></span>

<span data-ttu-id="24eec-144">どちらのシナリオでも、 [Azure Traffic Manager](/azure/traffic-manager/traffic-manager-overview)  プロファイルにより、リージョン間での自動フェールオーバーが行われます。</span><span class="sxs-lookup"><span data-stu-id="24eec-144">In either scenario, an [Azure Traffic Manager](/azure/traffic-manager/traffic-manager-overview) profile provides for the automated failover across regions.</span></span> <span data-ttu-id="24eec-145">フェールオーバー時の可用性を迅速化するために、セカンダリ リージョン内で[ロード バランサー](/azure/load-balancer/load-balancer-overview)または [アプリケーション ゲートウェイ](/azure/application-gateway/overview) を設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-145">[Load balancers](/azure/load-balancer/load-balancer-overview) or [application gateways](/azure/application-gateway/overview) should be set up in the secondary region to support faster availability upon failover.</span></span>

### <a name="operational-readiness-testing"></a><span data-ttu-id="24eec-146">運用準備状況のテスト</span><span class="sxs-lookup"><span data-stu-id="24eec-146">Operational readiness testing</span></span>

<span data-ttu-id="24eec-147">セカンダリ リージョンへのフェールオーバーと、プライマリ リージョンへのフェールバックについて、運用準備状況のテストを実行します。</span><span class="sxs-lookup"><span data-stu-id="24eec-147">Perform an operational readiness test for failover to the secondary region and for failback to the primary region.</span></span> <span data-ttu-id="24eec-148">多くの Azure サービスでは、ディザスター リカバリー訓練のために手動フェールオーバーまたはテスト フェールオーバーをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="24eec-148">Many Azure services support manual failover or test failover for disaster recovery drills.</span></span> <span data-ttu-id="24eec-149">または、Azure サービスをシャットダウンまたは削除することで、停止をシミュレートできます。</span><span class="sxs-lookup"><span data-stu-id="24eec-149">Alternatively, you can simulate an outage by shutting down or removing Azure services.</span></span>

## <a name="application-failure"></a><span data-ttu-id="24eec-150">アプリケーションの障害</span><span class="sxs-lookup"><span data-stu-id="24eec-150">Application failure</span></span>

<span data-ttu-id="24eec-151">アプリケーションの障害には、復旧可能なものと復旧不可能なものがあります。</span><span class="sxs-lookup"><span data-stu-id="24eec-151">Application failures are either recoverable or nonrecoverable.</span></span> <span data-ttu-id="24eec-152">復旧可能なエラーは軽減できますが、復旧不可能なエラーではアプリケーションが停止します。</span><span class="sxs-lookup"><span data-stu-id="24eec-152">You can mitigate a recoverable error, but nonrecoverable errors will bring down the application.</span></span>

- <span data-ttu-id="24eec-153">一部の障害は、エラーを自動的に処理し、代替アクションを講じることで、透過的に対処できます。</span><span class="sxs-lookup"><span data-stu-id="24eec-153">Some failures can be addressed transparently by handling faults automatically and taking alternate actions.</span></span> <span data-ttu-id="24eec-154">たとえば、Traffic Manager では、ホスト仮想マシンの基になるハードウェアまたはオペレーティング システム ソフトウェアに起因する障害が自動的に処理されます。</span><span class="sxs-lookup"><span data-stu-id="24eec-154">For example, Traffic Manager automatically handles failures that result from the underlying hardware or operating system software in the host virtual machine.</span></span>
- <span data-ttu-id="24eec-155">一部のエラーでは、アプリケーションで機能を制限しながらユーザー要求の処理を続行できます。</span><span class="sxs-lookup"><span data-stu-id="24eec-155">With some errors, the application can continue handling user requests with reduced functionality.</span></span>
- <span data-ttu-id="24eec-156">より重大なサービスの中断では、アプリケーションを使用できなくなる場合があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-156">More severe service disruptions might render the application unavailable.</span></span>

<span data-ttu-id="24eec-157">適切に設計されたシステムでは、設計時と実行時にサービス レベルでの責任が分離されます。</span><span class="sxs-lookup"><span data-stu-id="24eec-157">A well-designed system separates responsibilities at the service level &mdash; at design time and at runtime.</span></span> <span data-ttu-id="24eec-158">この分離により、依存サービスの中断によってアプリケーション全体がダウンするのを防ぐことができます。</span><span class="sxs-lookup"><span data-stu-id="24eec-158">This separation prevents a dependent service disruption from bringing down the entire application.</span></span> <span data-ttu-id="24eec-159">たとえば、次のモジュールを持つ Web コマース アプリケーションがあるとします。</span><span class="sxs-lookup"><span data-stu-id="24eec-159">For example, consider a web commerce application with the following modules:</span></span>

![アートにリンクを追加](./_images/disaster-recovery.png)

<span data-ttu-id="24eec-161">注文をホストするためのデータベースで障害が発生した場合、注文処理サービスでは販売トランザクションを処理できなくなります。</span><span class="sxs-lookup"><span data-stu-id="24eec-161">If the database for hosting orders goes down, the Order Processing service can't process sales transactions.</span></span> <span data-ttu-id="24eec-162">アーキテクチャによっては、注文送信サービスと注文処理サービスの続行が不可能になることがあります。</span><span class="sxs-lookup"><span data-stu-id="24eec-162">Depending on the architecture, it might be impossible for the Order Submission and Order Processing services to continue.</span></span> <span data-ttu-id="24eec-163">ただし、製品データが別の場所に格納されていれば、アプリケーションの他の部分が利用できない場合でも、製品カタログは引き続き使用できます。</span><span class="sxs-lookup"><span data-stu-id="24eec-163">However, if product data is stored in a different location, the Product Catalog is still available, even though other parts of the application might be unavailable.</span></span>

<span data-ttu-id="24eec-164">お客様自身が、アプリケーションでユーザーに一時的な問題を通知する方法を決定し、システムに適切な通知を組み込むことができます。</span><span class="sxs-lookup"><span data-stu-id="24eec-164">It's up to you to determine how the application will inform users of any temporary problems and to build appropriate notifications into the system.</span></span> <span data-ttu-id="24eec-165">前の例では、製品を表示したり、ショッピング カートに追加したりできるかもしれません。</span><span class="sxs-lookup"><span data-stu-id="24eec-165">In the previous example, the application might allow for viewing products and for adding them to a shopping cart.</span></span> <span data-ttu-id="24eec-166">ただし、顧客が購入しようとすると、アプリケーションで注文機能が一時的に利用不可であることが通知されます。</span><span class="sxs-lookup"><span data-stu-id="24eec-166">However, when the customer attempts to make a purchase, the application should notify them that the ordering functionality is temporarily unavailable.</span></span> <span data-ttu-id="24eec-167">このアプローチは顧客にとって最善ではありませんが、アプリケーション全体のサービス中断は回避されます。</span><span class="sxs-lookup"><span data-stu-id="24eec-167">Although not ideal for the customer, this approach prevents an application-wide service disruption.</span></span>

## <a name="data-corruption-and-restoration"></a><span data-ttu-id="24eec-168">データの破損と復元</span><span class="sxs-lookup"><span data-stu-id="24eec-168">Data corruption and restoration</span></span>

<span data-ttu-id="24eec-169">データ ストアで障害が発生した場合、特にデータがレプリケートされた場合には、データ ストアが再び使用可能な状態になるときにデータに不整合性が生じることがあります。</span><span class="sxs-lookup"><span data-stu-id="24eec-169">If a data store fails, there might be data inconsistencies when it becomes available again, especially if the data was replicated.</span></span> <span data-ttu-id="24eec-170">レプリケートされたデータ ストアの目標復旧時間 (RTO) と目標復旧時点 (RPO) を理解しておくと、データの損失量を予測することができます。</span><span class="sxs-lookup"><span data-stu-id="24eec-170">Understanding the recovery time objective (RTO) and recovery point objective (RPO) of replicated data stores can help you predict the amount of data loss.</span></span>

<span data-ttu-id="24eec-171">リージョン間フェールオーバーが手動で開始されるか、または Microsoft によって開始されるかについては、Azure サービスの SLA を確認してください。</span><span class="sxs-lookup"><span data-stu-id="24eec-171">To understand whether the cross-regional failover is started manually or by Microsoft, review the Azure service SLAs.</span></span> <span data-ttu-id="24eec-172">リージョン間フェールオーバーに関する SLA なしのサービスでは、一般的に Microsoft によってフェールオーバーのタイミングが決定され、通常はプライマリ リージョン内のデータの復旧が優先されます。</span><span class="sxs-lookup"><span data-stu-id="24eec-172">For services with no SLAs for cross-regional failover, Microsoft typically decides when to fail over and usually prioritizes recovery of data in the primary region.</span></span> <span data-ttu-id="24eec-173">プライマリ リージョン内のデータが復旧不可能と見なされる場合、Microsoft では、セカンダリ リージョンにフェールオーバーします。</span><span class="sxs-lookup"><span data-stu-id="24eec-173">If data in the primary region is deemed unrecoverable, Microsoft fails over to the secondary region.</span></span>

### <a name="restoring-data-from-backups"></a><span data-ttu-id="24eec-174">バックアップからのデータの復元</span><span class="sxs-lookup"><span data-stu-id="24eec-174">Restoring data from backups</span></span>

<span data-ttu-id="24eec-175">バックアップでは、意図しない削除やデータの破損によってアプリケーションのコンポーネントが失われることから保護します。</span><span class="sxs-lookup"><span data-stu-id="24eec-175">Backups protect you from losing a component of the application because of accidental deletion or data corruption.</span></span> <span data-ttu-id="24eec-176">これにより、以前のコンポーネントの機能バージョンが維持され、これを使用して以前の状態に復元できます。</span><span class="sxs-lookup"><span data-stu-id="24eec-176">They preserve a functional version of the component from an earlier time, which you can use to restore it.</span></span>

<span data-ttu-id="24eec-177">ディザスター リカバリー戦略は、バックアップに代わるものではありませんが、アプリケーション データの定期的なバックアップにより、いくつかのディザスター リカバリーのシナリオがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="24eec-177">Disaster recovery strategies are not a replacement for backups, but regular backups of application data support some disaster recovery scenarios.</span></span> <span data-ttu-id="24eec-178">バックアップ ストレージは、ディザスター リカバリー戦略に基づいて選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-178">Your backup storage choices should be based on your disaster recovery strategy.</span></span>

<span data-ttu-id="24eec-179">バックアップ プロセスを実行する頻度により、RPO が決定されます。</span><span class="sxs-lookup"><span data-stu-id="24eec-179">The frequency of running the backup process determines your RPO.</span></span> <span data-ttu-id="24eec-180">たとえば、1 時間ごとにデータをバックアップする場合、バックアップの 2 分前に障害が発生すると、58 分間のデータが失われます。</span><span class="sxs-lookup"><span data-stu-id="24eec-180">For example, if you perform hourly backups and a disaster occurs two minutes before the backup, you will lose 58 minutes of data.</span></span> <span data-ttu-id="24eec-181">ディザスター リカバリー プランには、データの損失に対処する方法を含める必要があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-181">Your disaster recovery plan should include how you will address lost data.</span></span>

<span data-ttu-id="24eec-182">一般的には、1 つのデータ ストア内のデータが別のストア内のデータを参照するようにします。</span><span class="sxs-lookup"><span data-stu-id="24eec-182">It's common for data in one data store to reference data in another store.</span></span> <span data-ttu-id="24eec-183">たとえば、Azure Storage の BLOB にリンクしている列を含む SQL データベースがあるものとします。</span><span class="sxs-lookup"><span data-stu-id="24eec-183">For example, consider a SQL Database with a column that links to a blob in Azure Storage.</span></span> <span data-ttu-id="24eec-184">バックアップが同時に実行されない場合、データベースには、障害発生前にバックアップされなかった BLOB へのポインターが含まれる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-184">If backups don't happen simultaneously, the database might have a pointer to a blob that wasn't backed up before the failure.</span></span> <span data-ttu-id="24eec-185">アプリケーションまたはディザスター リカバリー プランでは、復旧後のこのような不整合を処理するプロセスを実装する必要があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-185">The application or the disaster recovery plan must implement processes to handle this inconsistency after a recovery.</span></span>

> [!NOTE]
> <span data-ttu-id="24eec-186">[Azure Backup](/azure/backup/backup-azure-vms-first-look-arm) を使用してバックアップされる VM など、いくつかのシナリオでは、同じリージョン内のバックアップからのみ復元できます。</span><span class="sxs-lookup"><span data-stu-id="24eec-186">In some scenarios, such as that of VMs backed up using [Azure Backup](/azure/backup/backup-azure-vms-first-look-arm), you can restore only from a backup in the same region.</span></span> <span data-ttu-id="24eec-187">[Azure Cache for Redis](/azure/azure-cache-for-redis/cache-how-to-geo-replication) などのその他の Azure サービスでは、geo レプリケートされたバックアップが提供されており、これによりリージョン間でサービスを復元できます。</span><span class="sxs-lookup"><span data-stu-id="24eec-187">Other Azure services, such as [Azure Cache for Redis](/azure/azure-cache-for-redis/cache-how-to-geo-replication), provide geo-replicated backups, which you can use to restore services across regions.</span></span>

### <a name="azure-storage-and-azure-sql-database"></a><span data-ttu-id="24eec-188">Azure Storage と Azure SQL Database</span><span class="sxs-lookup"><span data-stu-id="24eec-188">Azure Storage and Azure SQL Database</span></span>

<span data-ttu-id="24eec-189">Azure では、Azure Storage と SQL Database のデータが、同じリージョン内の異なる障害ドメイン内に自動的に 3 回格納されます。</span><span class="sxs-lookup"><span data-stu-id="24eec-189">Azure automatically stores Azure Storage and SQL Database data three times within different fault domains in the same region.</span></span> <span data-ttu-id="24eec-190">geo レプリケーションを使用している場合は、さらに 3 回、異なるリージョンに格納します。</span><span class="sxs-lookup"><span data-stu-id="24eec-190">If you use geo-replication, the data is stored three additional times in a different region.</span></span> <span data-ttu-id="24eec-191">ただし、(たとえば、ユーザー エラーによって) プライマリ コピー内でデータが破損したり削除されている場合、変更は他のコピーにレプリケートされます。</span><span class="sxs-lookup"><span data-stu-id="24eec-191">However, if the data is corrupted or deleted in the primary copy (for example, because of user error), the changes replicate to the other copies.</span></span>

<span data-ttu-id="24eec-192">潜在的なデータの破損または削除を管理するには 2 つのオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="24eec-192">You have two options for managing potential data corruption or deletion:</span></span>

- <span data-ttu-id="24eec-193">**カスタム バックアップ戦略を作成します。**</span><span class="sxs-lookup"><span data-stu-id="24eec-193">**Create a custom backup strategy.**</span></span> <span data-ttu-id="24eec-194">ビジネス要件やガバナンス規定に応じて、Azure またはオンプレミスにバックアップを格納できます。</span><span class="sxs-lookup"><span data-stu-id="24eec-194">You can store your backups in Azure or on-premises, depending on your business requirements and governance regulations.</span></span>
- <span data-ttu-id="24eec-195">**ポイントインタイム リストア オプション**を使用して SQL Database を復旧します。</span><span class="sxs-lookup"><span data-stu-id="24eec-195">**Use the point-in-time restore option** to recover a SQL Database.</span></span>

#### <a name="azure-storage-recovery"></a><span data-ttu-id="24eec-196">Azure Storage の復旧</span><span class="sxs-lookup"><span data-stu-id="24eec-196">Azure Storage recovery</span></span>

<span data-ttu-id="24eec-197">Azure Storage のカスタム バックアップ プロセスを開発するか、または多くのサード パーティ製バックアップ ツールのいずれかを使用することができます。</span><span class="sxs-lookup"><span data-stu-id="24eec-197">You can develop a custom backup process for Azure Storage or use one of many third-party backup tools.</span></span>

<span data-ttu-id="24eec-198">Azure Storage では、自動レプリカによるデータの回復性が提供されますが、アプリケーション コードやユーザーによるデータの破損は回避されません。</span><span class="sxs-lookup"><span data-stu-id="24eec-198">Azure Storage provides data resiliency through automated replicas, but it doesn't prevent application code or users from corrupting data.</span></span> <span data-ttu-id="24eec-199">アプリケーション エラーやユーザー エラーの後にデータの忠実性を維持するには、監査ログと共にセカンダリ ストレージの場所にデータをコピーするなどの高度な手法が必要です。</span><span class="sxs-lookup"><span data-stu-id="24eec-199">Maintaining data fidelity after application or user error requires more advanced techniques, such as copying the data to a secondary storage location with an audit log.</span></span> <span data-ttu-id="24eec-200">いくつかのオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="24eec-200">You have several options:</span></span>

- [<span data-ttu-id="24eec-201">**ブロック BLOB。**</span><span class="sxs-lookup"><span data-stu-id="24eec-201">**Block blobs.**</span></span>](/rest/api/storageservices/understanding-block-blobs--append-blobs--and-page-blobs) <span data-ttu-id="24eec-202">各ブロック BLOB の特定時点のスナップショットを作成します。</span><span class="sxs-lookup"><span data-stu-id="24eec-202">Create a point-in-time snapshot of each block blob.</span></span> <span data-ttu-id="24eec-203">各スナップショットについて、BLOB 内で前回のスナップショットの状態との差分を保存するために必要なストレージのみに課金されます。</span><span class="sxs-lookup"><span data-stu-id="24eec-203">For each snapshot, you are charged only for the storage required to store the differences within the blob since the previous snapshot state.</span></span> <span data-ttu-id="24eec-204">スナップショットは元の BLOB に依存するため、別の BLOB または別のストレージ アカウントにコピーすることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="24eec-204">The snapshots are dependent on the original blob, so we recommend copying to another blob or even to another storage account.</span></span> <span data-ttu-id="24eec-205">このアプローチにより、バックアップ データを誤って削除してしまうことから確実に保護できます。</span><span class="sxs-lookup"><span data-stu-id="24eec-205">This approach ensures that backup data is protected against accidental deletion.</span></span> <span data-ttu-id="24eec-206">別のストレージ アカウントに BLOB をコピーするには、[AzCopy](/azure/storage/common/storage-use-azcopy) または [Azure PowerShell](/azure/storage/common/storage-powershell-guide-full) を使用します。</span><span class="sxs-lookup"><span data-stu-id="24eec-206">Use [AzCopy](/azure/storage/common/storage-use-azcopy) or [Azure PowerShell](/azure/storage/common/storage-powershell-guide-full) to copy the blobs to another storage account.</span></span>

    <span data-ttu-id="24eec-207">詳細については、「 [BLOB のスナップショットの作成](/rest/api/storageservices/creating-a-snapshot-of-a-blob)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="24eec-207">For more information, see [Creating a Snapshot of a Blob](/rest/api/storageservices/creating-a-snapshot-of-a-blob).</span></span>

- [<span data-ttu-id="24eec-208">**Azure Files。**</span><span class="sxs-lookup"><span data-stu-id="24eec-208">**Azure Files.**</span></span>](/azure/storage/files/storage-files-introduction) <span data-ttu-id="24eec-209">[共有のスナップショット](/azure/storage/files/storage-snapshots-files)、AzCopy、または PowerShell を使用して、別のストレージ アカウントにファイルをコピーします。</span><span class="sxs-lookup"><span data-stu-id="24eec-209">Use [share snapshots](/azure/storage/files/storage-snapshots-files), AzCopy, or PowerShell to copy your files to another storage account.</span></span>
- [<span data-ttu-id="24eec-210">**Azure ストレージ テーブル。**</span><span class="sxs-lookup"><span data-stu-id="24eec-210">**Azure Table storage.**</span></span>](/azure/storage/tables/table-storage-overview) <span data-ttu-id="24eec-211">AzCopy を使用して、他のリージョンの別のストレージ アカウントにテーブル データをエクスポートします。</span><span class="sxs-lookup"><span data-stu-id="24eec-211">Use AzCopy to export the table data into another storage account in another region.</span></span>

#### <a name="sql-database-recovery"></a><span data-ttu-id="24eec-212">SQL Database の復旧</span><span class="sxs-lookup"><span data-stu-id="24eec-212">SQL Database recovery</span></span>

<span data-ttu-id="24eec-213">データ損失からビジネスを守るために、SQL Database では、データベースの完全バックアップ (毎週)、データベースの差分バックアップ (1 時間ごと)、およびトランザクション ログのバックアップ (5 から 10 分ごと) を組み合わせて自動的に実行します。</span><span class="sxs-lookup"><span data-stu-id="24eec-213">To protect your business from data loss, SQL Database automatically performs a combination of full database backups weekly, differential database backups hourly, and transaction log backups every 5 to 10 minutes.</span></span> <span data-ttu-id="24eec-214">Basic、Standard、および Premium の SQL Database 階層では、ポイントインタイム リストアを使用してデータベースを以前の状態に復元します。</span><span class="sxs-lookup"><span data-stu-id="24eec-214">For the Basic, Standard, and Premium SQL Database tiers, use point-in-time restore to restore a database to an earlier time.</span></span> <span data-ttu-id="24eec-215">詳細については、次の記事を参照してください。</span><span class="sxs-lookup"><span data-stu-id="24eec-215">See the following articles for more information:</span></span>

- [<span data-ttu-id="24eec-216">データベースの自動バックアップを使用した Azure SQL Database の復旧</span><span class="sxs-lookup"><span data-stu-id="24eec-216">Recover an Azure SQL database using automated database backups</span></span>](/azure/sql-database/sql-database-recovery-using-backups)
- [<span data-ttu-id="24eec-217">Azure SQL Database によるビジネス継続性の概要</span><span class="sxs-lookup"><span data-stu-id="24eec-217">Overview of business continuity with Azure SQL Database</span></span>](/azure/sql-database/sql-database-business-continuity)

<span data-ttu-id="24eec-218">もう 1 つのオプションとしては、SQL Database 用のアクティブ geo レプリケーションを使用します。この場合は、データベースの変更が、Azure の同じリージョンまたは別のリージョン内のセカンダリ データベースに自動的にレプリケートされます。</span><span class="sxs-lookup"><span data-stu-id="24eec-218">Another option is to use active geo-replication for SQL Database, which automatically replicates database changes to secondary databases in the same or different Azure region.</span></span> <span data-ttu-id="24eec-219">詳細については、「[アクティブ geo レプリケーションの作成と使用](/azure/sql-database/sql-database-active-geo-replication)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="24eec-219">For more information, see [Creating and using active geo-replication](/azure/sql-database/sql-database-active-geo-replication).</span></span>

<span data-ttu-id="24eec-220">もっと手動的なバックアップおよび復元の方法を使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="24eec-220">You can also use a more manual approach for backup and restore:</span></span>

- <span data-ttu-id="24eec-221">**DATABASE COPY** コマンドを使用して、トランザクションの一貫性を保つ、データベースのバックアップ コピーを作成できます。</span><span class="sxs-lookup"><span data-stu-id="24eec-221">Use the **DATABASE COPY** command to create a backup copy of the database with transactional consistency.</span></span>
- <span data-ttu-id="24eec-222">Azure SQL Database のインポート/エクスポート サービスを使用します。このサービスでは、Azure Blob Storage に格納されている BACPAC ファイル (ご利用のデータベース スキーマおよび関連するデータを含む圧縮されたファイル) へのデータベースのエクスポートがサポートされます。</span><span class="sxs-lookup"><span data-stu-id="24eec-222">Use the Azure SQL Database Import/Export Service, which supports exporting databases to BACPAC files (compressed files containing your database schema and associated data) that are stored in Azure Blob storage.</span></span> <span data-ttu-id="24eec-223">リージョン全体のサービス中断を防ぐには、BACPAC ファイルを代替リージョンにコピーします。</span><span class="sxs-lookup"><span data-stu-id="24eec-223">To protect against a region-wide service disruption, copy the BACPAC files to an alternate region.</span></span>

### <a name="sql-server-on-vms"></a><span data-ttu-id="24eec-224">VM 上の SQL Server</span><span class="sxs-lookup"><span data-stu-id="24eec-224">SQL Server on VMs</span></span>

<span data-ttu-id="24eec-225">VM 上で実行される SQL Server の場合、従来のバックアップとログ配布の 2 つのオプションがあります。</span><span class="sxs-lookup"><span data-stu-id="24eec-225">For SQL Server running on VMs, you have two options: traditional backups and log shipping.</span></span>

- <span data-ttu-id="24eec-226">従来のバックアップでは、特定の時点の状態に復元できますが、復旧プロセスに時間がかかります。</span><span class="sxs-lookup"><span data-stu-id="24eec-226">With traditional backups, you can restore to a specific point in time, but the recovery process is slow.</span></span> <span data-ttu-id="24eec-227">従来のバックアップを復元するには、最初に完全バックアップから開始し、その後すべての増分バックアップを適用する必要があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-227">Restoring traditional backups requires that you start with an initial full backup and then apply any incremental backups.</span></span>
- <span data-ttu-id="24eec-228">ログ バックアップの復元を遅延させるには、ログ配布セッションを構成します。</span><span class="sxs-lookup"><span data-stu-id="24eec-228">You can configure a log shipping session to delay the restore of log backups.</span></span> <span data-ttu-id="24eec-229">これにより、プライマリ レプリカで発生したエラーから復旧するための時間が確保されます。</span><span class="sxs-lookup"><span data-stu-id="24eec-229">This provides a window to recover from errors made on the primary replica.</span></span>

### <a name="azure-database-for-mysql-and-azure-database-for-postgresql"></a><span data-ttu-id="24eec-230">Azure Database for MySQL と Azure Database for PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="24eec-230">Azure Database for MySQL and Azure Database for PostgreSQL</span></span>

<span data-ttu-id="24eec-231">Azure Database for MySQL と Azure Database for PostgreSQL では、データベース サービスで 5 分ごとにバックアップが自動的に作成されます。</span><span class="sxs-lookup"><span data-stu-id="24eec-231">In Azure Database for MySQL and Azure Database for PostgreSQL, the database service automatically makes a backup every five minutes.</span></span> <span data-ttu-id="24eec-232">これらの自動バックアップを使用すると、以前の時点のサーバーとそのデータベースが新しいサーバーに復元されます。</span><span class="sxs-lookup"><span data-stu-id="24eec-232">You can use these automated backups to restore the server and its databases from an earlier point in time to a new server.</span></span> <span data-ttu-id="24eec-233">詳細については、次を参照してください。</span><span class="sxs-lookup"><span data-stu-id="24eec-233">For more information, see:</span></span>

- [<span data-ttu-id="24eec-234">Azure Portal を使用して Azure Database for MySQL サーバーのバックアップと復元を行う方法</span><span class="sxs-lookup"><span data-stu-id="24eec-234">How to back up and restore a server in Azure Database for MySQL by using the Azure portal</span></span>](/azure/mysql/howto-restore-server-portal)
- [<span data-ttu-id="24eec-235">Azure portal を使用して Azure Database for PostgreSQL のサーバーをバックアップおよび復元する方法</span><span class="sxs-lookup"><span data-stu-id="24eec-235">How to back up and restore a server in Azure Database for PostgreSQL using the Azure portal</span></span>](/azure/postgresql/howto-restore-server-portal)

### <a name="azure-cosmos-db"></a><span data-ttu-id="24eec-236">Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="24eec-236">Azure Cosmos DB</span></span>

<span data-ttu-id="24eec-237">Cosmos DB では、一定の間隔でバックアップが自動的に作成されます。</span><span class="sxs-lookup"><span data-stu-id="24eec-237">Cosmos DB automatically makes a backup at regular intervals.</span></span> <span data-ttu-id="24eec-238">バックアップは別のストレージ サービスに個別に保存され、リージョンの障害から保護するためにグローバルにレプリケートされます。</span><span class="sxs-lookup"><span data-stu-id="24eec-238">Backups are stored separately in another storage service and are replicated globally to protect against regional disasters.</span></span> <span data-ttu-id="24eec-239">データベースまたはコレクションを誤って削除した場合は、サポート チケットを申請するか、Azure サポートに連絡して、最新の自動バックアップからデータを復元できます。</span><span class="sxs-lookup"><span data-stu-id="24eec-239">If you accidentally delete your database or collection, you can file a support ticket or call Azure support to restore the data from the last automatic backup.</span></span> <span data-ttu-id="24eec-240">詳細については、「[Azure Cosmos DB でのオンライン バックアップとオンデマンドのデータ復元](/azure/cosmos-db/online-backup-and-restore)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="24eec-240">For more information, see [Online backup and on-demand restore in Azure Cosmos DB](/azure/cosmos-db/online-backup-and-restore).</span></span>

### <a name="azure-virtual-machines"></a><span data-ttu-id="24eec-241">Azure Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="24eec-241">Azure Virtual Machines</span></span>

<span data-ttu-id="24eec-242">Azure Virtual Machines をアプリケーション エラーや誤削除から保護するには、[Azure Backup](/azure/backup/) を使用します。</span><span class="sxs-lookup"><span data-stu-id="24eec-242">To protect Azure Virtual Machines from application errors or accidental deletion, use [Azure Backup](/azure/backup/).</span></span> <span data-ttu-id="24eec-243">作成したバックアップは、複数の VM ディスク間で一貫性を保ちます。</span><span class="sxs-lookup"><span data-stu-id="24eec-243">The created backups are consistent across multiple VM disks.</span></span> <span data-ttu-id="24eec-244">さらに、Azure Backup コンテナーをリージョン間でレプリケートして、リージョンの損失からの復旧をサポートできます。</span><span class="sxs-lookup"><span data-stu-id="24eec-244">In addition, the Azure Backup vault can be replicated across regions to support recovery from a regional loss.</span></span>

## <a name="network-outage"></a><span data-ttu-id="24eec-245">ネットワークの停止</span><span class="sxs-lookup"><span data-stu-id="24eec-245">Network outage</span></span>

<span data-ttu-id="24eec-246">Azure ネットワークの一部にアクセスできないと、アプリケーションやデータにアクセスできなくなる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-246">When parts of the Azure network are inaccessible, you might not be able to access your application or data.</span></span> <span data-ttu-id="24eec-247">このような状況では、機能を制限してほとんどのアプリケーションを実行するようにディザスター リカバリー戦略を設計することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="24eec-247">In this situation, we recommend designing the disaster recovery strategy to run most applications with reduced functionality.</span></span>

<span data-ttu-id="24eec-248">機能の制限を使用できない場合に残されているオプションは、アプリケーションのダウンタイムまたは代替リージョンへのフェールオーバーです。</span><span class="sxs-lookup"><span data-stu-id="24eec-248">If reducing functionality isn't an option, the remaining options are application downtime or failover to an alternate region.</span></span>

<span data-ttu-id="24eec-249">機能制限のシナリオ:</span><span class="sxs-lookup"><span data-stu-id="24eec-249">In a reduced functionality scenario:</span></span>

- <span data-ttu-id="24eec-250">Azure ネットワークの停止のためにアプリケーションがデータにアクセスできない場合でも、キャッシュされているデータを使用すれば、アプリケーションの機能を制限した状態でローカルに実行できる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-250">If your application can't access its data because of an Azure network outage, you might be able to run locally with reduced application functionality by using cached data.</span></span>
- <span data-ttu-id="24eec-251">接続が回復するまで別の場所にデータを格納できる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-251">You might be able to store data in an alternate location until connectivity is restored.</span></span>

## <a name="dependent-service-failure"></a><span data-ttu-id="24eec-252">依存サービスの障害</span><span class="sxs-lookup"><span data-stu-id="24eec-252">Dependent service failure</span></span>

<span data-ttu-id="24eec-253">各依存サービスについて、サービス中断による影響、およびアプリケーションがどのように応答するかを理解する必要があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-253">For each dependent service, you should understand the implications of a service disruption and the way that the application will respond.</span></span> <span data-ttu-id="24eec-254">多くのサービスには、回復性と可用性をサポートする機能が含まれるため、各サービスを個別に評価することで、ディザスター リカバリー プランが向上する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="24eec-254">Many services include features that support resiliency and availability, so evaluating each service independently is likely to improve your disaster recovery plan.</span></span> <span data-ttu-id="24eec-255">たとえば、Azure Event Hubs では、セカンダリ名前空間への[フェールオーバー](/azure/event-hubs/event-hubs-geo-dr#setup-and-failover-flow)がサポートされています。</span><span class="sxs-lookup"><span data-stu-id="24eec-255">For example, Azure Event Hubs supports [failing over](/azure/event-hubs/event-hubs-geo-dr#setup-and-failover-flow) to the secondary namespace.</span></span>

## <a name="region-wide-service-disruptions"></a><span data-ttu-id="24eec-256">リージョン全体にわたるサービス中断</span><span class="sxs-lookup"><span data-stu-id="24eec-256">Region-wide service disruptions</span></span>

<span data-ttu-id="24eec-257">多くの障害は、同じ Azure リージョン内で管理できます。</span><span class="sxs-lookup"><span data-stu-id="24eec-257">Many failures are manageable within the same Azure region.</span></span> <span data-ttu-id="24eec-258">ただし、リージョン全体にわたるサービス中断が万一発生した場合、データのローカルな冗長コピーは使用できません。</span><span class="sxs-lookup"><span data-stu-id="24eec-258">However, in the unlikely event of a region-wide service disruption, the locally redundant copies of your data aren't available.</span></span> <span data-ttu-id="24eec-259">geo レプリケーションを有効にしてある場合は、BLOB とテーブルのコピーがさらに 3 つ、別のリージョン内に存在します。</span><span class="sxs-lookup"><span data-stu-id="24eec-259">If you've enabled geo-replication, there are three additional copies of your blobs and tables in a different region.</span></span> <span data-ttu-id="24eec-260">Microsoft によってリージョンの損失が宣言された場合、Azure では、セカンダリ リージョンにすべての DNS エントリが再マッピングされます。</span><span class="sxs-lookup"><span data-stu-id="24eec-260">If Microsoft declares the region lost, Azure remaps all the DNS entries to the secondary region.</span></span>

> [!NOTE]
> <span data-ttu-id="24eec-261">このプロセスは、リージョン全体にわたるサービス中断の場合にのみ発生し、ユーザーによるコントロールの範疇にありません。</span><span class="sxs-lookup"><span data-stu-id="24eec-261">This process occurs only for region-wide service disruptions and is not within your control.</span></span> <span data-ttu-id="24eec-262">RPO や RTO を向上させるには、[Azure Site Recovery](/azure/site-recovery/) を使うことを検討してください。</span><span class="sxs-lookup"><span data-stu-id="24eec-262">Consider using [Azure Site Recovery](/azure/site-recovery/) to achieve better RPO and RTO.</span></span> <span data-ttu-id="24eec-263">Site Recovery を使うことで、許容できる障害と、レプリケートされた VM にフェールオーバーするタイミングを判断できます。</span><span class="sxs-lookup"><span data-stu-id="24eec-263">Using Site Recovery, you decide what is an acceptable outage and when to fail over to the replicated VMs.</span></span>

<span data-ttu-id="24eec-264">リージョン全体にわたるサービス中断への対応は、デプロイとディザスター リカバリー プランによって異なります。</span><span class="sxs-lookup"><span data-stu-id="24eec-264">Your response to a region-wide service disruption depends on your deployment and your disaster recovery plan.</span></span>

- <span data-ttu-id="24eec-265">保証された復旧時間を必要としない重要性の低いアプリケーションの場合は、コスト管理戦略として、別のリージョンに再デプロイすることが有意義と考えられます。</span><span class="sxs-lookup"><span data-stu-id="24eec-265">As a cost-control strategy, for non-critical applications that don't require a guaranteed recovery time, it might make sense to redeploy to a different region.</span></span>
- <span data-ttu-id="24eec-266">デプロイされたロールと共に別のリージョンでホストされているが、リージョン間でトラフィックを分散しないアプリケーション (*アクティブ/パッシブ デプロイ*) の場合は、代替リージョン内のセカンダリ ホステッド サービスに切り替えます。</span><span class="sxs-lookup"><span data-stu-id="24eec-266">For applications that are hosted in another region with deployed roles but don't distribute traffic across regions (*active/passive deployment*), switch to the secondary hosted service in the alternate region.</span></span>
- <span data-ttu-id="24eec-267">別のリージョン内にフルスケールのセカンダリ デプロイが存在するアプリケーション (*アクティブ/アクティブ デプロイ*) の場合は、そのリージョンにトラフィックをルーティングします。</span><span class="sxs-lookup"><span data-stu-id="24eec-267">For applications that have a full-scale secondary deployment in another region (*active/active deployment*), route traffic to that region.</span></span>

<span data-ttu-id="24eec-268">リージョン全体にわたるサービス中断からの復旧の詳細については、「[リージョン全体でのサービスの中断から回復する](../resiliency/recovery-loss-azure-region.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="24eec-268">To learn more about recovering from a region-wide service disruption, see [Recover from a region-wide service disruption](../resiliency/recovery-loss-azure-region.md).</span></span>

### <a name="vm-recovery"></a><span data-ttu-id="24eec-269">VM の復旧</span><span class="sxs-lookup"><span data-stu-id="24eec-269">VM recovery</span></span>

<span data-ttu-id="24eec-270">重要なアプリについては、リージョン全体にわたるサービス中断に備えて VM の復旧を計画します。</span><span class="sxs-lookup"><span data-stu-id="24eec-270">For critical apps, plan for recovering VMs in the event of a region-wide service disruption.</span></span>

- <span data-ttu-id="24eec-271">Azure Backup または別のバッグアップ方法を使用して、アプリケーション整合性のある、複数のリージョンにまたがるバックアップを作成します </span><span class="sxs-lookup"><span data-stu-id="24eec-271">Use Azure Backup or another backup method to create cross-region backups that are application consistent.</span></span> <span data-ttu-id="24eec-272">(バックアップ コンテナーのレプリケーションは作成時に構成する必要があります)。</span><span class="sxs-lookup"><span data-stu-id="24eec-272">(Replication of the Backup vault must be configured at the time of creation.)</span></span>
- <span data-ttu-id="24eec-273">Site Recovery を使用して、ワンクリックでのアプリケーション フェールオーバーとフェールオーバー テスト用にリージョン間でレプリケートします。</span><span class="sxs-lookup"><span data-stu-id="24eec-273">Use Site Recovery to replicate across regions for one-click application failover and failover testing.</span></span>
- <span data-ttu-id="24eec-274">Traffic Manager を使用して、別のリージョンへのユーザー トラフィック フェールオーバーを自動化します。</span><span class="sxs-lookup"><span data-stu-id="24eec-274">Use Traffic Manager to automate user traffic failover to another region.</span></span>

<span data-ttu-id="24eec-275">詳細については、[「リージョン全体でのサービスの中断から回復する」の「仮想マシン」](../resiliency/recovery-loss-azure-region.md#virtual-machines)を参照してください。</span><span class="sxs-lookup"><span data-stu-id="24eec-275">To learn more, see [Recover from a region-wide service disruption, Virtual machines](../resiliency/recovery-loss-azure-region.md#virtual-machines).</span></span>

### <a name="storage-recovery"></a><span data-ttu-id="24eec-276">ストレージの復旧</span><span class="sxs-lookup"><span data-stu-id="24eec-276">Storage recovery</span></span>

<span data-ttu-id="24eec-277">リージョン全体にわたるサービス中断の発生時にストレージを保護するには:</span><span class="sxs-lookup"><span data-stu-id="24eec-277">To protect your storage in the event of a region-wide service disruption:</span></span>

- <span data-ttu-id="24eec-278">geo 冗長ストレージを使用します。</span><span class="sxs-lookup"><span data-stu-id="24eec-278">Use geo-redundant storage.</span></span>
- <span data-ttu-id="24eec-279">ストレージが geo レプリケートされている場所を認識しておきます。</span><span class="sxs-lookup"><span data-stu-id="24eec-279">Know where your storage is geo-replicated.</span></span> <span data-ttu-id="24eec-280">この場所は、ストレージと同じリージョンにある必要があるデータの他のインスタンスをデプロイする場所に影響を与えます。</span><span class="sxs-lookup"><span data-stu-id="24eec-280">This affects where you deploy other instances of your data that require regional affinity with your storage.</span></span>
- <span data-ttu-id="24eec-281">フェールオーバー後にデータの整合性を確認し、必要に応じてバックアップから復元します。</span><span class="sxs-lookup"><span data-stu-id="24eec-281">Check data for consistency after failover and, if necessary, restore from a backup.</span></span>

<span data-ttu-id="24eec-282">詳細については、「[RA-GRS を使用した高可用性アプリケーションの設計](/azure/storage/common/storage-designing-ha-apps-with-ragrs)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="24eec-282">To learn more, see [Designing highly available applications using RA-GRS](/azure/storage/common/storage-designing-ha-apps-with-ragrs).</span></span>

### <a name="sql-database-and-sql-server"></a><span data-ttu-id="24eec-283">SQL Database と SQL Server</span><span class="sxs-lookup"><span data-stu-id="24eec-283">SQL Database and SQL Server</span></span>

<span data-ttu-id="24eec-284">Azure SQL Database では、</span><span class="sxs-lookup"><span data-stu-id="24eec-284">Azure SQL Database provides two types of recovery:</span></span>

- <span data-ttu-id="24eec-285">geo リストアを使用して、別のリージョン内のバックアップ コピーからデータベースを復元します。</span><span class="sxs-lookup"><span data-stu-id="24eec-285">Use geo-restore to restore a database from a backup copy in another region.</span></span> <span data-ttu-id="24eec-286">詳細については、「[データベースの自動バックアップを使用した Azure SQL Database の復旧](/azure/sql-database/sql-database-recovery-using-backups)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="24eec-286">For more information, see [Recover an Azure SQL database using automated database backups](/azure/sql-database/sql-database-recovery-using-backups).</span></span>
- <span data-ttu-id="24eec-287">アクティブ geo レプリケーションを使用して、セカンダリ データベースにフェールオーバーします。</span><span class="sxs-lookup"><span data-stu-id="24eec-287">Use active geo-replication to fail over to a secondary database.</span></span> <span data-ttu-id="24eec-288">詳細については、「[アクティブ geo レプリケーションの作成と使用](/azure/sql-database/sql-database-active-geo-replication)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="24eec-288">For more information, see [Creating and using active geo-replication](/azure/sql-database/sql-database-active-geo-replication).</span></span>

<span data-ttu-id="24eec-289">VM で実行される SQL Server の詳細については、「[Azure 仮想マシンにおける SQL Server の高可用性とディザスター リカバリー](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="24eec-289">For SQL Server running on VMs, see [High availability and disaster recovery for SQL Server in Azure Virtual Machines](/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-high-availability-dr/).</span></span>

## <a name="service-specific-guidance"></a><span data-ttu-id="24eec-290">サービス固有のガイダンス</span><span class="sxs-lookup"><span data-stu-id="24eec-290">Service-specific guidance</span></span>

<span data-ttu-id="24eec-291">次の記事では、特定の Azure サービスに対するディザスター リカバリーついて説明します。</span><span class="sxs-lookup"><span data-stu-id="24eec-291">The following articles describe disaster recovery for specific Azure services:</span></span>

| <span data-ttu-id="24eec-292">Service</span><span class="sxs-lookup"><span data-stu-id="24eec-292">Service</span></span>                       | <span data-ttu-id="24eec-293">記事</span><span class="sxs-lookup"><span data-stu-id="24eec-293">Article</span></span>                                                                                                                                                                                       |
|-------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="24eec-294">Azure Database for MySQL</span><span class="sxs-lookup"><span data-stu-id="24eec-294">Azure Database for MySQL</span></span>      | [<span data-ttu-id="24eec-295">Azure Database for MySQL でのビジネス継続性の概要</span><span class="sxs-lookup"><span data-stu-id="24eec-295">Overview of business continuity with Azure Database for MySQL</span></span>](/azure/mysql/concepts-business-continuity)                                                  |
| <span data-ttu-id="24eec-296">Azure Database for PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="24eec-296">Azure Database for PostgreSQL</span></span> | [<span data-ttu-id="24eec-297">Azure Database for PostgreSQL でのビジネス継続性の概要</span><span class="sxs-lookup"><span data-stu-id="24eec-297">Overview of business continuity with Azure Database for PostgreSQL</span></span>](/azure/postgresql/concepts-business-continuity)                                        |
| <span data-ttu-id="24eec-298">Azure クラウド サービス</span><span class="sxs-lookup"><span data-stu-id="24eec-298">Azure Cloud Services</span></span>          | [<span data-ttu-id="24eec-299">Azure Cloud Services に影響を与える Azure サービスの中断が発生した場合の対処方法</span><span class="sxs-lookup"><span data-stu-id="24eec-299">What to do in the event of an Azure service disruption that impacts Azure Cloud Services</span></span>](/azure/cloud-services/cloud-services-disaster-recovery-guidance) |
| <span data-ttu-id="24eec-300">Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="24eec-300">Cosmos DB</span></span>                     | [<span data-ttu-id="24eec-301">Azure Cosmos DB での高可用性</span><span class="sxs-lookup"><span data-stu-id="24eec-301">High availability with Azure Cosmos DB</span></span>](/azure/cosmos-db/high-availability)                                                                                |
| <span data-ttu-id="24eec-302">Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="24eec-302">Azure Key Vault</span></span>               | [<span data-ttu-id="24eec-303">Azure Key Vault の可用性と冗長性</span><span class="sxs-lookup"><span data-stu-id="24eec-303">Azure Key Vault availability and redundancy</span></span>](/azure/key-vault/key-vault-disaster-recovery-guidance)                                                        |
| <span data-ttu-id="24eec-304">Azure Storage</span><span class="sxs-lookup"><span data-stu-id="24eec-304">Azure Storage</span></span>                 | [<span data-ttu-id="24eec-305">Azure Storage でのディザスター リカバリーとストレージ アカウントのフェールオーバー (プレビュー)</span><span class="sxs-lookup"><span data-stu-id="24eec-305">Disaster recovery and storage account failover (preview) in Azure Storage</span></span>](/azure/storage/common/storage-disaster-recovery-guidance)                       |
| <span data-ttu-id="24eec-306">SQL Database</span><span class="sxs-lookup"><span data-stu-id="24eec-306">SQL Database</span></span>                  | [<span data-ttu-id="24eec-307">Azure SQL Database を復元する、またはセカンダリにフェールオーバーする</span><span class="sxs-lookup"><span data-stu-id="24eec-307">Restore an Azure SQL Database or failover to a secondary region</span></span>](/azure/sql-database/sql-database-disaster-recovery)                                       |
| <span data-ttu-id="24eec-308">Virtual Machines</span><span class="sxs-lookup"><span data-stu-id="24eec-308">Virtual Machines</span></span>              | [<span data-ttu-id="24eec-309">Azure サービスの中断が Azure Cloud に影響を与える場合の対処方法</span><span class="sxs-lookup"><span data-stu-id="24eec-309">What to do in the event of an Azure service disruption impacts Azure Cloud</span></span>](/azure/cloud-services/cloud-services-disaster-recovery-guidance)               |
| <span data-ttu-id="24eec-310">Azure Virtual Network</span><span class="sxs-lookup"><span data-stu-id="24eec-310">Azure Virtual Network</span></span>         | [<span data-ttu-id="24eec-311">Virtual Network – ビジネス継続性</span><span class="sxs-lookup"><span data-stu-id="24eec-311">Virtual Network – Business Continuity</span></span>](/azure/virtual-network/virtual-network-disaster-recovery-guidance)                                                  |

## <a name="next-steps"></a><span data-ttu-id="24eec-312">次の手順</span><span class="sxs-lookup"><span data-stu-id="24eec-312">Next steps</span></span>

- [<span data-ttu-id="24eec-313">データの破損または偶発的な削除から復旧する</span><span class="sxs-lookup"><span data-stu-id="24eec-313">Recover from data corruption or accidental deletion</span></span>](../resiliency/recovery-data-corruption.md)
- [<span data-ttu-id="24eec-314">リージョン全体でのサービスの中断から回復する</span><span class="sxs-lookup"><span data-stu-id="24eec-314">Recover from a region-wide service disruption</span></span>](../resiliency/recovery-loss-azure-region.md)