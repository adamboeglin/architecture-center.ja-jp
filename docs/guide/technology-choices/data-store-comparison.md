---
title: データ ストアの選択条件
titleSuffix: Azure Application Architecture Guide
description: Azure コンピューティング オプションの概要。
author: MikeWasson
ms.date: 06/01/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: seojan19
ms.openlocfilehash: f7c19501b9f28db3892285b5f35a33f02edd87ab
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/20/2019
ms.locfileid: "58242333"
---
# <a name="criteria-for-choosing-a-data-store"></a>データ ストアの選択条件

Azure では、多数のデータ ストレージ ソリューションをサポートしており、各ソリューションではさまざまな機能を提供しています。 この記事では、データ ストアを評価するときに使用する比較条件について説明します。 目標は、どの種類のデータ ストレージがソリューションの要件に見合うかを判断する際に役立つことです。

## <a name="general-considerations"></a>一般的な考慮事項

比較を開始するために、データのニーズに関する以下の情報をできるだけ収集してください。 この情報は、どの種類のデータ ストレージがニーズに見合うかを判断するうえで役立ちます。

### <a name="functional-requirements"></a>機能の要件

- **データ形式**。 どのような種類のデータを格納する予定ですか。 一般的な種類として、トランザクション データ、JSON オブジェクト、利用統計情報、検索インデックス、またはフラット ファイルがあります。

- **データ サイズ**。 格納する必要があるデータの大きさは、どのくらいですか。 これらのエンティティは単一のドキュメントとして維持する必要がありますか、それとも複数のドキュメント、テーブル、コレクションなどに分割できますか。

- **スケールと構造**。 必要なストレージの総容量は、どのくらいですか。 データをパーティション分割する予定ですか。

- **データのリレーションシップ**。 データでは、一対多または多対多のリレーションシップをサポートする必要がありますか。 リレーションシップ自体はデータの重要な部分ですか。 同じデータセット内、または外部のデータセットのデータを結合あるいは連結する必要はありますか。

- **整合性モデル**。 次の変更を加える前に 1 つのノードで行われた更新が他のノードに反映されていることが、どのくらい重要ですか。 結果として整合性があればよいですか。 トランザクションの ACID 保証は必要ですか。

- **スキーマの柔軟性**。 どの種類のスキーマをデータに適用しますか。 固定スキーマ、書き込み時スキーマの手法、または読み取り時スキーマの手法を使用しますか。

- **コンカレンシー**。 データを更新して同期するときに、どの種類のコンカレンシー メカニズムを使用しますか。 アプリケーションは、潜在的に競合する可能性がある多数の更新を実行しますか。 実行する場合、レコード ロックとペシミスティック コンカレンシー制御が必要になることがあります。 代わりに、オプティミスティック コンカレンシーをサポートすることはできますか。 サポートできる場合、簡単なタイムスタンプに基づくコンカレンシー制御で十分ですか、あるいは、追加機能として複数バージョンのコンカレンシー制御が必要ですか。

- **データの移動**。 ソリューションでは、ETL タスクを実行して他のストアやデータ ウェアハウスにデータを移動する必要はありますか。

- **データ ライフサイクル**。 データは 1 回だけ書き込んで、複数回読み取りますか。 クールまたはコールド ストレージに移動できますか。

- **サポートされるその他の機能**。 スキーマ検証、集計、インデックス作成、フルテキスト検索、MapReduce、その他のクエリ機能など、他の特定の機能が必要ですか。

### <a name="non-functional-requirements"></a>機能以外の要件

- **パフォーマンスとスケーラビリティ**。 どのようなデータ パフォーマンス要件がありますか。 データ取り込み率およびデータ処理率に関する特定の要件はありますか。 取り込まれた後のクエリ実行とデータ集計で許容できる応答時間はどのくらいですか。 データ ストアはどのくらいの規模にスケールアップする必要がありますか。 ワークロードの負荷がより高いのは、読み取りまたは書き込みのどちらですか。

- **信頼性**。 SLA 全体の何をサポートする必要がありますか。 データ コンシューマーに提供する必要があるフォールトトレランスのレベルは、どのくらいですか。 どのような種類のバックアップおよび復元の機能が必要ですか。

- **レプリケーション**。 複数のレプリカまたはリージョンにデータを配布する必要はありますか。 どのような種類のデータ レプリケーション機能が必要ですか。

- **制限**。 特定のデータ ストアの制限値で、スケール、接続数、およびスループットの要件に対応する予定ですか。

### <a name="management-and-cost"></a>管理とコスト

- **管理されたサービス**。 IaaS でホストされるデータ ストアにしかない特定の機能が必要な場合以外は、可能であれば、マネージド データ サービスを使用してください。

- **利用可能なリージョン**。 管理されたサービスの場合、すべての Azure リージョンでそのサービスを利用できますか。 ソリューションは、特定の Azure リージョンでホストする必要がありますか。

- **移植性**。 オンプレミス、外部のデータセンター、またはその他のクラウド ホスティング環境にデータを移行する必要はありますか。

- **ライセンス**。 専用のライセンスまたは OSS ライセンスのどちらかで、種類の希望はありますか。 使用できるライセンスの種類について、他の外部的な制約はありますか。

- **総コスト**。 ソリューション内でサービスを使用する総コストは、どのくらいですか。 稼働時間とスループットの要件をサポートするために、どのくらいの数のインスタンスを実行する必要がありますか。 この計算では、運用コストを考慮してください。 管理されたサービスが好まれる 1 つの理由に、運用コストの削減があります。

- **コスト効率**。 より高いコスト効率でデータを格納するために、データをパーティション分割できますか。 たとえば、高価なリレーショナル データベースからオブジェクト ストアへ大規模なオブジェクトを移動できますか。

### <a name="security"></a>セキュリティ

- **セキュリティ**。 どの種類の暗号化が必要ですか。 保存時に暗号化は必要ですか。 データへの接続に使用する認証メカニズムは何ですか。

- **監査**。 どの種類の監査ログを生成する必要がありますか。

- **ネットワーク要件**。 他のネットワーク リソースからのデータへのアクセスを制限したり、あるいは管理したりする必要はありますか。 データは、Azure 環境の内部からだけアクセスできればよいですか。 データは特定の IP アドレスやサブネットからアクセスできる必要がありますか。 オンプレミスまたは外部の他のデータセンターでホストされているアプリケーションやサービスから、データにアクセスする必要はありますか。

### <a name="devops"></a>DevOps

- **スキル セット**。 チームが使い慣れている特定のプログラミング言語、オペレーティング システム、その他のテクノロジはありますか。 チームで使用することが難しいテクノロジは、他にありますか。

- **クライアント**。お使いの開発言語にふさわしいクライアント サポートはありますか。

以降のセクションでは、ワークロード プロファイル、データ型、およびサンプルの使用例の観点から、さまざまなデータ ストア モデルを比較します。

## <a name="relational-database-management-systems-rdbms"></a>リレーショナル データベース管理システム (RDBMS)

<!-- markdownlint-disable MD033 -->

<table>
<tr><td><strong>ワークロード</strong></td>
    <td>
        <ul>
            <li>新しいレコードの作成と既存データの更新の両方が、定期的に発生します。</li>
            <li>1 つのトランザクションで複数の操作を完了する必要がある。</li>
            <li>参照タブを実行する集計関数が必要になる。</li>
            <li>レポート作成ツールによる強固な統合が必要になる。</li>
            <li>データベースの制約を使用して、リレーションシップが強制的に適用される。</li>
            <li>クエリのパフォーマンスを最適化するために、インデックスが使用される。</li>
            <li>データの特定のサブセットへのアクセスを許可する。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>データの種類</strong></td>
    <td>
        <ul>
            <li>データは高度に正規化される。</li>
            <li>データベース スキーマが必要であり、強制的に適用される。</li>
            <li>データベース内のデータ エンティティ間の多対多リレーションシップ。</li>
            <li>制約はスキーマで定義され、データベース内の任意のデータに適用される。</li>
            <li>データには、高度な整合性が必要である。 インデックスおよびリレーションシップは、正確に維持される必要がある。</li>
            <li>データには、強固な一貫性が必要である。 全データがすべてのユーザーおよびプロセスと 100% 整合性があることを保証した方法で、トランザクションが処理される。</li>
            <li>個々のデータ エントリのサイズは、小規模から中規模であることが望まれている。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>例</strong></td>
    <td>
        <ul>
            <li>基幹業務 (人材管理、顧客関係管理、エンタープライズ リソース プランニング)</li>
            <li>在庫管理</li>
            <li>レポート データベース</li>
            <li>会計</li>
            <li>アセット管理</li>
            <li>ファンド管理</li>
            <li>注文管理</li>
        </ul>
    </td>
</tr>
</table>

## <a name="document-databases"></a>ドキュメント データベース

<table>
<tr><td><strong>ワークロード</strong></td>
    <td>
        <ul>
            <li>汎用的な用途。</li>
            <li>挿入や更新の操作は共通である。 新しいレコードの作成と既存データの更新の両方が、定期的に発生します。</li>
            <li>非オブジェクト リレーショナル インピー ダンスは適合しない。 ドキュメントには、アプリケーション コードで使用されるオブジェクト構造のほうがより適合します。</li>
            <li>オプティミスティック コンカレンシーが、より一般的に使用される。</li>
            <li>データは、アプリケーションを使用して変更され処理される必要がある。</li>
            <li>データは、複数のフィールドにインデックスを必要とする。</li>
            <li>個々のドキュメントが取得され、単一のブロックとして書き込まれる。</li>
    </td>
</tr>
<tr><td><strong>データの種類</strong></td>
    <td>
        <ul>
            <li>非正規化された方法で、データを管理できる。</li>
            <li>個々のドキュメント データのサイズは比較的小さい。</li>
            <li>各ドキュメントの種類で、独自のスキーマを使用できる。</li>
            <li>ドキュメントには、省略可能なフィールドを含めることができる。</li>
            <li>ドキュメント データは半構造化されている。つまり、各フィールドのデータは、厳密には定義されていません。</li>
            <li>データ集計がサポートされている。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>例</strong></td>
    <td>
        <ul>
            <li>製品カタログ</li>
            <li>ユーザー アカウント</li>
            <li>部品表</li>
            <li>パーソナル化</li>
            <li>コンテンツ管理</li>
            <li>操作データ</li>
            <li>在庫管理</li>
            <li>トランザクション履歴データ</li>
            <li>その他の NoSQL ストアの具体化されたビュー。 ファイルや BLOB のインデックスを置換する。</li>
        </ul>
    </td>
</tr>
</table>

## <a name="keyvalue-stores"></a>キー/値のストア

<table>
<tr><td><strong>ワークロード</strong></td>
    <td>
        <ul>
            <li>データは識別され、単一の ID キーを使用して、ディクショナリのようにアクセスされる。</li>
            <li>極めて高い拡張性。</li>
            <li>結合、ロック、統合は必要ない。</li>
            <li>集計メカニズムは使用されない。</li>
            <li>一般に、セカンダリ インデックスは使用されない。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>データの種類</strong></td>
    <td>
        <ul>
            <li>データ サイズが大きくなる傾向がある。</li>
            <li>各キーは、アンマネージ データの BLOB である単一の値に関連付けられる。</li>
            <li>スキーマの適用はない。</li>
            <li>エンティティ間にリレーションシップはない。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>例</strong></td>
    <td>
        <ul>
            <li>データ キャッシュ</li>
            <li>セッションの管理</li>
            <li>ユーザーの基本設定とプロファイルの管理</li>
            <li>製品推奨と広告提供</li>
            <li>ディクショナリ</li>
        </ul>
    </td>
</tr>
</table>

## <a name="graph-databases"></a>グラフ データベース

<table>
<tr><td><strong>ワークロード</strong></td>
    <td>
        <ul>
            <li>データ項目間のリレーションシップは非常に複雑であり、データ項目間に多数のホップが関連している。</li>
            <li>データ項目間のリレーションシップは動的であり、時間と共に変化する。</li>
            <li>オブジェクト間のリレーションシップは最上位の扱いになり、外部キーと走査のための結合は必要ない。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>データの種類</strong></td>
    <td>
        <ul>
            <li>データは、ノードとリレーションシップで構成される。</li>
            <li>ノードは、テーブル行または JSON ドキュメントに似ている。</li>
            <li>リレーションシップはノードと同様に重要であり、クエリ言語で直接公開される。</li>
            <li>複数の電話番号の保持者など、複合オブジェクトは、走査可能なリレーションシップと組み合わせて、個々のより小さなノードに分割される傾向がある。 </li>
        </ul>
    </td>
</tr>
<tr><td><strong>例</strong></td>
    <td>
        <ul>
            <li>組織図</li>
            <li>ソーシャル グラフ</li>
            <li>不正行為の検出</li>
            <li>Analytics</li>
            <li>推奨エンジン</li>
        </ul>
    </td>
</tr>
</table>

## <a name="column-family-databases"></a>列ファミリのデータベース

<table>
<tr><td><strong>ワークロード</strong></td>
    <td>
        <ul>
            <li>ほとんどの列ファミリ データベースでは、極めて高速で書き込み操作を実行する。</li>
            <li>更新および削除の操作は、ほとんど行われない。</li>
            <li>高いスループットと低い待機時間でのアクセスを提供するように設計されている。</li>
            <li>より大規模なレコード内にある特定のフィールド セットへの簡単なクエリ アクセスをサポートしている。</li>
            <li>極めて高い拡張性。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>データの種類</strong></td>
    <td>
        <ul>
            <li>データは、キー列と 1 つまたは複数の列ファミリで構成されたテーブルに格納される。</li>
            <li>特定の列は、個々の行別に変更できる。</li>
            <li>個々のセルには get および put コマンド経由でアクセスできる。</li>
            <li>スキャン コマンドを使って、複数の行が返される。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>例</strong></td>
    <td>
        <ul>
            <li>Recommendations</li>
            <li>パーソナル化</li>
            <li>センサー データ</li>
            <li>テレメトリ</li>
            <li>メッセージング</li>
            <li>ソーシャル メディア分析</li>
            <li>Web 分析</li>
            <li>アクティビティの監視</li>
            <li>天気およびその他のタイム シリーズ データ</li>
        </ul>
    </td>
</tr>
</table>

## <a name="search-engine-databases"></a>検索エンジンのデータベース

<table>
<tr><td><strong>ワークロード</strong></td>
    <td>
        <ul>
            <li>複数のソースおよびサービスからのデータにインデックスを作成する。</li>
            <li>クエリはアドホックであり、複雑になる場合がある。</li>
            <li>集計が必要になる。</li>
            <li>フルテキスト検索が必要になる。</li>
            <li>アドホックのセルフ サービス クエリが必要になる。</li>
            <li>すべてのフィールドでインデックスによるデータ分析が必要になる。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>データの種類</strong></td>
    <td>
        <ul>
            <li>半構造化または非構造化</li>
            <li>Text</li>
            <li>構造化データへの参照を備えたテキスト</li>
        </ul>
    </td>
</tr>
<tr><td><strong>例</strong></td>
    <td>
        <ul>
            <li>製品カタログ</li>
            <li>サイトの検索</li>
            <li>ログの記録</li>
            <li>Analytics</li>
            <li>ショッピング サイト</li>
        </ul>
    </td>
</tr>
</table>

## <a name="data-warehouse"></a>データ ウェアハウス

<table>
<tr><td><strong>ワークロード</strong></td>
    <td>
        <ul>
            <li>データ分析</li>
            <li>企業の BI</li>
        </ul>
    </td>
</tr>
<tr><td><strong>データの種類</strong></td>
    <td>
        <ul>
            <li>複数のソースからの履歴データ。</li>
            <li>通常は、&quot;star&quot; または &quot;snowflake&quot; スキーマで非正規化され、ファクト テーブルおよびディメンション テーブルで構成されている。</li>
            <li>通常は、スケジュールに基づいて新しいデータと共に読み込まれる。</li>
            <li>多くの場合、ディメンション テーブルにはエンティティの複数の履歴バージョンが含まれ、<em>"緩やかに変化するディメンション"</em> として参照される。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>例</strong></td>
    <td>分析モデル、レポート、およびダッシュボードのデータを提供するエンタープライズ データ ウェアハウス。
    </td>
</tr>
</table>

## <a name="time-series-databases"></a>タイム シリーズ データベース

<table>
<tr><td><strong>ワークロード</strong></td>
    <td>
        <ul>
            <li>操作の大部分 (95 99%) は書き込みである。</li>
            <li>レコードは通常、時系列で追加される。</li>
            <li>更新はとんど行われない。</li>
            <li>削除は一括で、連続したブロックまたはレコードに対して行われる。</li>
            <li>読み取り要求は、使用可能なメモリより大規模になる場合がある。</li>
            <li>複数の読み取りが同時に発生することが頻繁にある。</li>
            <li>データは、時系列の昇順または降順のどちらかで、読み込まれる。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>データの種類</strong></td>
    <td>
        <ul>
            <li>主キーおよび並べ替えのメカニズムとして使用されるタイムスタンプ。</li>
            <li>エントリまたはエントリに示された記述内容からの測定値。</li>
            <li>種類、配信元などエントリに関する情報の詳細を定義しているタグ。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>例</strong></td>
    <td>
        <ul>
            <li>監視およびイベント テレメトリ。</li>
            <li>センサーまたはその他の IoT データ。</li>
        </ul>
    </td>
</tr>
</table>

## <a name="object-storage"></a>オブジェクト ストレージ

<table>
<tr><td><strong>ワークロード</strong></td>
    <td>
        <ul>
            <li>キーによって識別される。</li>
            <li>オブジェクトは、パブリックまたはプライベートでアクセスできる。</li>
            <li>コンテンツは通常、スプレッドシート、イメージ、ビデオ ファイルなどのアセットである。</li>
            <li>コンテンツは持続性 (永続性) があり、任意のアプリケーション層または仮想マシンの外部に存在する必要がある。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>データの種類</strong></td>
    <td>
        <ul>
            <li>データ サイズが大きい。</li>
            <li>Blob データ。</li>
            <li>値は非透過的である。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>例</strong></td>
    <td>
        <ul>
            <li>イメージ、ビデオ、office ドキュメント、PDF</li>
            <li>CSS、スクリプト、CSV</li>
            <li>静的 HTML、JSON</li>
            <li>ログおよび監査ファイル</li>
            <li>データベースのバックアップ</li>
        </ul>
    </td>
</tr>
</table>

## <a name="shared-files"></a>共有ファイル

<table>
<tr><td><strong>ワークロード</strong></td>
    <td>
        <ul>
            <li>ファイル システムと対話する既存アプリからの移行。</li>
            <li>SMB インターフェイスが必要である。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>データの種類</strong></td>
    <td>
        <ul>
            <li>フォルダーの階層セット内のファイル。</li>
            <li>標準の I/O ライブラリを使ってアクセスできる。</li>
        </ul>
    </td>
</tr>
<tr><td><strong>例</strong></td>
    <td>
        <ul>
            <li>レガシ ファイル</li>
            <li>多数の VM またはアプリ インスタンスからアクセス可能な共有コンテンツ</li>
        </ul>
    </td>
</tr>
</table>

<!-- markdownlint-enable MD033 -->
