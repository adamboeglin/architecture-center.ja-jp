---
title: 自動スケール ガイダンス
titleSuffix: Best practices for cloud applications
description: 自動スケールによってアプリケーションに必要なリソースを動的に割り当てる方法に関するガイダンス。
author: dragon119
ms.date: 05/17/2017
ms.topic: best-practice
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.custom: seodec18
ms.openlocfilehash: 8b1d614460b8c0bd9655d7b75cd971767e34ee3f
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/20/2019
ms.locfileid: "58243433"
---
# <a name="autoscaling"></a><span data-ttu-id="85d72-103">自動スケール</span><span class="sxs-lookup"><span data-stu-id="85d72-103">Autoscaling</span></span>

<span data-ttu-id="85d72-104">自動スケールは、パフォーマンス要件に合わせてリソースを動的に割り当てるプロセスです。</span><span class="sxs-lookup"><span data-stu-id="85d72-104">Autoscaling is the process of dynamically allocating resources to match performance requirements.</span></span> <span data-ttu-id="85d72-105">作業量が増加すると、アプリケーションで、サービス レベル アグリーメント (SLA) に準拠し、必要なパフォーマンス レベルを維持するために追加のリソースが必要になる場合があります。</span><span class="sxs-lookup"><span data-stu-id="85d72-105">As the volume of work grows, an application may need additional resources to maintain the desired performance levels and satisfy service-level agreements (SLAs).</span></span> <span data-ttu-id="85d72-106">需要が減り、追加のリソースが必要なくなった場合は、コストを下げるために割り当てを解除できます。</span><span class="sxs-lookup"><span data-stu-id="85d72-106">As demand slackens and the additional resources are no longer needed, they can be de-allocated to minimize costs.</span></span>

<span data-ttu-id="85d72-107">自動スケールは、クラウドでホストされている環境の弾力性を活用しながら、管理オーバーヘッドを削減します。</span><span class="sxs-lookup"><span data-stu-id="85d72-107">Autoscaling takes advantage of the elasticity of cloud-hosted environments while easing management overhead.</span></span> <span data-ttu-id="85d72-108">これにより、オペレーターがシステムのパフォーマンスを常時監視したり、リソースの追加や削除を判断する必要がなくなります。</span><span class="sxs-lookup"><span data-stu-id="85d72-108">It reduces the need for an operator to continually monitor the performance of a system and make decisions about adding or removing resources.</span></span>

<span data-ttu-id="85d72-109">アプリケーションを拡張する方法は、主に 2 つあります。</span><span class="sxs-lookup"><span data-stu-id="85d72-109">There are two main ways that an application can scale:</span></span>

- <span data-ttu-id="85d72-110">**垂直方向のスケーリング**スケール アップまたはスケール ダウンとも呼ばれ、リソースの容量を変更することを指します。</span><span class="sxs-lookup"><span data-stu-id="85d72-110">**Vertical scaling**, also called scaling up and down, means changing the capacity of a resource.</span></span> <span data-ttu-id="85d72-111">たとえば、アプリケーションをより大きい VM に移動する場合です。</span><span class="sxs-lookup"><span data-stu-id="85d72-111">For example, you could move an application to a larger VM size.</span></span> <span data-ttu-id="85d72-112">垂直方向のスケーリングでは、一般的に再デプロイのためにシステムの使用を一時的に中断する必要があります。</span><span class="sxs-lookup"><span data-stu-id="85d72-112">Vertical scaling often requires making the system temporarily unavailable while it is being redeployed.</span></span> <span data-ttu-id="85d72-113">したがって、垂直方向スケーリングの自動化はあまり一般的ではありません。</span><span class="sxs-lookup"><span data-stu-id="85d72-113">Therefore, it's less common to automate vertical scaling.</span></span>

- <span data-ttu-id="85d72-114">**水平方向のスケーリング**、スケール アウトまたはスケール インとも呼ばれ、リソースからインスタンスを追加または削除することを指します。</span><span class="sxs-lookup"><span data-stu-id="85d72-114">**Horizontal scaling**, also called scaling out and in, means adding or removing instances of a resource.</span></span> <span data-ttu-id="85d72-115">新しいリソースのプロビジョニング中も、アプリケーションの実行は中断されることなく継続されます。</span><span class="sxs-lookup"><span data-stu-id="85d72-115">The application continues running without interruption as new resources are provisioned.</span></span> <span data-ttu-id="85d72-116">プロビジョニング プロセスが完了すると、ソリューションはこれらの追加リソース上に展開されます。</span><span class="sxs-lookup"><span data-stu-id="85d72-116">When the provisioning process is complete, the solution is deployed on these additional resources.</span></span> <span data-ttu-id="85d72-117">需要が減った場合は、追加のリソースを正常にシャット ダウンし、割り当てを取り消せます。</span><span class="sxs-lookup"><span data-stu-id="85d72-117">If demand drops, the additional resources can be shut down cleanly and deallocated.</span></span>

<span data-ttu-id="85d72-118">Microsoft Azure を含む、多くのクラウドベース システムでは、水平自動スケールがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="85d72-118">Many cloud-based systems, including Microsoft Azure, support automatic horizontal scaling.</span></span> <span data-ttu-id="85d72-119">この記事の残りの部分では、水平自動スケールについて説明します。</span><span class="sxs-lookup"><span data-stu-id="85d72-119">The rest of this article focuses on horizontal scaling.</span></span>

> [!NOTE]
> <span data-ttu-id="85d72-120">自動スケールは、ほとんどの場合、コンピューティング リソースに適用されます。</span><span class="sxs-lookup"><span data-stu-id="85d72-120">Autoscaling mostly applies to compute resources.</span></span> <span data-ttu-id="85d72-121">データベースまたはメッセージ キューは水平方向に拡張できますが、これには、一般的に自動化されていない[データのパーティション分割](./data-partitioning.md)が必要になります。</span><span class="sxs-lookup"><span data-stu-id="85d72-121">While it's possible to horizontally scale a database or message queue, this usually involves [data partitioning](./data-partitioning.md), which is generally not automated.</span></span>

## <a name="overview"></a><span data-ttu-id="85d72-122">概要</span><span class="sxs-lookup"><span data-stu-id="85d72-122">Overview</span></span>

<span data-ttu-id="85d72-123">通常、自動スケール戦略を実装するには、次のコンポーネントやプロセスが必要になります。</span><span class="sxs-lookup"><span data-stu-id="85d72-123">An autoscaling strategy typically involves the following pieces:</span></span>

- <span data-ttu-id="85d72-124">アプリケーション、サービス、およびインフラストラクチャのレベルで運用する、インストルメンテーションおよび監視システム。</span><span class="sxs-lookup"><span data-stu-id="85d72-124">Instrumentation and monitoring systems at the application, service, and infrastructure levels.</span></span> <span data-ttu-id="85d72-125">これらのシステムは、応答時間、キューの長さ、CPU 使用率、メモリ使用量などの主要メトリックをキャプチャします。</span><span class="sxs-lookup"><span data-stu-id="85d72-125">These systems capture key metrics, such as response times, queue lengths, CPU utilization, and memory usage.</span></span>
- <span data-ttu-id="85d72-126">定義済みのしきい値またはスケジュールを基準にこれらのメトリックを評価し、拡張するかどうかを決定する意思決定ロジック。</span><span class="sxs-lookup"><span data-stu-id="85d72-126">Decision-making logic that evaluates these metrics against predefined thresholds or schedules, and decides whether to scale.</span></span>
- <span data-ttu-id="85d72-127">システムを拡張するコンポーネントです。</span><span class="sxs-lookup"><span data-stu-id="85d72-127">Components that scale the system.</span></span>
- <span data-ttu-id="85d72-128">自動スケール戦略を期待どおりに機能させるための、戦略のテスト、監視、および調整。</span><span class="sxs-lookup"><span data-stu-id="85d72-128">Testing, monitoring, and tuning of the autoscaling strategy to ensure that it functions as expected.</span></span>

<span data-ttu-id="85d72-129">Azure には、一般的なシナリオに対応するための自動スケール メカニズムが組み込まれています。</span><span class="sxs-lookup"><span data-stu-id="85d72-129">Azure provides built-in autoscaling mechanisms that address common scenarios.</span></span> <span data-ttu-id="85d72-130">特定のサービスやテクノロジに自動スケール機能が組み込まれていない場合、またはその機能以上の特定の自動スケールの要件がある場合は、カスタム実装を検討できます。</span><span class="sxs-lookup"><span data-stu-id="85d72-130">If a particular service or technology does not have built-in autoscaling functionality, or if you have specific autoscaling requirements beyond its capabilities, you might consider a custom implementation.</span></span> <span data-ttu-id="85d72-131">カスタム実装では、運用およびシステム メトリックを収集し、メトリックを解析して、それに従ってリソースを拡張します。</span><span class="sxs-lookup"><span data-stu-id="85d72-131">A custom implementation would collect operational and system metrics, analyze the metrics, and then scale resources accordingly.</span></span>

## <a name="configure-autoscaling-for-an-azure-solution"></a><span data-ttu-id="85d72-132">Azure ソリューションの自動スケールの構成</span><span class="sxs-lookup"><span data-stu-id="85d72-132">Configure autoscaling for an Azure solution</span></span>

<span data-ttu-id="85d72-133">Azure には、ほぼすべてのコンピューティング オプションに対応する自動スケール機能が組み込まれています。</span><span class="sxs-lookup"><span data-stu-id="85d72-133">Azure provides built-in autoscaling for most compute options.</span></span>

- <span data-ttu-id="85d72-134">**Virtual Machines** は、Azure の仮想マシン セットをグループとして管理する方法である、[VM Scale Sets][vm-scale-sets] を使用して自動スケールをサポートします。</span><span class="sxs-lookup"><span data-stu-id="85d72-134">**Virtual Machines** support autoscaling through the use of [VM Scale Sets][vm-scale-sets], which are a way to manage a set of Azure virtual machines as a group.</span></span> <span data-ttu-id="85d72-135">「[自動スケールと仮想マシン スケール セットの使用方法][vm-scale-sets-autoscale]」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-135">See [How to use automatic scaling and Virtual Machine Scale Sets][vm-scale-sets-autoscale].</span></span>

- <span data-ttu-id="85d72-136">**Service Fabric** でも自動スケールは VM Scale Sets を通してサポートされています。</span><span class="sxs-lookup"><span data-stu-id="85d72-136">**Service Fabric** also supports auto-scaling through VM Scale Sets.</span></span> <span data-ttu-id="85d72-137">Service Fabric クラスターにあるすべてのノード タイプは、個別の VM Scale Sets として設定されています。</span><span class="sxs-lookup"><span data-stu-id="85d72-137">Every node type in a Service Fabric cluster is set up as a separate VM scale set.</span></span> <span data-ttu-id="85d72-138">これにより、各ノード タイプはそれぞれ個別にスケール インまたはスケール アウトできます。</span><span class="sxs-lookup"><span data-stu-id="85d72-138">That way, each node type can be scaled in or out independently.</span></span> <span data-ttu-id="85d72-139">「[自動スケール ルールを使用した Service Fabric クラスターのスケールインとスケールアウト][service-fabric-autoscale]」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-139">See [Scale a Service Fabric cluster in or out using auto-scale rules][service-fabric-autoscale].</span></span>

- <span data-ttu-id="85d72-140">**Azure App Service** には、自動スケール機能が組み込まれています。</span><span class="sxs-lookup"><span data-stu-id="85d72-140">**Azure App Service** has built-in autoscaling.</span></span> <span data-ttu-id="85d72-141">自動スケール設定は、App Service 内のすべてのアプリに適用されます。</span><span class="sxs-lookup"><span data-stu-id="85d72-141">Autoscale settings apply to all of the apps within an App Service.</span></span> <span data-ttu-id="85d72-142">「[手動または自動によるインスタンス数のスケール変更][app-service-autoscale]」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-142">See [Scale instance count manually or automatically][app-service-autoscale].</span></span>

- <span data-ttu-id="85d72-143">**Azure Cloud Services** には、ロール レベルの自動スケールが組み込まれています。</span><span class="sxs-lookup"><span data-stu-id="85d72-143">**Azure Cloud Services** has built-in autoscaling at the role level.</span></span> <span data-ttu-id="85d72-144">「[ポータルでクラウド サービスの自動スケールを構成する方法][cloud-services-autoscale]」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-144">See [How to configure auto scaling for a Cloud Service in the portal][cloud-services-autoscale].</span></span>

<span data-ttu-id="85d72-145">これらの計算オプションはすべて [Azure Monitor 自動スケール][monitoring]を使用して、一般的な自動スケール機能を提供します。</span><span class="sxs-lookup"><span data-stu-id="85d72-145">These compute options all use [Azure Monitor autoscale][monitoring] to provide a common set of autoscaling functionality.</span></span>

- <span data-ttu-id="85d72-146">**Azure Functions** は、自動スケール規則を構成する必要がない点で、以前のコンピューティング オプションとは異なります。</span><span class="sxs-lookup"><span data-stu-id="85d72-146">**Azure Functions** differs from the previous compute options, because you don't need to configure any autoscale rules.</span></span> <span data-ttu-id="85d72-147">Azure Functions では、コードの実行中に、負荷を処理するために必要なコンピューティング能力が自動的に割り当てられます。</span><span class="sxs-lookup"><span data-stu-id="85d72-147">Instead, Azure Functions automatically allocates compute power when your code is running, scaling out as necessary to handle load.</span></span> <span data-ttu-id="85d72-148">詳細については、「[Azure Functions の適切なホスティング プランを選択する][functions-scale]」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-148">For more information, see [Choose the correct hosting plan for Azure Functions][functions-scale].</span></span>

<span data-ttu-id="85d72-149">最後に、カスタムの自動スケール ソリューションが役に立つ場合があります。</span><span class="sxs-lookup"><span data-stu-id="85d72-149">Finally, a custom autoscaling solution can sometimes be useful.</span></span> <span data-ttu-id="85d72-150">たとえば、Azure 診断およびアプリケーションベースのメトリックやカスタム コードを使用して、アプリケーション メトリックを監視およびエクスポートできます。</span><span class="sxs-lookup"><span data-stu-id="85d72-150">For example, you could use Azure diagnostics and application-based metrics, along with custom code to monitor and export the application metrics.</span></span> <span data-ttu-id="85d72-151">その後、これらのメトリックに基づいてカスタムの規則を定義し、Resource Manager REST API を使用して、自動スケールを開始できます。</span><span class="sxs-lookup"><span data-stu-id="85d72-151">Then you could define custom rules based on these metrics, and use Resource Manager REST APIs to trigger autoscaling.</span></span> <span data-ttu-id="85d72-152">ただし、カスタム ソリューションの実装は容易ではないため、前述の手法では要件を完全に満たすことができない場合にのみ検討してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-152">However, a custom solution is not simple to implement, and should be considered only if none of the previous approaches can fulfill your requirements.</span></span>

<span data-ttu-id="85d72-153">プラットフォームに組み込まれた自動スケール機能で要件を満たせる場合は、それを使用します。</span><span class="sxs-lookup"><span data-stu-id="85d72-153">Use the built-in autoscaling features of the platform, if they meet your requirements.</span></span> <span data-ttu-id="85d72-154">満たせない場合は、より複雑なスケーリング機能が本当に必要かどうかを慎重に検討してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-154">If not, carefully consider whether you really need more complex scaling features.</span></span> <span data-ttu-id="85d72-155">追加要件には、より詳細な制御、スケーリングのトリガー イベントに対するさまざまな方法での検出、サブスクリプション間でのスケーリング、他の種類のリソースのスケーリングなどが挙げられます。</span><span class="sxs-lookup"><span data-stu-id="85d72-155">Examples of additional requirements may include more granularity of control, different ways to detect trigger events for scaling, scaling across subscriptions, and scaling other types of resources.</span></span>

## <a name="use-azure-monitor-autoscale"></a><span data-ttu-id="85d72-156">Azure Monitor 自動スケールの使用</span><span class="sxs-lookup"><span data-stu-id="85d72-156">Use Azure Monitor autoscale</span></span>

<span data-ttu-id="85d72-157">[Azure Monitor 自動スケール][monitoring]は、VM Scale Sets、Azure App Service および Azure Cloud Service に共通の自動スケール機能です。</span><span class="sxs-lookup"><span data-stu-id="85d72-157">[Azure Monitor autoscale][monitoring] provide a common set of autoscaling functionality for VM Scale Sets, Azure App Service, and Azure Cloud Service.</span></span> <span data-ttu-id="85d72-158">スケーリングは、スケジュールに従って、または CPU またはメモリ使用率などのランタイム メトリックに基づいて実行できます。</span><span class="sxs-lookup"><span data-stu-id="85d72-158">Scaling can be performed on a schedule, or based on a runtime metric, such as CPU or memory usage.</span></span> <span data-ttu-id="85d72-159">次に例を示します。</span><span class="sxs-lookup"><span data-stu-id="85d72-159">Examples:</span></span>

- <span data-ttu-id="85d72-160">平日は 10 個のインスタンスにスケール アウトとし、土曜日と日曜日は 4 つのインスタンスにスケール インします。</span><span class="sxs-lookup"><span data-stu-id="85d72-160">Scale out to 10 instances on weekdays, and scale in to 4 instances on Saturday and Sunday.</span></span>
- <span data-ttu-id="85d72-161">平均 CPU 使用率が 70% を上回る場合はインスタンス 1 つ分スケール アウトし、CPU 使用率が 50% を下回る場合はインスタンス 1 つ分スケール インします。</span><span class="sxs-lookup"><span data-stu-id="85d72-161">Scale out by one instance if average CPU usage is above 70%, and scale in by one instance if CPU usage falls below 50%.</span></span>
- <span data-ttu-id="85d72-162">キュー内のメッセージの数が特定のしきい値を超える場合は、インスタンス 1 つ分スケール アウトします。</span><span class="sxs-lookup"><span data-stu-id="85d72-162">Scale out by one instance if the number of messages in a queue exceeds a certain threshold.</span></span>

<span data-ttu-id="85d72-163">組み込まれているメトリックの一覧については、「[Azure Monitor の自動スケールの一般的なメトリック][autoscale-metrics]」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-163">For a list of built-in metrics, see [Azure Monitor autoscaling common metrics][autoscale-metrics].</span></span> <span data-ttu-id="85d72-164">Application Insights を使用してカスタム メトリックを実装することもできます。</span><span class="sxs-lookup"><span data-stu-id="85d72-164">You can also implement custom metrics by using Application Insights.</span></span>

<span data-ttu-id="85d72-165">自動スケールは、PowerShell、Azure CLI、Azure Resource Manager テンプレートの場合、または Azure ポータルを使用して構成できます。</span><span class="sxs-lookup"><span data-stu-id="85d72-165">You can configure autoscaling by using PowerShell, the Azure CLI, an Azure Resource Manager template, or the Azure portal.</span></span> <span data-ttu-id="85d72-166">より詳細な制御は、[Azure Resource Manager REST API](https://msdn.microsoft.com//library/azure/dn790568.aspx) を使用して構成できます。</span><span class="sxs-lookup"><span data-stu-id="85d72-166">For more detailed control, use the [Azure Resource Manager REST API](https://msdn.microsoft.com//library/azure/dn790568.aspx).</span></span> <span data-ttu-id="85d72-167">[Azure Monitoring Service 管理ライブラリ](https://www.nuget.org/packages/Microsoft.WindowsAzure.Management.Monitoring)と [Microsoft Insights ライブラリ](https://www.nuget.org/packages/Microsoft.Azure.Insights/) (プレビュー) は SDK です。REST API を利用して、さまざまなリソースからメトリックを収集し、自動スケールを実行することができます。</span><span class="sxs-lookup"><span data-stu-id="85d72-167">The [Azure Monitoring Service Management Library](https://www.nuget.org/packages/Microsoft.WindowsAzure.Management.Monitoring) and the [Microsoft Insights Library](https://www.nuget.org/packages/Microsoft.Azure.Insights/) (in preview) are SDKs that allow collecting metrics from different resources, and perform autoscaling by making use of the REST APIs.</span></span> <span data-ttu-id="85d72-168">Azure Resource Manager にリソースが対応していない場合や、Azure Cloud Services を使用している場合は、Service Management REST API を自動スケールに使用できます。</span><span class="sxs-lookup"><span data-stu-id="85d72-168">For resources where Azure Resource Manager support isn't available, or if you are using Azure Cloud Services, the Service Management REST API can be used for autoscaling.</span></span> <span data-ttu-id="85d72-169">それ以外のすべてのケースでは、Azure Resource Manager を使用してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-169">In all other cases, use Azure Resource Manager.</span></span>

<span data-ttu-id="85d72-170">Azure 自動スケールを使用する場合は、次の点を考慮してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-170">Consider the following points when using Azure autoscale:</span></span>

- <span data-ttu-id="85d72-171">スケジュールされた自動スケールを使用し、予測される需要ピーク時に対応するためにインスタンスを追加および削除することにより、十分な精度でアプリケーションの負荷を予測できるかどうかを検討します。</span><span class="sxs-lookup"><span data-stu-id="85d72-171">Consider whether you can predict the load on the application well enough to use scheduled autoscaling, adding and removing instances to meet anticipated peaks in demand.</span></span> <span data-ttu-id="85d72-172">これが不可能な場合は、実行時に収集されたメトリックに基づくリアクティブ自動スケールを使用して、予測不可能な需要の変化にアプリケーションが対応できるようにします。</span><span class="sxs-lookup"><span data-stu-id="85d72-172">If this isn't possible, use reactive autoscaling based on runtime metrics, in order to handle unpredictable changes in demand.</span></span> <span data-ttu-id="85d72-173">通常は、これらの手法を組み合わせることができます。</span><span class="sxs-lookup"><span data-stu-id="85d72-173">Typically, you can combine these approaches.</span></span> <span data-ttu-id="85d72-174">たとえば、アプリケーションが最もビジー状態になることがわかっている時間のスケジュールに基づいてリソースを追加する戦略を作成します。</span><span class="sxs-lookup"><span data-stu-id="85d72-174">For example, create a strategy that adds resources based on a schedule of the times when you know the application is most busy.</span></span> <span data-ttu-id="85d72-175">これにより、新しいインスタンスの開始時に遅延することなく、必要なときに容量を確保できます。</span><span class="sxs-lookup"><span data-stu-id="85d72-175">This helps to ensure that capacity is available when required, without any delay from starting new instances.</span></span> <span data-ttu-id="85d72-176">また、スケジュールされたルールごとに、その期間のリアクティブ自動スケールを有効にし、持続的だが予測不可能な需要ピークをアプリケーションが処理できるメトリックを定義します。</span><span class="sxs-lookup"><span data-stu-id="85d72-176">For each scheduled rule, define metrics that allow reactive autoscaling during that period to ensure that the application can handle sustained but unpredictable peaks in demand.</span></span>

- <span data-ttu-id="85d72-177">特にアプリケーションが初めてデプロイされたときは、メトリックと容量要件の関係を理解しにくいことがよくあります。</span><span class="sxs-lookup"><span data-stu-id="85d72-177">It's often difficult to understand the relationship between metrics and capacity requirements, especially when an application is initially deployed.</span></span> <span data-ttu-id="85d72-178">最初は容量を少し余分に追加し、その後自動スケール ルールを監視および調整して、実際の負荷に容量を近づけることをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="85d72-178">Provision a little extra capacity at the beginning, and then monitor and tune the autoscaling rules to bring the capacity closer to the actual load.</span></span>

- <span data-ttu-id="85d72-179">自動スケール ルールを構成し、一定期間、アプリケーションのパフォーマンスを監視します。</span><span class="sxs-lookup"><span data-stu-id="85d72-179">Configure the autoscaling rules, and then monitor the performance of your application over time.</span></span> <span data-ttu-id="85d72-180">この監視結果を使用して、必要に応じてシステムをスケールする方法を調整します。</span><span class="sxs-lookup"><span data-stu-id="85d72-180">Use the results of this monitoring to adjust the way in which the system scales if necessary.</span></span> <span data-ttu-id="85d72-181">ただし、自動スケールは即時に結果を得られるプロセスではありません。</span><span class="sxs-lookup"><span data-stu-id="85d72-181">However, keep in mind that autoscaling is not an instantaneous process.</span></span> <span data-ttu-id="85d72-182">指定したしきい値を超過する (または下回る) 平均 CPU 使用率など、何らかのメトリックに反応するには一定の時間を要します。</span><span class="sxs-lookup"><span data-stu-id="85d72-182">It takes time to react to a metric such as average CPU utilization exceeding (or falling below) a specified threshold.</span></span>

- <span data-ttu-id="85d72-183">測定されたトリガー属性 (CPU 使用率やキューの長さなど) に基づく検出メカニズムを使用する自動スケール ルールでは、瞬間的な値ではなく、長期にわたって集計された値を使用して自動スケール アクションがトリガーされます。</span><span class="sxs-lookup"><span data-stu-id="85d72-183">Autoscaling rules that use a detection mechanism based on a measured trigger attribute (such as CPU usage or queue length) use an aggregated value over time, rather than instantaneous values, to trigger an autoscaling action.</span></span> <span data-ttu-id="85d72-184">既定では、集計は値の平均になります。</span><span class="sxs-lookup"><span data-stu-id="85d72-184">By default, the aggregate is an average of the values.</span></span> <span data-ttu-id="85d72-185">これにより、システムの反応が早すぎたり、急激な変動が生じたりすることが回避されます。</span><span class="sxs-lookup"><span data-stu-id="85d72-185">This prevents the system from reacting too quickly, or causing rapid oscillation.</span></span> <span data-ttu-id="85d72-186">また、自動的に開始された新しいインスタンスが実行モードになるまでの時間を確保し、新しいインスタンスの開始中に追加の自動スケール アクションが実行されないようにすることもできます。</span><span class="sxs-lookup"><span data-stu-id="85d72-186">It also allows time for new instances that are auto-started to settle into running mode, preventing additional autoscaling actions from occurring while the new instances are starting up.</span></span> <span data-ttu-id="85d72-187">Azure Cloud Services や Azure Virtual Machines については、既定の集計期間は 45 分であるため、需要の急増に反応して自動スケールをトリガーするメトリックに、この長さまでの時間を設定できます。</span><span class="sxs-lookup"><span data-stu-id="85d72-187">For Azure Cloud Services and Azure Virtual Machines, the default period for the aggregation is 45 minutes, so it can take up to this period of time for the metric to trigger autoscaling in response to spikes in demand.</span></span> <span data-ttu-id="85d72-188">SDK を使って集計期間を変更できますが、25 分未満の期間を設定すると、予期しない結果が生じる場合があります。</span><span class="sxs-lookup"><span data-stu-id="85d72-188">You can change the aggregation period by using the SDK, but be aware that periods of fewer than 25 minutes may cause unpredictable results.</span></span> <span data-ttu-id="85d72-189">Web Apps では、平均の期間はかなり短く、平均のトリガー測定への変更後、約 5 分間で新しいインスタンスを使用できるようになります。</span><span class="sxs-lookup"><span data-stu-id="85d72-189">For Web Apps, the averaging period is much shorter, allowing new instances to be available in about five minutes after a change to the average trigger measure.</span></span>

- <span data-ttu-id="85d72-190">ポータルではなく SDK を使用して自動スケールを構成する場合は、ルールが有効な期間の、より詳細なスケジュールを指定できます。</span><span class="sxs-lookup"><span data-stu-id="85d72-190">If you configure autoscaling using the SDK rather than the portal, you can specify a more detailed schedule during which the rules are active.</span></span> <span data-ttu-id="85d72-191">独自のメトリックを作成し、自動スケール ルールで既存のメトリックと共に使用したり、単独で使用したりすることもできます。</span><span class="sxs-lookup"><span data-stu-id="85d72-191">You can also create your own metrics and use them with or without any of the existing ones in your autoscaling rules.</span></span> <span data-ttu-id="85d72-192">たとえば、1 秒あたりの要求数や使用可能なメモリ平均量などの代替カウンターを使用することも、特定のビジネス プロセスを測定するカスタム カウンターを使用することもできます。</span><span class="sxs-lookup"><span data-stu-id="85d72-192">For example, you may wish to use alternative counters, such as the number of requests per second or the average memory availability, or use custom counters that measure specific business processes.</span></span>

- <span data-ttu-id="85d72-193">Service Fabric を自動スケールする場合、クラスター内のノードの種類は、バックエンドでは VM Scale Sets で構成されるため、ノードの種類ごとに自動スケール ルールを設定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="85d72-193">When autoscaling Service Fabric, the node types in your cluster are made of VM scale sets at the backend, so you need to set up auto-scale rules for each node type.</span></span> <span data-ttu-id="85d72-194">自動スケールを設定する前に、必要なノードの数を考慮します。</span><span class="sxs-lookup"><span data-stu-id="85d72-194">Take into account the number of nodes that you must have before you set up auto-scaling.</span></span> <span data-ttu-id="85d72-195">ノードの種類がプライマリである場合に必要なノードの最小数は、選択した信頼性のレベルによって決まります。</span><span class="sxs-lookup"><span data-stu-id="85d72-195">The minimum number of nodes that you must have for the primary node type is driven by the reliability level you have chosen.</span></span> <span data-ttu-id="85d72-196">詳細については、「[自動スケール ルールを使用した Service Fabric クラスターのスケールインとスケールアウト](/azure/service-fabric/service-fabric-cluster-scale-up-down)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-196">For more info, see [scale a Service Fabric cluster in or out using auto-scale rules](/azure/service-fabric/service-fabric-cluster-scale-up-down).</span></span>

- <span data-ttu-id="85d72-197">ポータルを使用して、SQL Database のインスタンスやキューなどのリンク リソースを Cloud Service インスタンスにリンクできます。</span><span class="sxs-lookup"><span data-stu-id="85d72-197">You can use the portal to link resources such as SQL Database instances and queues to a Cloud Service instance.</span></span> <span data-ttu-id="85d72-198">これにより、リンクされたリソースごとに、より簡単に別個の手動および自動スケーリング構成オプションにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="85d72-198">This allows you to more easily access the separate manual and automatic scaling configuration options for each of the linked resources.</span></span> <span data-ttu-id="85d72-199">詳細については、「[方法:クラウド サービスに対するリソースのリンク](/azure/cloud-services/cloud-services-how-to-manage)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-199">For more information, see [How to: Link a resource to a cloud service](/azure/cloud-services/cloud-services-how-to-manage).</span></span>

- <span data-ttu-id="85d72-200">複数のポリシーとルールを構成するときは、それらが互いに競合する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="85d72-200">When you configure multiple policies and rules, they could conflict with each other.</span></span> <span data-ttu-id="85d72-201">自動スケールでは次の競合の解決ルールに従って、常に十分な数のインスタンスが実行されます。</span><span class="sxs-lookup"><span data-stu-id="85d72-201">Autoscale uses the following conflict resolution rules to ensure that there is always a sufficient number of instances running:</span></span>
  - <span data-ttu-id="85d72-202">スケールアウト操作は、スケールイン操作よりも常に優先されます。</span><span class="sxs-lookup"><span data-stu-id="85d72-202">Scale out operations always take precedence over scale in operations.</span></span>
  - <span data-ttu-id="85d72-203">スケールアウト操作が競合した場合は、インスタンス数を最も増加させるルールが優先されます。</span><span class="sxs-lookup"><span data-stu-id="85d72-203">When scale out operations conflict, the rule that initiates the largest increase in the number of instances takes precedence.</span></span>
  - <span data-ttu-id="85d72-204">スケールイン操作が競合した場合は、インスタンス数を最も減少させるルールが優先されます。</span><span class="sxs-lookup"><span data-stu-id="85d72-204">When scale in operations conflict, the rule that initiates the smallest decrease in the number of instances takes precedence.</span></span>

- <span data-ttu-id="85d72-205">App Service Environment では、任意のワーカー プールまたはフロントエンド メトリックを使用して、自動スケール ルールを定義することができます。</span><span class="sxs-lookup"><span data-stu-id="85d72-205">In an App Service Environment any worker pool or front-end metrics can be used to define autoscale rules.</span></span> <span data-ttu-id="85d72-206">詳細については、「[Autoscaling and App Service Environment (自動スケールと App Service Environment v1)](/azure/app-service/app-service-environment-auto-scale)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-206">For more information, see [Autoscaling and App Service Environment](/azure/app-service/app-service-environment-auto-scale).</span></span>

## <a name="application-design-considerations"></a><span data-ttu-id="85d72-207">アプリケーション設計に関する考慮事項</span><span class="sxs-lookup"><span data-stu-id="85d72-207">Application design considerations</span></span>

<span data-ttu-id="85d72-208">自動スケールは単純なソリューションではありません。</span><span class="sxs-lookup"><span data-stu-id="85d72-208">Autoscaling isn't an instant solution.</span></span> <span data-ttu-id="85d72-209">単にリソースをシステムに追加したり、実行するプロセスのインスタンスを増やしたりするだけで、システムのパフォーマンスが確実に向上するわけではありません。</span><span class="sxs-lookup"><span data-stu-id="85d72-209">Simply adding resources to a system or running more instances of a process doesn't guarantee that the performance of the system will improve.</span></span> <span data-ttu-id="85d72-210">自動スケール戦略を作成するときには、次の点を考慮してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-210">Consider the following points when designing an autoscaling strategy:</span></span>

- <span data-ttu-id="85d72-211">システムは、水平方向にスケールできるように設計されている必要があります。</span><span class="sxs-lookup"><span data-stu-id="85d72-211">The system must be designed to be horizontally scalable.</span></span> <span data-ttu-id="85d72-212">インスタンスのアフィニティに関して仮説を立てることは避けます。あるコードが常にプロセスの特定のインスタンスで実行されている必要があるようなソリューションを作成しないでください。</span><span class="sxs-lookup"><span data-stu-id="85d72-212">Avoid making assumptions about instance affinity; do not design solutions that require that the code is always running in a specific instance of a process.</span></span> <span data-ttu-id="85d72-213">クラウド サービスまたは Web サイトを水平方向にスケールする場合、同じソースからの一連の要求が常に同じインスタンスにルーティングされると想定しないでください。</span><span class="sxs-lookup"><span data-stu-id="85d72-213">When scaling a cloud service or web site horizontally, don't assume that a series of requests from the same source will always be routed to the same instance.</span></span> <span data-ttu-id="85d72-214">同様の理由で、アプリケーションからの一連の要求が常にサービスの同じインスタンスにルーティングされなくても済むように、サービスはステートレスになるように設計します。</span><span class="sxs-lookup"><span data-stu-id="85d72-214">For the same reason, design services to be stateless to avoid requiring a series of requests from an application to always be routed to the same instance of a service.</span></span> <span data-ttu-id="85d72-215">キューからメッセージを読み取り、それらを処理するサービスを設計する場合、サービスのどのインスタンスが特定のメッセージを処理するかを事前に想定しないでください。</span><span class="sxs-lookup"><span data-stu-id="85d72-215">When designing a service that reads messages from a queue and processes them, don't make any assumptions about which instance of the service handles a specific message.</span></span> <span data-ttu-id="85d72-216">キューの長さが長くなると、自動スケールによってサービスの追加インスタンスが開始される可能性があるためです。</span><span class="sxs-lookup"><span data-stu-id="85d72-216">Autoscaling could start additional instances of a service as the queue length grows.</span></span> <span data-ttu-id="85d72-217">「[競合コンシューマー パターン](../patterns/competing-consumers.md)」には、この状況に対処する方法が記載されています。</span><span class="sxs-lookup"><span data-stu-id="85d72-217">The [Competing Consumers pattern](../patterns/competing-consumers.md) describes how to handle this scenario.</span></span>

- <span data-ttu-id="85d72-218">ソリューションで長期タスクを実装する場合、このタスクを作成して、スケールアウトとスケールインの両方がサポートされるようにします。</span><span class="sxs-lookup"><span data-stu-id="85d72-218">If the solution implements a long-running task, design this task to support both scaling out and scaling in.</span></span> <span data-ttu-id="85d72-219">しかるべき注意を払わなければ、そのようなタスクにより、システムをスケールインするときにプロセスのインスタンスが正常にシャットダウンされなかったり、プロセスが強制的に終了された場合にデータが失われたりする可能性があります。</span><span class="sxs-lookup"><span data-stu-id="85d72-219">Without due care, such a task could prevent an instance of a process from being shut down cleanly when the system scales in, or it could lose data if the process is forcibly terminated.</span></span> <span data-ttu-id="85d72-220">可能であれば、長期タスクをリファクタリングし、プロセスを分割して、より小さい、個別のまとまりで実行されるようにします。</span><span class="sxs-lookup"><span data-stu-id="85d72-220">Ideally, refactor a long-running task and break up the processing that it performs into smaller, discrete chunks.</span></span> <span data-ttu-id="85d72-221">「[パイプとフィルターのパターン](../patterns/pipes-and-filters.md)」には、これを行う方法の例が記載されています。</span><span class="sxs-lookup"><span data-stu-id="85d72-221">The [Pipes and Filters pattern](../patterns/pipes-and-filters.md) provides an example of how you can achieve this.</span></span>

- <span data-ttu-id="85d72-222">あるいは、一定の間隔でタスクの状態に関する情報を記録するチェックポイント メカニズムを使用し、タスクを実行しているプロセスのすべてのインスタンスがアクセスできる永続的ストレージにその状態を保存することもできます。</span><span class="sxs-lookup"><span data-stu-id="85d72-222">Alternatively, you can implement a checkpoint mechanism that records state information about the task at regular intervals, and save this state in durable storage that can be accessed by any instance of the process running the task.</span></span> <span data-ttu-id="85d72-223">このようにすることで、プロセスがシャットダウンされても、別のインスタンスを使用して、そのプロセスによって実行されていた作業を最後のチェックポイントから再開できます。</span><span class="sxs-lookup"><span data-stu-id="85d72-223">In this way, if the process is shutdown, the work that it was performing can be resumed from the last checkpoint by using another instance.</span></span>

- <span data-ttu-id="85d72-224">クラウド サービスでホストされているアプリケーションの worker ロールなど、別個のコンピューティング インスタンスでバックグラウンド タスクが実行されている場合、別のスケーリング ポリシーを使用してアプリケーションのさまざまな部分をスケールする必要が生じることがあります。</span><span class="sxs-lookup"><span data-stu-id="85d72-224">When background tasks run on separate compute instances, such as in worker roles of a cloud services hosted application, you may need to scale different parts of the application using different scaling policies.</span></span> <span data-ttu-id="85d72-225">たとえば、バックグラウンド コンピューティング インスタンスの数を増やさずに、ユーザーインターフェイス (UI) コンピューティング インスタンスをさらにデプロイしたり、その反対の処理を行ったりしなくてはならない場合があります。</span><span class="sxs-lookup"><span data-stu-id="85d72-225">For example, you may need to deploy additional user interface (UI) compute instances without increasing the number of background compute instances, or the opposite of this.</span></span> <span data-ttu-id="85d72-226">異なるレベルのサービス (Basic、および Premium サービス パッケージなど) を提供する場合、SLA に準拠するために、Basic サービス パッケージのコンピューティング リソースよりも、Premium サービス パッケージのコンピューティング リソースの方をより積極的にスケールアウトする必要が生じる可能性があります。</span><span class="sxs-lookup"><span data-stu-id="85d72-226">If you offer different levels of service (such as basic and premium service packages), you may need to scale out the compute resources for premium service packages more aggressively than those for basic service packages in order to meet SLAs.</span></span>

- <span data-ttu-id="85d72-227">自動スケール戦略の基準として、UI とバックグラウンド コンピューティング インスタンスが通信に使用するキューの長さを使用することを検討してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-227">Consider using the length of the queue over which UI and background compute instances communicate as a criterion for your autoscaling strategy.</span></span> <span data-ttu-id="85d72-228">これは、バックグラウンド タスクの現在の負荷と処理能力の間の不均衡または差異を最も明確に示す指標です。</span><span class="sxs-lookup"><span data-stu-id="85d72-228">This is the best indicator of an imbalance or difference between the current load and the processing capacity of the background task.</span></span>

- <span data-ttu-id="85d72-229">1 時間当たりに行われた命令数や複雑なトランザクションの平均実行時間など、ビジネス プロセスを測定するカウンターに基づいて自動スケール戦略を作成する場合は、そのようなタイプのカウンターから得られる結果と実際のコンピューティング能力の要件の関係を完全に理解してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-229">If you base your autoscaling strategy on counters that measure business processes, such as the number of orders placed per hour or the average execution time of a complex transaction, ensure that you fully understand the relationship between the results from these types of counters and the actual compute capacity requirements.</span></span> <span data-ttu-id="85d72-230">ビジネス プロセス カウンターの変更に応じて、複数のコンポーネントまたはコンピューティング ユニットをスケールする必要が生じる場合があります。</span><span class="sxs-lookup"><span data-stu-id="85d72-230">It may be necessary to scale more than one component or compute unit in response to changes in business process counters.</span></span>

- <span data-ttu-id="85d72-231">システムによって過度なスケールアウトが試行されたり、多数のインスタンス実行に関連するコストが生じたりしないようにするために、自動的に追加できるインスタンスの最大数を制限することを検討してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-231">To prevent a system from attempting to scale out excessively, and to avoid the costs associated with running many thousands of instances, consider limiting the maximum number of instances that can be automatically added.</span></span> <span data-ttu-id="85d72-232">大部分の自動スケール メカニズムでは、任意のルールに基づいてインスタンスの最小数と最大数を指定できます。</span><span class="sxs-lookup"><span data-stu-id="85d72-232">Most autoscaling mechanisms allow you to specify the minimum and maximum number of instances for a rule.</span></span> <span data-ttu-id="85d72-233">また、インスタンスの最大数を設定しても、システムが依然としてオーバーロードの状態である場合には、システムによって提供される機能を適度に低下させることを検討してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-233">In addition, consider gracefully degrading the functionality that the system provides if the maximum number of instances have been deployed, and the system is still overloaded.</span></span>

- <span data-ttu-id="85d72-234">自動スケールは、ワークロードの急激な増加を処理する最も適切なメカニズムではない場合もあることに留意してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-234">Keep in mind that autoscaling might not be the most appropriate mechanism to handle a sudden burst in workload.</span></span> <span data-ttu-id="85d72-235">サービスの新しいインスタンスをプロビジョニングして開始したり、リソースをシステムに追加したりする作業は時間を要します。また、追加したそれらのリソースが使用できるようになるまでに、ピーク需要が過ぎてしまう可能性もあります。</span><span class="sxs-lookup"><span data-stu-id="85d72-235">It takes time to provision and start new instances of a service or add resources to a system, and the peak demand may have passed by the time these additional resources have been made available.</span></span> <span data-ttu-id="85d72-236">このようなときは、サービスを調整したほうがよい場合があります。</span><span class="sxs-lookup"><span data-stu-id="85d72-236">In this scenario, it may be better to throttle the service.</span></span> <span data-ttu-id="85d72-237">詳細については、「[調整パターン](../patterns/throttling.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-237">For more information, see the [Throttling pattern](../patterns/throttling.md).</span></span>

- <span data-ttu-id="85d72-238">逆に、ボリュームが急激に変動する場合にすべての要求を処理する容量が必要であり、コストが主な検討要因ではない場合は、追加インスタンスをより迅速に開始する積極的な自動スケール戦略の使用を検討してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-238">Conversely, if you do need the capacity to process all requests when the volume fluctuates rapidly, and cost isn't a major contributing factor, consider using an aggressive autoscaling strategy that starts additional instances more quickly.</span></span> <span data-ttu-id="85d72-239">また、負荷が予見される前に、十分な数のインスタンスを開始して最大負荷に対応するようにスケジュール設定されたポリシーを使用する方法もあります。</span><span class="sxs-lookup"><span data-stu-id="85d72-239">You can also use a scheduled policy that starts a sufficient number of instances to meet the maximum load before that load is expected.</span></span>

- <span data-ttu-id="85d72-240">自動スケール メカニズムでは、自動スケール プロセスを監視し、各自動スケール イベントの詳細 (イベントがトリガーされた理由、追加または削除されたリソース、それらの日時) を記録する必要があります。</span><span class="sxs-lookup"><span data-stu-id="85d72-240">The autoscaling mechanism should monitor the autoscaling process, and log the details of each autoscaling event (what triggered it, what resources were added or removed, and when).</span></span> <span data-ttu-id="85d72-241">カスタムの自動スケール メカニズムを作成する場合は、この機能が組み込まれていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-241">If you create a custom autoscaling mechanism, ensure that it incorporates this capability.</span></span> <span data-ttu-id="85d72-242">情報を分析して、自動スケール戦略の効果を測定し、必要に応じて調整します。</span><span class="sxs-lookup"><span data-stu-id="85d72-242">Analyze the information to help measure the effectiveness of the autoscaling strategy, and tune it if necessary.</span></span> <span data-ttu-id="85d72-243">使用パターンがより明確な場合は短期間の調整を行い、ビジネスが拡大したり、アプリケーションの要件が増加したりする場合は長期間の調整を行うことができます。</span><span class="sxs-lookup"><span data-stu-id="85d72-243">You can tune both in the short term, as the usage patterns become more obvious, and over the long term, as the business expands or the requirements of the application evolve.</span></span> <span data-ttu-id="85d72-244">アプリケーションが自動スケールの定義された上限に到達すると、このメカニズムにより、必要に応じて追加リソースを手動で開始できる操作者にアラートが出される可能性もあります。</span><span class="sxs-lookup"><span data-stu-id="85d72-244">If an application reaches the upper limit defined for autoscaling, the mechanism might also alert an operator who could manually start additional resources if necessary.</span></span> <span data-ttu-id="85d72-245">このような状況では、ワークロードが軽減された後、操作者はそれらのリソースを手動で削除しなくてはならなくなる場合もあることに留意してください。</span><span class="sxs-lookup"><span data-stu-id="85d72-245">Note that, under these circumstances, the operator may also be responsible for manually removing these resources after the workload eases.</span></span>

## <a name="related-patterns-and-guidance"></a><span data-ttu-id="85d72-246">関連のあるパターンとガイダンス</span><span class="sxs-lookup"><span data-stu-id="85d72-246">Related patterns and guidance</span></span>

<span data-ttu-id="85d72-247">自動スケールを実装する場合、次のパターンとガイダンスも関連する可能性があります。</span><span class="sxs-lookup"><span data-stu-id="85d72-247">The following patterns and guidance may also be relevant to your scenario when implementing autoscaling:</span></span>

- <span data-ttu-id="85d72-248">[スロットル パターン](../patterns/throttling.md)。</span><span class="sxs-lookup"><span data-stu-id="85d72-248">[Throttling pattern](../patterns/throttling.md).</span></span> <span data-ttu-id="85d72-249">このパターンは、需要の増加によってリソースに極端な負荷がかけられた場合に、アプリケーションがどのようにして継続的に機能し、SLA に準拠できるかを示します。</span><span class="sxs-lookup"><span data-stu-id="85d72-249">This pattern describes how an application can continue to function and meet SLAs when an increase in demand places an extreme load on resources.</span></span> <span data-ttu-id="85d72-250">自動スケールとともに調整を使用して、システムがスケールアウトしている間にシステムに過剰な負荷が掛からないようにすることができます。</span><span class="sxs-lookup"><span data-stu-id="85d72-250">Throttling can be used with autoscaling to prevent a system from being overwhelmed while the system scales out.</span></span>

- <span data-ttu-id="85d72-251">[競合コンシューマー パターン](../patterns/competing-consumers.md)。</span><span class="sxs-lookup"><span data-stu-id="85d72-251">[Competing Consumers pattern](../patterns/competing-consumers.md).</span></span> <span data-ttu-id="85d72-252">このパターンは、任意のアプリケーション インスタンスからのメッセージを処理できるサービス インスタンスのプールを実装する方法を示します。</span><span class="sxs-lookup"><span data-stu-id="85d72-252">This pattern describes how to implement a pool of service instances that can handle messages from any application instance.</span></span> <span data-ttu-id="85d72-253">自動スケールを使用して、予測されるワークロードに対処できるように、サービス インスタンスを開始および停止できます。</span><span class="sxs-lookup"><span data-stu-id="85d72-253">Autoscaling can be used to start and stop service instances to match the anticipated workload.</span></span> <span data-ttu-id="85d72-254">この手法を使用することで、システムは複数のメッセージを同時に処理し、スループットを最適化し、拡張性と可用性を向上させ、ワークロードのバランスを取ることができます。</span><span class="sxs-lookup"><span data-stu-id="85d72-254">This approach enables a system to process multiple messages concurrently to optimize throughput, improve scalability and availability, and balance the workload.</span></span>

- <span data-ttu-id="85d72-255">[監視と診断](./monitoring.md)。</span><span class="sxs-lookup"><span data-stu-id="85d72-255">[Monitoring and diagnostics](./monitoring.md).</span></span> <span data-ttu-id="85d72-256">インストルメンテーションと製品利用統計情報は、自動スケール プロセスを促進できる情報を収集するために不可欠です。</span><span class="sxs-lookup"><span data-stu-id="85d72-256">Instrumentation and telemetry are vital for gathering the information that can drive the autoscaling process.</span></span>

<!-- links -->

[monitoring]: /azure/monitoring-and-diagnostics/monitoring-overview-autoscale
[app-service-autoscale]: /azure/monitoring-and-diagnostics/insights-how-to-scale?toc=%2fazure%2fapp-service-web%2ftoc.json#scaling-based-on-a-pre-set-metric
[app-service-plan]: /azure/app-service/azure-web-sites-web-hosting-plans-in-depth-overview
[autoscale-metrics]: /azure/monitoring-and-diagnostics/insights-autoscale-common-metrics
[cloud-services-autoscale]: /azure/cloud-services/cloud-services-how-to-scale-portal
[functions-scale]: /azure/azure-functions/functions-scale
[link-resource-to-cloud-service]: /azure/cloud-services/cloud-services-how-to-manage#how-to-link-a-resource-to-a-cloud-service
[service-fabric-autoscale]: /azure/service-fabric/service-fabric-cluster-scale-up-down
[vm-scale-sets]: /azure/virtual-machine-scale-sets/virtual-machine-scale-sets-overview
[vm-scale-sets-autoscale]: /azure/virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview
