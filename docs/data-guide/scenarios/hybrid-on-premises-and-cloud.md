---
title: オンプレミス データ ソリューションのクラウドへの拡張
description: ''
author: zoinerTejada
ms.date: 02/12/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.openlocfilehash: dcffe32883e379dd17c1f54a7eeebda3dab8d808
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/20/2019
ms.locfileid: "58244103"
---
# <a name="extending-on-premises-data-solutions-to-the-cloud"></a>オンプレミス データ ソリューションのクラウドへの拡張

組織がワークロードとデータをクラウドに移行しても、多くの場合、オンプレミス データセンターは引き続き重要な役割を果たします。 *ハイブリッド クラウド*という用語は、パブリック クラウドとオンプレミス データセンターを組み合わせて、両方にまたがる統合された IT 環境を構築することを指します。 一部の組織では、データセンター全体をクラウドに移行するためのパスとしてハイブリッド クラウドを利用しています。 また、クラウド サービスを使用して既存のオンプレミス インフラストラクチャを拡張している組織もあります。

この記事では、ハイブリッド クラウド ソリューションでデータを管理する場合の考慮事項とベスト プラクティスについて説明します。

## <a name="when-to-use-a-hybrid-solution"></a>ハイブリッド ソリューションを使用する状況

次のシナリオでは、ハイブリッド ソリューションの使用を検討してください。

- 長期間かけて完全にクラウド ネイティブなソリューションへと移行する移行戦略として利用する場合。
- 規制やポリシーによって、特定のデータやワークロードをクラウドに移行できない場合。
- ディザースター リカバリーとフォールト トレランスのために、オンプレミス環境とクラウド環境の間でデータとサービスを複製する場合。
- アーキテクチャの一部を Azure でホストすることで、オンプレミス データセンターとリモートの場所間の待機時間を短縮したい場合。

## <a name="challenges"></a>課題

- セキュリティ、管理、開発の面で一貫した環境を作り、作業の重複を避ける。

- オンプレミス環境とクラウド環境間に、信頼性が高く、遅延が少なく、セキュリティで保護されたデータ接続を作成する。

- データをレプリケートし、各環境内で正しいデータ ストアを使用するようにアプリケーションとツールを修正する。

- クラウドでホストされ、オンプレミスからアクセスされるデータ、またはその逆のデータをセキュリティで保護し、暗号化する。

## <a name="on-premises-data-stores"></a>オンプレミス データ ストア

オンプレミス データ ストアには、データベースとファイルが含まれています。 これらをローカルで保持する理由はいくつかあります。 たとえば、特定のデータやワークロードをクラウドに移行できない規制やポリシーがある場合です。 また、データの主権、プライバシー、またはセキュリティを考慮して、オンプレミスに配置する方が良い場合があります。 移行中は、まだ移行されていないアプリケーションのデータをローカルで保持することができます。

パブリック クラウドにアプリケーション データを配置する場合は、次のような点を考慮してください。

- **コスト**。 Azure のストレージのコストは、オンプレミス データセンターで同様の特性を持つストレージを維持するコストよりも大幅に低くなります。 当然ながら、多くの企業がハイエンド SAN に既に投資しているため、既存のハードウェアの寿命が来るまで、このようなコストの優位性は完全に達成されない可能性があります。

- **柔軟なスケール**。 オンプレミス環境のデータ容量拡張の計画と管理は困難な場合があります。特に、データの増加を予測が困難な場合は特にそうです。 このようなアプリケーションの場合は、クラウドで使用できるオンデマンドの容量と事実上無制限のストレージを活用できます。 この考慮事項は、比較的静的なサイズのデータ​​セットで構成されるアプリケーションにはあまり関係がありません。

- **ディザスター リカバリー**。 Azure に格納されたデータは、Azure リージョン内と地域間で自動的にレプリケートされます。 ハイブリッド環境では、このようなテクノロジを使用して、オンプレミスとクラウドベースのデータ ストア間でレプリケートすることができます。

## <a name="extending-data-stores-to-the-cloud"></a>データ ストアをクラウドに拡張する

オンプレミス データ ストアをクラウドに拡張するには、いくつかのオプションがあります。 オプションの 1 つは、オンプレミスとクラウドのレプリカを持つ方法です。 こうすることで高レベルなフォールト トレランスを実現できますが、フェールオーバーが発生した場合に適切なデータ ストアに接続できるように、アプリケーションの変更が必要になる可能性があります。

もう 1 つのオプションは、データの一部をクラウド ストレージに移行し、より新しい、またはより頻繁にアクセスされるデータをオンプレミスに維持する方法です。 この方法では、運用データ セットを減らすことでデータ アクセスの応答時間が改善するだけでなく、長期的なストレージにコスト効率の高いオプションを提供できます。

3 つ目のオプションは、すべてのデータをオンプレミスに保持し、アプリケーションのホストにはクラウド コンピューティングを使用する方法です。 そのためには、クラウドでアプリケーションをホストし、セキュリティで保護された接続を介してオンプレミス データ ストアに接続します。

## <a name="azure-stack"></a>Azure Stack

完全なハイブリッド クラウド ソリューションの場合は、[Microsoft Azure Stack](/azure/azure-stack/) の使用を検討してください。 Azure Stack は、データセンターから Azure サービスを提供することができるハイブリッド クラウド プラットフォームです。 この方法では、同じツールを使用してオンプレミスと Azure の一貫性を維持できます。コードを変更する必要がありません。

Azure と Azure Stack スタックの使用例をいくつか次に示します。

- **エッジおよび非接続ソリューション**。 Azure Stack でローカルで処理したデータを Azure で集計したあと、さらに詳しく分析し、Azure Stack と Azure の両方で共通するアプリケーションのロジックを使用して、待機時間や接続性の要件に対応できます。

- **さまざまな規制に対応するクラウド アプリケーション**。 Azure でアプリケーションを開発して展開し、規制やポリシーの要件を満たすために Azure Stack で同じアプリケーションをオンプレミスに展開できる柔軟性があります。

- **オンプレミスのクラウド アプリケーション モデル**。 既存のアプリケーションを更新および拡張する場合や、新しいアプリケーションを構築する場合に Azure を使用します。 クラウドの Azure と、オンプレミスの Azure Stack で一貫性のある DevOps プロセスを使用します。

## <a name="sql-server-data-stores"></a>SQL Server データ ソース

SQL Server をオンプレミスで実行している場合は、バックアップと復元に Microsoft Azure Blob Storage サービスを使用できます。 詳細については、「[Windows Azure BLOB ストレージ サービスを使用した SQL Server のバックアップと復元](/sql/relational-databases/backup-restore/sql-server-backup-and-restore-with-microsoft-azure-blob-storage-service)」を参照してください。 この機能により、無制限のオフサイト ストレージを利用し、オンプレミスで実行されている SQL Server と Azure の仮想マシンで実行されている SQL Server 間で同じバックアップを共有することができます。

[Azure SQL Database](/azure/sql-database/) は、サービスとして管理されたリレーショナル データベースです。 Azure SQL Database は Microsoft SQL Server Engine を使用しているので、アプリケーションは両方のテクノロジを使用して同じ方法でデータにアクセスできます。 Azure SQL Database を SQL Server と組み合わせて使用する方法も便利です。 たとえば、[SQL Server Stretch Database](/sql/sql-server/stretch-database/stretch-database) 機能を使用すると、アプリケーションから SQL Server データベース内の単一のテーブルのように見えるものにアクセスできますが、そのテーブルの一部またはすべての行は Azure SQL Database に格納されている可能性があります。 このテクノロジによって、定義された期間アクセスされなかったデータは、自動的にクラウドに移行されます。 このデータを読み取るアプリケーションは、いずれのデータがクラウドに移行されたことも認識しません。

データの同期を維持したい場合には、オンプレミスとクラウドのデータ ストアを維持することは困難になる可能性があります。 この課題は [SQL データ同期](/azure/sql-database/sql-database-sync-data)で解決できます。SQL データ同期は Azure SQL Database 上に構築されているサービスであり、選択したデータを複数の Azure SQL Database と SQL Server インスタンスの間で双方向に同期させることができます。 Data Sync を使用すると、さまざまなデータ ストアで簡単にデータを最新の状態に保つことができますが、ディザスター リカバリーや、オンプレミスの SQL Sever から Azure SQL Database への移行には使用しないでください。

ディザースター リカバリーとビジネス継続性のためには、[AlwaysOn 可用性グループ](/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server)を使用して、複数の SQL Server インスタンスにデータをレプリケートし、その一部を別の地域にある Azure Virtual Machine で実行できます。

## <a name="network-shares-and-file-based-data-stores"></a>ネットワーク共有とファイルベースのデータ ストア

ハイブリッド クラウド アーキテクチャでは、新しいファイルはオンプレミスで保持し、古いファイルはクラウドにアーカイブする方法が一般的です。 この方法はファイルの階層化と呼ばれ、オンプレミスとクラウドでホストされている両方のファイル セットにシームレスにアクセスできます。 このアプローチは、アクセス頻度が高い可能性がある新しいファイルのネットワーク帯域幅の使用とアクセス時間を最小限に抑えるために役立ちます。 同時に、アーカイブされたデータにはクラウドベースのストレージの利点もあります。

ネットワーク共有を完全にクラウドに移行することもできます。 完全移行は、たとえば、データにアクセスするアプリケーションもクラウド内にある場合などに適しています。 この手順は、[データ オーケストレーション](../technology-choices/pipeline-orchestration-data-movement.md) ツールを使用して実行できます。

[Azure StorSimple](/azure/storsimple/) は、オンプレミス デバイスと Azure クラウド ストレージ間のストレージ タスクを管理できる機能がそろった統合ストレージ ソリューションを提供しています。 StorSimple は、企業のストレージとデータ保護に伴う多くの問題を解消し、費用を削減する、効率と経済性、管理性に優れた記憶域ネットワーク (SAN) ソリューションです。 StorSimple は独自開発の StorSimple 8000 シリーズ デバイスを使用し、クラウド サービスと統合して、一連の統合管理ツールを提供しています。

クラウドベースのファイル ストレージと共にオンプレミスのネットワーク共有を使用するもう 1 つの方法は [Azure Files](/azure/storage/files/storage-files-introduction) です。 Azure Files は、標準の[サーバー メッセージ ブロック](https://msdn.microsoft.com/library/windows/desktop/aa365233.aspx?f=255&MSPPError=-2147217396) (SMB) プロトコル (CIFS とも呼ばれます) でアクセスできる、フル マネージドのファイル共有を提供します。 Azure Files は、ローカル コンピューターにファイル共有としてマウントするか、ローカルまたはネットワーク共有ファイルにアクセスする既存のアプリケーションで使用することができます。

Azure Files のファイル共有をオンプレミスの Windows Server と同期するには、[Azure File Sync](/azure/storage/files/storage-sync-files-planning) を使用します。Azure File Sync の主な利点の 1 つは、オンプレミスのファイル サーバーと Azure Files 間でファイルを階層化できることです。 この機能で、最新のファイルと最近アクセスしたファイルのみをローカルに保存できます。

詳細については、[Azure Blob Storage、Azure Files、Azure ディスクの使い分け](/azure/storage/common/storage-decide-blobs-files-disks)に関するページを参照してください。

## <a name="hybrid-networking"></a>ハイブリッド ネットワーク

この記事では、ハイブリッド データ ソリューションを中心に説明しましたが、考慮事項としてはオンプレミス ネットワークを Azure に拡張する方法もあります。 ハイブリッド ソリューションのこの側面の詳細については、以下のトピックを参照してください。

- [オンプレミス ネットワークを Azure に接続するためのソリューションを選択する](../../reference-architectures/hybrid-networking/considerations.md)
- [ハイブリッド ネットワークの参照用アーキテクチャ](../../reference-architectures/hybrid-networking/index.md)
