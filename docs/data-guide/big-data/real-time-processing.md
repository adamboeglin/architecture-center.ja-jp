---
title: リアルタイム処理
description: ''
author: zoinerTejada
ms.date: 02/12/2018
ms.topic: guide
ms.service: architecture-center
ms.subservice: cloud-fundamentals
ms.openlocfilehash: fa181700a250b3f957e038f8b5965ad02efd8979
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/20/2019
ms.locfileid: "58243613"
---
# <a name="real-time-processing"></a><span data-ttu-id="8bed3-102">リアルタイム処理</span><span class="sxs-lookup"><span data-stu-id="8bed3-102">Real time processing</span></span>

<span data-ttu-id="8bed3-103">リアルタイム処理は、リアルタイムでキャプチャされるデータ ストリームを処理します。このデータは最小限の待機時間で処理されて、リアルタイム (または、ほぼリアルタイム) のレポートまたは自動化された応答が生成されます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-103">Real time processing deals with streams of data that are captured in real-time and processed with minimal latency to generate real-time (or near-real-time) reports or automated responses.</span></span> <span data-ttu-id="8bed3-104">たとえば、リアルタイム交通監視ソリューションでは、センサー データを使用して高い交通量を検出する場合があります。</span><span class="sxs-lookup"><span data-stu-id="8bed3-104">For example, a real-time traffic monitoring solution might use sensor data to detect high traffic volumes.</span></span> <span data-ttu-id="8bed3-105">このデータを使用して、渋滞を表示する地図を動的に更新したり、相乗り車線やその他の交通管理システムを自動的に開始したりできます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-105">This data could be used to dynamically update a map to show congestion, or automatically initiate high-occupancy lanes or other traffic management systems.</span></span>

![リアルタイム処理パイプラインの図](./images/real-time-pipeline.png)

<span data-ttu-id="8bed3-107">リアルタイム処理は、とても短い処理待機時間要件 (ミリ秒または秒単位で測定) がある入力データのアンバウンド ストリームの処理として定義されています。</span><span class="sxs-lookup"><span data-stu-id="8bed3-107">Real-time processing is defined as the processing of unbounded stream of input data, with very short latency requirements for processing &mdash; measured in milliseconds or seconds.</span></span> <span data-ttu-id="8bed3-108">一般にこの受信データは、JSON などの非構造化または半構造化形式で到着し、[バッチ処理](./batch-processing.md)と同じ処理要件を持ちますが、リアルタイムでの使用をサポートするためにターンアラウンド タイムは短くなります。</span><span class="sxs-lookup"><span data-stu-id="8bed3-108">This incoming data typically arrives in an unstructured or semi-structured format, such as JSON, and has the same processing requirements as [batch processing](./batch-processing.md), but with shorter turnaround times to support real-time consumption.</span></span>

<span data-ttu-id="8bed3-109">多くの場合、処理されたデータは分析と視覚化のために最適化された分析データ ストアに書き込まれます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-109">Processed data is often written to an analytical data store, which is optimized for analytics and visualization.</span></span> <span data-ttu-id="8bed3-110">処理されたデータは、分析、ビジネス インテリジェンス、リアルタイム ダッシュボード視覚化のために分析およびレポート レイヤーに直接取り込むこともできます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-110">The processed data can also be ingested directly into the analytics and reporting layer for analysis, business intelligence, and real-time dashboard visualization.</span></span>

## <a name="challenges"></a><span data-ttu-id="8bed3-111">課題</span><span class="sxs-lookup"><span data-stu-id="8bed3-111">Challenges</span></span>

<span data-ttu-id="8bed3-112">リアルタイム処理ソリューションの大きな課題の 1 つは、メッセージの取り込み、処理、格納を (特に大量のメッセージにおいて) リアルタイムで行うことです。</span><span class="sxs-lookup"><span data-stu-id="8bed3-112">One of the big challenges of real-time processing solutions is to ingest, process, and store messages in real time, especially at high volumes.</span></span> <span data-ttu-id="8bed3-113">処理は、取り込みパイプラインをブロックしないように行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="8bed3-113">Processing must be done in such a way that it does not block the ingestion pipeline.</span></span> <span data-ttu-id="8bed3-114">データ ストアでは、大量の書き込みをサポートする必要があります。</span><span class="sxs-lookup"><span data-stu-id="8bed3-114">The data store must support high-volume writes.</span></span> <span data-ttu-id="8bed3-115">もう 1 つの課題は、リアルタイムでのアラートの生成やリアルタイム (または、ほぼリアルタイム) のダッシュボードでのデータの表示など、データをすばやく操作できることです。</span><span class="sxs-lookup"><span data-stu-id="8bed3-115">Another challenge is being able to act on the data quickly, such as generating alerts in real time or presenting the data in a real-time (or near-real-time) dashboard.</span></span>

## <a name="architecture"></a><span data-ttu-id="8bed3-116">アーキテクチャ</span><span class="sxs-lookup"><span data-stu-id="8bed3-116">Architecture</span></span>

<span data-ttu-id="8bed3-117">リアルタイム処理アーキテクチャには、次の論理コンポーネントがあります。</span><span class="sxs-lookup"><span data-stu-id="8bed3-117">A real-time processing architecture has the following logical components.</span></span>

- <span data-ttu-id="8bed3-118">**リアルタイム メッセージ取り込み。**</span><span class="sxs-lookup"><span data-stu-id="8bed3-118">**Real-time message ingestion.**</span></span> <span data-ttu-id="8bed3-119">アーキテクチャには、ストリーム処理コンシューマーが使用するリアルタイム メッセージをキャプチャして格納する方法が含まれている必要があります。</span><span class="sxs-lookup"><span data-stu-id="8bed3-119">The architecture must include a way to capture and store real-time messages to be consumed by a stream processing consumer.</span></span> <span data-ttu-id="8bed3-120">シンプルなケースでは、このサービスは、新しいメッセージがフォルダーに格納される単純なデータ ストアとして実装できます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-120">In simple cases, this service could be implemented as a simple data store in which new messages are deposited in a folder.</span></span> <span data-ttu-id="8bed3-121">しかし多くの場合、ソリューションには、メッセージのバッファーとして機能する Azure Event Hubs などのメッセージ ブローカーが必要です。</span><span class="sxs-lookup"><span data-stu-id="8bed3-121">But often the solution requires a message broker, such as Azure Event Hubs, that acts as a buffer for the messages.</span></span> <span data-ttu-id="8bed3-122">メッセージ ブローカーでは、スケールアウト処理と信頼性の高い配信がサポートされる必要があります。</span><span class="sxs-lookup"><span data-stu-id="8bed3-122">The message broker should support scale-out processing and reliable delivery.</span></span>

- <span data-ttu-id="8bed3-123">**ストリーム処理。**</span><span class="sxs-lookup"><span data-stu-id="8bed3-123">**Stream processing.**</span></span> <span data-ttu-id="8bed3-124">このソリューションでは、リアルタイム メッセージを取得した後、分析用にデータをフィルターしたり、集計したり、その他の準備を行ったりして、それらのメッセージを処理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8bed3-124">After capturing real-time messages, the solution must process them by filtering, aggregating, and otherwise preparing the data for analysis.</span></span>

- <span data-ttu-id="8bed3-125">**分析データ ストア。**</span><span class="sxs-lookup"><span data-stu-id="8bed3-125">**Analytical data store.**</span></span> <span data-ttu-id="8bed3-126">多くのビッグ データ ソリューションは、分析用にデータを準備した後、処理されたデータを分析ツールを使用してクエリを実行できる構造化された形式で提供するように設計されています。</span><span class="sxs-lookup"><span data-stu-id="8bed3-126">Many big data solutions are designed to prepare data for analysis and then serve the processed data in a structured format that can be queried using analytical tools.</span></span>

- <span data-ttu-id="8bed3-127">**分析とレポート。**</span><span class="sxs-lookup"><span data-stu-id="8bed3-127">**Analysis and reporting.**</span></span> <span data-ttu-id="8bed3-128">ほとんどのビッグ データ ソリューションの目的は、分析とレポートによってデータに関する実用的な情報を提供することにあります。</span><span class="sxs-lookup"><span data-stu-id="8bed3-128">The goal of most big data solutions is to provide insights into the data through analysis and reporting.</span></span>

## <a name="technology-choices"></a><span data-ttu-id="8bed3-129">テクノロジの選択</span><span class="sxs-lookup"><span data-stu-id="8bed3-129">Technology choices</span></span>

<span data-ttu-id="8bed3-130">次のテクノロジは、Azure でのリアルタイム処理に推奨される選択肢です。</span><span class="sxs-lookup"><span data-stu-id="8bed3-130">The following technologies are recommended choices for real-time processing solutions in Azure.</span></span>

### <a name="real-time-message-ingestion"></a><span data-ttu-id="8bed3-131">リアルタイム メッセージ取り込み</span><span class="sxs-lookup"><span data-stu-id="8bed3-131">Real-time message ingestion</span></span>

- <span data-ttu-id="8bed3-132">**Azure Event Hubs**。</span><span class="sxs-lookup"><span data-stu-id="8bed3-132">**Azure Event Hubs**.</span></span> <span data-ttu-id="8bed3-133">Azure Event Hubs は、1 秒あたり何百万ものイベント メッセージを取り込むメッセージ キュー ソリューションです。</span><span class="sxs-lookup"><span data-stu-id="8bed3-133">Azure Event Hubs is a message queuing solution for ingesting millions of event messages per second.</span></span> <span data-ttu-id="8bed3-134">キャプチャしたイベント データは、複数のコンシューマーによって並列に処理できます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-134">The captured event data can be processed by multiple consumers in parallel.</span></span>
- <span data-ttu-id="8bed3-135">**Azure IoT Hub**。</span><span class="sxs-lookup"><span data-stu-id="8bed3-135">**Azure IoT Hub**.</span></span> <span data-ttu-id="8bed3-136">Azure IoT Hub は、インターネットに接続されたデバイス間の双方向通信と、何百万もの接続デバイスを同時に処理できるスケーラブルなメッセージ キューを提供します。</span><span class="sxs-lookup"><span data-stu-id="8bed3-136">Azure IoT Hub provides bi-directional communication between Internet-connected devices, and a scalable message queue that can handle millions of simultaneously connected devices.</span></span>
- <span data-ttu-id="8bed3-137">**Apache Kafka**。</span><span class="sxs-lookup"><span data-stu-id="8bed3-137">**Apache Kafka**.</span></span> <span data-ttu-id="8bed3-138">Kafka はオープン ソースのメッセージ キューおよびストリーム処理アプリケーションであり、複数のメッセージ プロデューサーからの 1 秒あたり数百万のメッセージを処理し、複数のコンシューマーにルーティングするようにスケーリングできます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-138">Kafka is an open source message queuing and stream processing application that can scale to handle millions of messages per second from multiple message producers, and route them to multiple consumers.</span></span> <span data-ttu-id="8bed3-139">Kafka は Azure で HDInsight クラスターの種類として使用できます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-139">Kafka is available in Azure as an HDInsight cluster type.</span></span>

<span data-ttu-id="8bed3-140">詳しくは、「[リアルタイム メッセージ取り込み](../technology-choices/real-time-ingestion.md)」をご覧ください。</span><span class="sxs-lookup"><span data-stu-id="8bed3-140">For more information, see [Real-time message ingestion](../technology-choices/real-time-ingestion.md).</span></span>

### <a name="data-storage"></a><span data-ttu-id="8bed3-141">データ ストレージ</span><span class="sxs-lookup"><span data-stu-id="8bed3-141">Data storage</span></span>

- <span data-ttu-id="8bed3-142">**Azure Storage Blob コンテナー**または **Azure Data Lake Store**。</span><span class="sxs-lookup"><span data-stu-id="8bed3-142">**Azure Storage Blob Containers** or **Azure Data Lake Store**.</span></span> <span data-ttu-id="8bed3-143">通常、受信リアルタイム データはメッセージ ブローカー (上記参照) でキャプチャされますが、シナリオによっては、新しいファイル用のフォルダーを監視し、作成または更新時にそれらを処理することに意味があります。</span><span class="sxs-lookup"><span data-stu-id="8bed3-143">Incoming real-time data is usually captured in a message broker (see above), but in some scenarios, it can make sense to monitor a folder for new files and process them as they are created or updated.</span></span> <span data-ttu-id="8bed3-144">さらに、多くのリアルタイム処理ソリューションは、ストリーミング データを静的参照データと結合してファイル ストアに格納できます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-144">Additionally, many real-time processing solutions combine streaming data with static reference data, which can be stored in a file store.</span></span> <span data-ttu-id="8bed3-145">最後に、ファイル ストレージは、アーカイブのため、または[ラムダ アーキテクチャ](../big-data/index.md#lambda-architecture)でさらにバッチ処理するために、キャプチャされたリアルタイム データの出力先として使用できます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-145">Finally, file storage may be used as an output destination for captured real-time data for archiving, or for further batch processing in a [lambda architecture](../big-data/index.md#lambda-architecture).</span></span>

<span data-ttu-id="8bed3-146">詳しくは、[データ ストレージ](../technology-choices/data-storage.md)に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="8bed3-146">For more information, see [Data storage](../technology-choices/data-storage.md).</span></span>

### <a name="stream-processing"></a><span data-ttu-id="8bed3-147">ストリーム処理</span><span class="sxs-lookup"><span data-stu-id="8bed3-147">Stream processing</span></span>

- <span data-ttu-id="8bed3-148">**Azure Stream Analytics**。</span><span class="sxs-lookup"><span data-stu-id="8bed3-148">**Azure Stream Analytics**.</span></span> <span data-ttu-id="8bed3-149">Azure Stream Analytics では、データのアンバウンド ストリームに対して永続クエリを実行できます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-149">Azure Stream Analytics can run perpetual queries against an unbounded stream of data.</span></span> <span data-ttu-id="8bed3-150">これらのクエリでは、ストレージまたはメッセージ ブローカーからのデータ ストリームを使用し、テンポラル ウィンドウに基づいてデータをフィルター処理および集計して、結果をストレージなどのシンク、データベース、または直接 Power BI のレポートに書き込みます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-150">These queries consume streams of data from storage or message brokers, filter and aggregate the data based on temporal windows, and write the results to sinks such as storage, databases, or directly to reports in Power BI.</span></span> <span data-ttu-id="8bed3-151">Stream Analytics は、テンポラル コントラクトと地理空間コントラクトをサポートする SQL ベースのクエリ言語を使用します。JavaScript を使用して拡張できます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-151">Stream Analytics uses a SQL-based query language that supports temporal and geospatial constructs, and can be extended using JavaScript.</span></span>
- <span data-ttu-id="8bed3-152">**Storm**。</span><span class="sxs-lookup"><span data-stu-id="8bed3-152">**Storm**.</span></span> <span data-ttu-id="8bed3-153">Apache Storm はストリーム処理のためのオープン ソース フレームワークであり、スパウトとボルトのトポロジを使用して、リアルタイム ストリーミング データ ソースからの結果を使用、処理、出力します。</span><span class="sxs-lookup"><span data-stu-id="8bed3-153">Apache Storm is an open source framework for stream processing that uses a topology of spouts and bolts to consume, process, and output the results from real-time streaming data sources.</span></span> <span data-ttu-id="8bed3-154">Azure HDInsight クラスターで Storm をプロビジョニングし、Java や C# でトポロジを実装できます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-154">You can provision Storm in an Azure HDInsight cluster, and implement a topology in Java or C#.</span></span>
- <span data-ttu-id="8bed3-155">**Spark Streaming**。</span><span class="sxs-lookup"><span data-stu-id="8bed3-155">**Spark Streaming**.</span></span> <span data-ttu-id="8bed3-156">Apache Spark は、一般的なデータ処理のためのオープン ソースの分散プラットフォームです。</span><span class="sxs-lookup"><span data-stu-id="8bed3-156">Apache Spark is an open source distributed platform for general data processing.</span></span> <span data-ttu-id="8bed3-157">Spark は、Java、Scala、Python などのサポートされている Spark 言語でコードを記述できる Spark Streaming API を提供します。</span><span class="sxs-lookup"><span data-stu-id="8bed3-157">Spark provides the Spark Streaming API, in which you can write code in any supported Spark language, including Java, Scala, and Python.</span></span> <span data-ttu-id="8bed3-158">Spark 2.0 では、よりシンプルで一貫性の高いプログラミング モデルを提供する Spark Structured Streaming API が導入されました。</span><span class="sxs-lookup"><span data-stu-id="8bed3-158">Spark 2.0 introduced the Spark Structured Streaming API, which provides a simpler and more consistent programming model.</span></span> <span data-ttu-id="8bed3-159">Spark 2.0 は、Azure HDInsight クラスターで使用できます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-159">Spark 2.0 is available in an Azure HDInsight cluster.</span></span>

<span data-ttu-id="8bed3-160">詳しくは、[ストリーム処理](../technology-choices/stream-processing.md)に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="8bed3-160">For more information, see [Stream processing](../technology-choices/stream-processing.md).</span></span>

### <a name="analytical-data-store"></a><span data-ttu-id="8bed3-161">分析データ ストア</span><span class="sxs-lookup"><span data-stu-id="8bed3-161">Analytical data store</span></span>

- <span data-ttu-id="8bed3-162">**SQL Data Warehouse**、**HBase**、**Spark**、または **Hive**。</span><span class="sxs-lookup"><span data-stu-id="8bed3-162">**SQL Data Warehouse**, **HBase**, **Spark**, or **Hive**.</span></span> <span data-ttu-id="8bed3-163">処理されたリアルタイム データは、Azure SQL Data Warehouse などのリレーショナル データベースまたは HBase などの NoSQL ストアに格納するか、Spark や Hive のテーブルを定義してクエリを実行できる分散ストレージ内のファイルとして格納できます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-163">Processed real-time data can be stored in a relational database such Azure SQL Data Warehouse, a NoSQL store such as HBase, or as files in distributed storage over which Spark or Hive tables can be defined and queried.</span></span>

<span data-ttu-id="8bed3-164">詳しくは、[分析データ ストア](../technology-choices/analytical-data-stores.md)に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="8bed3-164">For more information, see [Analytical data stores](../technology-choices/analytical-data-stores.md).</span></span>

### <a name="analytics-and-reporting"></a><span data-ttu-id="8bed3-165">分析とレポート</span><span class="sxs-lookup"><span data-stu-id="8bed3-165">Analytics and reporting</span></span>

- <span data-ttu-id="8bed3-166">**Azure Analysis Services**、**Power BI**、**Microsoft Excel**。</span><span class="sxs-lookup"><span data-stu-id="8bed3-166">**Azure Analysis Services**, **Power BI**, and **Microsoft Excel**.</span></span> <span data-ttu-id="8bed3-167">分析データ ストアに格納されている処理済みのリアルタイム データは、バッチ処理されたデータと同じ方法で履歴のレポートと分析に使用できます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-167">Processed real-time data that is stored in an analytical data store can be used for historical reporting and analysis in the same way as batch processed data.</span></span> <span data-ttu-id="8bed3-168">さらに、Power BI を使用して、リアルタイム (または、ほぼリアルタイム) のレポートと視覚化を、待機時間が十分に短い分析データ ソースから、また場合によってはストリーム処理の出力から直接発行することができます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-168">Additionally, Power BI can be used to publish real-time (or near-real-time) reports and visualizations from analytical data sources where latency is sufficiently low, or in some cases directly from the stream processing output.</span></span>

<span data-ttu-id="8bed3-169">詳しくは、[分析とレポート](../technology-choices/analysis-visualizations-reporting.md)に関するページをご覧ください。</span><span class="sxs-lookup"><span data-stu-id="8bed3-169">For more information, see [Analytics and reporting](../technology-choices/analysis-visualizations-reporting.md).</span></span>

<span data-ttu-id="8bed3-170">純粋なリアルタイム ソリューションでは、処理オーケストレーションの大部分は、メッセージ取り込みコンポーネントとストリーム処理コンポーネントによって管理されます。</span><span class="sxs-lookup"><span data-stu-id="8bed3-170">In a purely real-time solution, most of the processing orchestration is managed by the message ingestion and stream processing components.</span></span> <span data-ttu-id="8bed3-171">ただし、バッチ処理とリアルタイム処理を結合するラムダ アーキテクチャでは、Azure Data Factory や Apache Oozie および Sqoop などのオーケストレーション フレームワークを使用して、キャプチャされたリアルタイム データのバッチ ワークフローを管理する必要があります。</span><span class="sxs-lookup"><span data-stu-id="8bed3-171">However, in a lambda architecture that combines batch processing and real-time processing, you may need to use an orchestration framework such as Azure Data Factory or Apache Oozie and Sqoop to manage batch workflows for captured real-time data.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8bed3-172">次の手順</span><span class="sxs-lookup"><span data-stu-id="8bed3-172">Next steps</span></span>

<span data-ttu-id="8bed3-173">次の参照アーキテクチャでは、エンド ツー エンドのストリーム処理パイプラインを示します。</span><span class="sxs-lookup"><span data-stu-id="8bed3-173">The following reference architecture shows an end-to-end stream processing pipeline:</span></span>

- [<span data-ttu-id="8bed3-174">Azure Stream Analytics によるストリーム処理</span><span class="sxs-lookup"><span data-stu-id="8bed3-174">Stream processing with Azure Stream Analytics</span></span>](../../reference-architectures/data/stream-processing-stream-analytics.md)