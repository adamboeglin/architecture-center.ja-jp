---
title: マイクロサービス アーキテクチャの概要
description: マイクロサービス アーキテクチャの概要。
author: MikeWasson
ms.date: 02/26/2019
ms.topic: guide
ms.service: architecture-center
ms.subservice: reference-architecture
ms.custom: microservices
ms.openlocfilehash: fbb79ea2f9a4822fb221b99ce5e94ce78067fd1f
ms.sourcegitcommit: c053e6edb429299a0ad9b327888d596c48859d4a
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/20/2019
ms.locfileid: "58241503"
---
# <a name="introduction-to-microservices-architectures"></a>マイクロサービス アーキテクチャの概要

マイクロサービス アーキテクチャは、小さな自律サービスのコレクションで構成されています。 各サービスは自己完結型であり、1 つのビジネス機能を実装している必要があります。 以下に、マイクロサービスの特徴を定義します。

- マイクロサービス アーキテクチャでは、サービスは小さく、独立的で、疎結合しています。
- マイクロサービスは小さいため、小規模な 1 つの開発者チームで作成および管理できます。
- サービスは個別にデプロイできます。 チームは、アプリケーション全体を再構築したり再デプロイしたりすることなく、既存のサービスを更新できます。
- サービスはサービスのデータや外部の状態を保持する役割を担います。 これは、個別のデータ層でデータを保持する従来のモデルと異なる点です。
- サービスは、明確に定義された API を使用して、互いに通信します。 各サービス内部の実装の詳細は、他のサービスに開示されません。
- サービスは、同じテクノロジ スタック、ライブラリ、またはフレームワークを共有する必要はありません。

![マイクロサービスの論理アーキテクチャ](../guide/architecture-styles/images/microservices-logical.svg)

<!-- markdownlint-disable MD026 -->

## <a name="why-build-microservices"></a>マイクロサービスを構築する理由

マイクロサービスにより、以下のような有益なメリットが多数もたらされます。

- **機敏性。** マイクロサービスは個別にデプロイされるため、バグ修正や機能リリースが管理しやすくなります。 アプリケーション全体を再デプロイしなくてもサービスを更新できるほか、問題が発生したときに更新プログラムをロールバックできます。 従来のアプリケーションでは、多くの場合、アプリケーションの一部にバグが見つかると、リリース プロセス全体がブロックされ、その結果、新機能はバグ修正が統合、テスト、および公開されるまで使用できなくなる可能性があります。  

- **短いコード、小規模チーム。** マイクロサービスの規模は小さく、1 つの機能チームによって構築、テスト、およびデプロイできます。 コード ベースは小さいほど、わかりやすくなります。 大規模なモノリシック アプリケーションでは、時間の経過に伴ってコードの依存関係が複雑になる傾向にあり、新しい機能を追加しようとすると、多くの場所でコード変更が必要です。 マイクロサービス アーキテクチャでは、コードまたはデータ ストアが共有されないため、依存関係を最小限に抑え、新しい機能を簡単に追加できます。 小規模なチーム編成も機敏性を向上させます。 "2 枚のピザ ルール" も、チームは 2 枚のピザが行き渡る人数に抑える必要がある、となっています。 もちろん、これは正確な基準ではなく、チームの食欲によっても変わります。 しかし、重要なのは、大規模なグループでは、コミュニケーションに時間がかかり、管理オーバーヘッドが増大し、機敏性も低下するため、生産性が低くなる傾向があるという点です。  

- **テクノロジの組み合わせ**。 必要に応じて、チームがテクノロジ スタックを組み合わせて、サービスに最適なテクノロジを選択できます。 

- **回復性**。 個々のマイクロサービスが使用できなくなっても、上流マイクロサービスが障害を正しく処理するように設計されている限り (サーキット ブレークの実装など)、アプリケーション全体が中断されることはありません。

- **スケーラビリティ**:  マイクロサービス アーキテクチャでは、各マイクロサービスを個別に拡張できます。 つまり、サブシステムにさらに多くのリソースが必要な場合、アプリケーション全体をスケールアウトせずに、サブシステムをスケールアウトすることができます。 コンテナー内にサービスをデプロイすると、マイクロサービスを高密度で 1 つのホストに圧縮できるため、リソースをより効率的に使用できます。

- **データの分離**。 影響を受けるのは 1 つのマイクロサービスだけであるため、スキーマ更新がはるかに実行しやすくなります。 モノリシック アプリケーションでは、アプリケーションのさまざまな部分すべてが同じデータに影響する可能性があり、スキーマの変更にはリスクが伴うため、スキーマ更新は非常に困難になる可能性があります。

## <a name="when-should-i-build-microservices"></a>マイクロサービスを構築する必要がある状況

次の場合に、マイクロサービス アーキテクチャを検討してください。

- リリースの早さが要求される大規模アプリケーション。
- 高い拡張性が必要とされる複雑なアプリケーション。
- ドメインが豊富な、またはサブドメインが多いアプリケーション。
- 小規模な開発チームから構成されている組織。

## <a name="challenges"></a>課題

マイクロサービスの利点は、何もせずに手に入るものではありません。 マイクロサービス アーキテクチャに着手する前に考慮すべき課題の一部を示します。

- **複雑さ**。 マイクロサービス アプリケーションは、同等のモノリシック アプリケーションよりも多くの動的パーツで構成されています。 各サービスはより単純ですが、システム全体としてはより複雑です。

- **開発とテスト**。 他の依存サービスに依存する小さいサービスを作成するには、従来のモノリシックまたは階層化アプリケーションを作成するのとは異なるアプローチが求められます。 既存のツールは、サービスの依存関係を処理するように設計されているとは限りません。 サービス間の境界にまたがってリファクタリングを行うことは困難です。 また、アプリケーションの進化が早い場合は特に、サービスの依存関係をテストすることは困難です。

- **ガバナンスの欠如**。 マイクロサービスを構築する際に分散アプローチをとることにはメリットがありますが、問題が発生しやすくもなります。 多くの異なる言語やフレームワークを使用するために、アプリケーションの維持が難しくなることがあります。 プロジェクト全体に適用される標準を導入する方が役立ち、チームの柔軟性を過度に制限せずに済むということもあります。 これは特に、ログ記録などの横断的な機能に適用されます。

- **ネットワークの輻輳と待機時間**。 多くの小さく細分化されたサービスを使用すると、よりインタラクティブな通信が可能になります。 また、サービスの依存関係のチェーンが長すぎる (サービス A が B を呼び出し、その B が C を呼び出すなどの) 場合、追加される待機時間が問題になることがあります。 API は慎重に設計する必要があります。 API を過度に使用することを避け、シリアル化形式について検討し、非同期通信パターンを使用する場所を探してください。

- **データ整合性**。 独自のデータを永続化する各マイクロサービスを使用します。 結果として、データの整合性をとることが難しくなることがあります。 可能であれば、最終的な整合性を優先します。

- **管理**。 マイクロサービスを成功させるには、成熟した DevOps カルチャが必要です。 サービス間で相互に関連付けられたログを記録することは難しい場合があります。 通常、ログ記録は単一のユーザー操作を要求するために複数のサービスの呼び出しを関連付ける必要があります。

- **バージョン管理**。 サービスの更新プログラムは、依存しているサービスを中断してはいけません。 複数のサービスが特定の時点で更新される場合があるため、慎重に設計しないと下位互換性または上位互換性に問題が生じる可能性があります。

- **スキルセット**。 マイクロサービスは高度な分散システムです。 成功のために必要なスキルと経験がチームにあるかどうかを慎重に評価してください。

## <a name="next-steps"></a>次の手順

- マイクロサービスに関する最大の課題の 1 つは、適切なサービス境界を作成することです。 [マイクロサービスのモデル化](./model/domain-analysis.md)に関するページにある記事に、この問題に対するドメイン駆動アプローチが紹介されています。
